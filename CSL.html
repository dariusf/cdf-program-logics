<!DOCTYPE html>
<html class="alectryon-standalone"><head><title>CSL.v</title><meta charset="utf-8"><meta content="Alectryon" name="generator"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="alectryon.css" rel="stylesheet"><link href="pygments.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" /><script src="alectryon.js"></script></head><body><article class="alectryon-root alectryon-centered alectryon-coqdoc"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.19.0+0.19.3. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><div class="doc">
Concurrent separation logic. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk0"><span class="kn">From</span> Coq <span class="kn">Require Import</span> ZArith Lia Bool String List.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">[Loading ML file ring_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file zify_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file micromega_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote><blockquote class="alectryon-message">[Loading ML file btauto_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Coq <span class="kn">Require Import</span> FunctionalExtensionality PropExtensionality.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> CDF <span class="kn">Require Import</span> Sequences Separation.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Local</span> <span class="kn">Open Scope</span> Z_scope.</span></span></pre><div class="doc">
<a id="lab1"></a><h1 class="section">1. A language with pointers and concurrency</h1>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --></pre><div class="doc">
Here is a variant of the PTR language (from the course on separation logic)
    with concurrency (the PAR and ATOMIC constructs).

<div class="paragraph"> </div>

    Like PTR, it's an ML-like language with immutable variables and
    references to mutable memory locations, represented using higher-order
    abstract syntax. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">com</span>: <span class="kt">Type</span> :=
  | PURE (x: Z)                      <span class="sd">(**r command without effects *)</span>
  | LET (c: com) (f: Z -&gt; com)       <span class="sd">(**r sequencing of commands *)</span>
  | IFTHENELSE (b: Z) (c1 c2: com    <span class="sd">(**r conditional *)</span>)
  | REPEAT (c: com)                  <span class="sd">(**r iterate [c] until it returns not 0 *)</span>
  | PAR (c1 c2: com)                 <span class="sd">(**r run [c1] and [c2] in parallel *)</span>
  | ATOMIC (c: com)                  <span class="sd">(**r run [c] as one atomic step *)</span>
  | ALLOC (sz: nat)                  <span class="sd">(**r allocate [sz] words of storage *)</span>
  | GET (l: Z)                       <span class="sd">(**r dereference a pointer *)</span>
  | SET (l: Z) (v: Z)                <span class="sd">(**r assign through a pointer *)</span>
  | FREE (l: Z).                     <span class="sd">(**r free one word of storage *)</span></span></span></pre><div class="doc">
Some derived forms. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">SKIP</span>: com := PURE <span class="mi">0</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">SEQ</span> (<span class="nv">c1</span> <span class="nv">c2</span>: com) := LET c1 (<span class="kr">fun</span> <span class="nv">_</span> =&gt; c2).</span></span></pre><div class="doc">
Locations that can be read / written right now. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Fixpoint</span> <span class="nf">immacc</span> (<span class="nv">l</span>: addr) (<span class="nv">c</span>: com) : <span class="kt">Prop</span> :=
  <span class="kr">match</span> c <span class="kr">with</span>
  | LET c _ =&gt; immacc l c
  | PAR c1 c2 =&gt; immacc l c1 \/ immacc l c2
  | GET l&#39; =&gt; l = l&#39;
  | SET l&#39; _ =&gt; l = l&#39;
  | FREE l&#39; =&gt; l = l&#39;
  | _ =&gt; <span class="kt">False</span>
  <span class="kr">end</span>.</span></span></pre><div class="doc">
Reduction semantics. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">red</span>: com * heap -&gt; com * heap -&gt; <span class="kt">Prop</span> :=
  | red_let_done: <span class="kr">forall</span> <span class="nv">x</span> <span class="nv">f</span> <span class="nv">h</span>,
      <span class="nb">red</span> (LET (PURE x) f, h) (f x, h)
  | red_let_step: <span class="kr">forall</span> <span class="nv">c</span> <span class="nv">f</span> <span class="nv">h</span> <span class="nv">c&#39;</span> <span class="nv">h&#39;</span>,
      <span class="nb">red</span> (c, h) (c&#39;, h&#39;) -&gt;
      <span class="nb">red</span> (LET c f, h) (LET c&#39; f, h&#39;)
  | red_ifthenelse: <span class="kr">forall</span> <span class="nv">b</span> <span class="nv">c1</span> <span class="nv">c2</span> <span class="nv">h</span>,
      <span class="nb">red</span> (IFTHENELSE b c1 c2, h) ((<span class="kr">if</span> Z.eqb b <span class="mi">0</span> <span class="kr">then</span> c2 <span class="kr">else</span> c1), h)
  | red_repeat: <span class="kr">forall</span> <span class="nv">c</span> <span class="nv">h</span>,
      <span class="nb">red</span> (REPEAT c, h) (LET c (<span class="kr">fun</span> <span class="nv">b</span> =&gt; IFTHENELSE b (PURE b) (REPEAT c)), h)
  | red_par_done: <span class="kr">forall</span> <span class="nv">v1</span> <span class="nv">v2</span> <span class="nv">h</span>,
      <span class="nb">red</span> (PAR (PURE v1) (PURE v2), h) (SKIP, h)
  | red_par_left: <span class="kr">forall</span> <span class="nv">c1</span> <span class="nv">c2</span> <span class="nv">h</span> <span class="nv">c1&#39;</span> <span class="nv">h&#39;</span>,
      <span class="nb">red</span> (c1, h) (c1&#39;, h&#39;) -&gt;
      <span class="nb">red</span> (PAR c1 c2, h) (PAR c1&#39; c2, h&#39;)
  | red_par_right: <span class="kr">forall</span> <span class="nv">c1</span> <span class="nv">c2</span> <span class="nv">h</span> <span class="nv">c2&#39;</span> <span class="nv">h&#39;</span>,
      <span class="nb">red</span> (c2, h) (c2&#39;, h&#39;) -&gt;
      <span class="nb">red</span> (PAR c1 c2, h) (PAR c1 c2&#39;, h&#39;)
  | red_atomic: <span class="kr">forall</span> <span class="nv">c</span> <span class="nv">h</span> <span class="nv">v</span> <span class="nv">h&#39;</span>,
      star <span class="nb">red</span> (c, h) (PURE v, h&#39;) -&gt;
      <span class="nb">red</span>  (ATOMIC c, h) (PURE v, h&#39;)
  | red_alloc: <span class="kr">forall</span> <span class="nv">sz</span> (<span class="nv">h</span>: heap) <span class="nv">l</span>,
      (<span class="kr">forall</span> <span class="nv">i</span>, l &lt;= i &lt; l + Z.of_nat sz -&gt; h i = None) -&gt;
      l &lt;&gt; <span class="mi">0</span> -&gt;
      <span class="nb">red</span> (ALLOC sz, h) (PURE l, hinit l sz h)
  | red_get: <span class="kr">forall</span> <span class="nv">l</span> (<span class="nv">h</span>: heap) <span class="nv">v</span>,
      h l = Some v -&gt;
      <span class="nb">red</span> (GET l, h) (PURE v, h)
  | red_set: <span class="kr">forall</span> <span class="nv">l</span> <span class="nv">v</span> (<span class="nv">h</span>: heap),
      h l &lt;&gt; None -&gt;
      <span class="nb">red</span> (SET l v, h) (SKIP, hupdate l v h)
  | red_free: <span class="kr">forall</span> <span class="nv">l</span> (<span class="nv">h</span>: heap),
      h l &lt;&gt; None -&gt;
      <span class="nb">red</span> (FREE l, h) (SKIP, hfree l h).</span></span></pre><div class="doc">
Run-time errors. This includes race conditions, where a location is
    immediately accessed by two commands running in parallel. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">erroneous</span>: com * heap -&gt; <span class="kt">Prop</span> :=
  | erroneous_let: <span class="kr">forall</span> <span class="nv">c</span> <span class="nv">f</span> <span class="nv">h</span>,
      erroneous (c, h) -&gt; erroneous (LET c f, h)
  | erroneous_par_race: <span class="kr">forall</span> <span class="nv">c1</span> <span class="nv">c2</span> <span class="nv">h</span> <span class="nv">l</span>,
      immacc l c1 /\ immacc l c2 -&gt;
      erroneous (PAR c1 c2, h)
  | erroneous_par_l: <span class="kr">forall</span> <span class="nv">c1</span> <span class="nv">c2</span> <span class="nv">h</span>,
      erroneous (c1, h) -&gt; erroneous (PAR c1 c2, h)
  | erroneous_par_r: <span class="kr">forall</span> <span class="nv">c1</span> <span class="nv">c2</span> <span class="nv">h</span>,
      erroneous (c2, h) -&gt; erroneous (PAR c1 c2, h)
  | erroneous_atomic: <span class="kr">forall</span> <span class="nv">c</span> <span class="nv">h</span> <span class="nv">c&#39;</span> <span class="nv">h&#39;</span>,
      star <span class="nb">red</span> (c, h) (c&#39;, h&#39;) -&gt;
      erroneous (c&#39;, h&#39;) -&gt;
      erroneous (ATOMIC c, h)
  | erroneous_get: <span class="kr">forall</span> <span class="nv">l</span> (<span class="nv">h</span>: heap),
      h l = None -&gt; erroneous (GET l, h)
  | erroneous_set: <span class="kr">forall</span> <span class="nv">l</span> <span class="nv">v</span> (<span class="nv">h</span>: heap),
      h l = None -&gt; erroneous (SET l v, h)
  | erroneous_free: <span class="kr">forall</span> <span class="nv">l</span> (<span class="nv">h</span>: heap),
      h l = None -&gt; erroneous (FREE l, h).</span></span></pre><div class="doc">
<a id="lab2"></a><h1 class="section">2.  The rules of concurrent separation logic</h1>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">invariant</span> := assertion.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">precond</span> := assertion.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">postcond</span> := Z -&gt; assertion.</span></span></pre><div class="doc">
<a id="lab3"></a><h2 class="section">2.1.  Semantic definition of weak triples</h2>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --></pre><div class="doc">
We now define "triples" (actually, quadruples) <span class="inlinecode"></span> <span class="inlinecode"><span class="id" title="var">J</span></span> <span class="inlinecode">‚ä¢</span> <span class="inlinecode">‚¶É</span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">‚¶Ñ</span> <span class="inlinecode"><span class="id" title="var">c</span></span> <span class="inlinecode">‚¶É</span> <span class="inlinecode"><span class="id" title="var">Q</span></span> <span class="inlinecode">‚¶Ñ</span> <span class="inlinecode"></span>,
  where <span class="inlinecode"><span class="id" title="var">c</span></span> is a command, <span class="inlinecode"><span class="id" title="var">P</span></span> a precondition (on the initial memory heap),
  <span class="inlinecode"><span class="id" title="var">Q</span></span> a postcondition (on the return value and the final memory heap),
  and <span class="inlinecode"><span class="id" title="var">J</span></span> an invariant about the shared heap that is accessed by atomic
  commands.  This is a weak triple: termination is not guaranteed.

<div class="paragraph"> </div>

  As in the <span class="inlinecode"><span class="id" title="var">Seplog</span></span> module, we define the "triple" semantically
  in terms of a <span class="inlinecode"><span class="id" title="var">safe</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode"><span class="id" title="var">c</span></span> <span class="inlinecode"><span class="id" title="var">h1</span></span> <span class="inlinecode"><span class="id" title="var">Q</span></span> <span class="inlinecode"><span class="id" title="var">J</span></span> predicate over the possible reductions
  of command <span class="inlinecode"><span class="id" title="var">c</span></span> in heap <span class="inlinecode"><span class="id" title="var">h1</span></span>.

<div class="paragraph"> </div>

  The definition of <span class="inlinecode"><span class="id" title="var">safe</span></span> follows Vafeiadis (2011) and uses quantification
  over all possible shared heaps <span class="inlinecode"><span class="id" title="var">hj</span></span> and framing heaps <span class="inlinecode"><span class="id" title="var">hf</span></span>.

<div class="paragraph"> </div>

  Step-indexing (the <span class="inlinecode"><span class="id" title="var">n</span></span> parameter) provides an induction principle
  over the <span class="inlinecode"><span class="id" title="var">safe</span></span> predicate. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">safe</span>: nat -&gt; com -&gt; heap -&gt; postcond -&gt; invariant -&gt; <span class="kt">Prop</span> :=
  | safe_zero: <span class="kr">forall</span> <span class="nv">c</span> <span class="nv">h</span> <span class="nv">Q</span> <span class="nv">J</span>,
      safe O c h Q J
  | safe_done: <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">v</span> <span class="nv">h</span> (<span class="nv">Q</span>: postcond) (<span class="nv">J</span>: invariant),
      Q v h -&gt;
      safe (S n) (PURE v) h Q J
  | safe_step: <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">c</span> (<span class="nv">h1</span>: heap) (<span class="nv">Q</span>: postcond) (<span class="nv">J</span>: invariant)
      (<span class="nv">NOTDONE</span>: <span class="kr">match</span> c <span class="kr">with</span> PURE _ =&gt; <span class="kt">False</span> | _ =&gt; <span class="kt">True</span> <span class="kr">end</span>)
      (<span class="nv">ACC</span>: <span class="kr">forall</span> <span class="nv">l</span>, immacc l c -&gt; h1 l &lt;&gt; None)
      (<span class="nv">IMM</span>: <span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h</span>,
         hdisj3 h1 hj hf -&gt;
         h = hunion h1 (hunion hj hf) -&gt;
         J hj -&gt;
         ~ erroneous (c, h))
      (<span class="nv">STEP</span>: <span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h</span> <span class="nv">c&#39;</span> <span class="nv">h&#39;</span>,
         hdisj3 h1 hj hf -&gt;
         h = hunion h1 (hunion hj hf) -&gt;
         J hj -&gt;
         <span class="nb">red</span> (c, h) (c&#39;, h&#39;) -&gt;
         <span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span>,
           hdisj3 h1&#39; hj&#39; hf /\
           h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
           J hj&#39; /\ safe n c&#39; h1&#39; Q J),
      safe (S n) c h1 Q J.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">triple</span> (<span class="nv">J</span>: invariant) (<span class="nv">P</span>: precond) (<span class="nv">c</span>: com) (<span class="nv">Q</span>: postcond) :=
  <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">h</span>, P h -&gt; safe n c h Q J.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Notation</span> <span class="s2">&quot;J &#39;‚ä¢&#39; ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ&quot;</span> := (triple J P c Q) (<span class="kn">at level</span> <span class="mi">90</span>, c <span class="kn">at next level</span>).</span></span></pre><div class="doc">
<a id="lab4"></a><h2 class="section">2.2. Properties about <span class="inlinecode"><span class="id" title="var">safe</span></span></h2>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Ltac</span> <span class="nf">inv</span> H := <span class="nb">inversion</span> H; <span class="nb">clear</span> H; <span class="nb">subst</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1"><span class="kn">Lemma</span> <span class="nf">safe_pure</span>: <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">v</span> <span class="nv">h</span> (<span class="nv">Q</span>: postcond) <span class="nv">J</span>,
  Q v h -&gt; safe n (PURE v) h Q J.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">v</span> : Z) (<span class="nv">h</span> : heap) (<span class="nv">Q</span> : postcond)
  (<span class="nv">J</span> : invariant), Q v h -&gt; safe n (PURE v) h Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">v</span> : Z) (<span class="nv">h</span> : heap) (<span class="nv">Q</span> : postcond)
  (<span class="nv">J</span> : invariant), Q v h -&gt; safe n (PURE v) h Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Q v h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (PURE v) h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> n; <span class="nb">constructor</span>; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4"><span class="kn">Lemma</span> <span class="nf">safe_pure_inv</span>: <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">v</span> <span class="nv">h</span> <span class="nv">Q</span> <span class="nv">J</span>,
  safe (S n) (PURE v) h Q J -&gt; Q v h.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">v</span> : Z) (<span class="nv">h</span> : heap) (<span class="nv">Q</span> : postcond)
  (<span class="nv">J</span> : invariant), safe (S n) (PURE v) h Q J -&gt; Q v h</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk5"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">v</span> : Z) (<span class="nv">h</span> : heap) (<span class="nv">Q</span> : postcond)
  (<span class="nv">J</span> : invariant), safe (S n) (PURE v) h Q J -&gt; Q v h</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk6"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>safe (S n) (PURE v) h Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q v h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk7">inv H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Q v h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q v h</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kt">False</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
immacc l (PURE v) -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (PURE v, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (PURE v, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk8"><hr></label><div class="goal-conclusion">Q v h</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk9"><span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kt">False</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
immacc l (PURE v) -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (PURE v, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (PURE v, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q v h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">contradiction</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chka"><span class="kn">Lemma</span> <span class="nf">safe_red</span>: <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">c</span> <span class="nv">h1</span> <span class="nv">Q</span> <span class="nv">J</span> <span class="nv">hj</span> <span class="nv">hf</span> <span class="nv">c&#39;</span> <span class="nv">h&#39;</span>,
  <span class="nb">red</span> (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
  safe (S n) c h1 Q J -&gt;
  J hj -&gt;
  hdisj3 h1 hj hf -&gt;
  <span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span>,
    hdisj3 h1&#39; hj&#39; hf /\
    h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
    J hj&#39; /\ safe n c&#39; h1&#39; Q J.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond)
  (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap) (<span class="nv">c&#39;</span> : com)
  (<span class="nv">h&#39;</span> : heap),
<span class="nb">red</span> (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
safe (S n) c h1 Q J -&gt;
J hj -&gt;
hdisj3 h1 hj hf -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond)
  (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap) (<span class="nv">c&#39;</span> : com)
  (<span class="nv">h&#39;</span> : heap),
<span class="nb">red</span> (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
safe (S n) c h1 Q J -&gt;
J hj -&gt;
hdisj3 h1 hj hf -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkc"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe (S n) c h1 Q J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkd">inv H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (PURE v, hunion h1 (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Q v h1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chke" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h1 l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h</span> : heap,
hdisj3 h1 hj hf -&gt;
h = hunion h1 (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h1 hj hf -&gt;
h = hunion h1 (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chke"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkf">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (PURE v, hunion h1 (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Q v h1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">inv H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk10">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h1 l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h</span> : heap,
hdisj3 h1 hj hf -&gt;
h = hunion h1 (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h1 hj hf -&gt;
h = hunion h1 (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk11"><span class="kn">Lemma</span> <span class="nf">safe_redN</span>: <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">c</span> <span class="nv">h1</span> <span class="nv">Q</span> <span class="nv">J</span> <span class="nv">hj</span> <span class="nv">hf</span> <span class="nv">c&#39;</span> <span class="nv">h&#39;</span>,
  starN <span class="nb">red</span> n (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
  safe (S n) c h1 Q J -&gt;
  J hj -&gt;
  hdisj3 h1 hj hf -&gt;
  <span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span>,
    hdisj3 h1&#39; hj&#39; hf /\
    h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
    J hj&#39; /\ safe <span class="mi">1</span>%nat c&#39; h1&#39; Q J.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond)
  (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap) (<span class="nv">c&#39;</span> : com)
  (<span class="nv">h&#39;</span> : heap),
starN <span class="nb">red</span> n (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
safe (S n) c h1 Q J -&gt;
J hj -&gt;
hdisj3 h1 hj hf -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk12"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond)
  (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap) (<span class="nv">c&#39;</span> : com)
  (<span class="nv">h&#39;</span> : heap),
starN <span class="nb">red</span> n (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
safe (S n) c h1 Q J -&gt;
J hj -&gt;
hdisj3 h1 hj hf -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk13"><span class="nb">induction</span> n; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> <span class="mi">0</span> (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> c h1 Q J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk14" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap)
(<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
starN <span class="nb">red</span> n (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
safe (S n) c h1 Q J -&gt;
J hj -&gt;
hdisj3 h1 hj hf -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
hdisj3 h1&#39; hj&#39; hf /\
h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\ J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> (S n) (c, hunion h1 (hunion hj hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe (S (S n)) c h1 Q J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk14"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk15">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> <span class="mi">0</span> (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> c h1 Q J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk16">inv H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> c&#39; h1 Q J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  hunion h1 (hunion hj hf) =
  hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kr">exists</span> <span class="nv">h1</span>, hj; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk17">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap)
(<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
starN <span class="nb">red</span> n (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
safe (S n) c h1 Q J -&gt;
J hj -&gt;
hdisj3 h1 hj hf -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
hdisj3 h1&#39; hj&#39; hf /\
h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\ J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> (S n) (c, hunion h1 (hunion hj hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe (S (S n)) c h1 Q J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk18">inv H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap)
(<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
starN <span class="nb">red</span> n (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
safe (S n) c h1 Q J -&gt;
J hj -&gt;
hdisj3 h1 hj hf -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
hdisj3 h1&#39; hj&#39; hf /\
h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\ J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe (S (S n)) c h1 Q J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>(com * heap)%type</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h1 (hunion hj hf)) b</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> n b (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk19"><span class="nb">rename</span> c&#39; <span class="nb">into</span> c&#39;&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap)
(<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
starN <span class="nb">red</span> n (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
safe (S n) c h1 Q J -&gt;
J hj -&gt;
hdisj3 h1 hj hf -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
hdisj3 h1&#39; hj&#39; hf /\
h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\ J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c''</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe (S (S n)) c h1 Q J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>(com * heap)%type</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h1 (hunion hj hf)) b</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> n b (c&#39;&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe <span class="mi">1</span> c&#39;&#39; h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1a"><span class="nb">rename</span> h&#39; <span class="nb">into</span> h&#39;&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap)
(<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
starN <span class="nb">red</span> n (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
safe (S n) c h1 Q J -&gt;
J hj -&gt;
hdisj3 h1 hj hf -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
hdisj3 h1&#39; hj&#39; hf /\
h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\ J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c''</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe (S (S n)) c h1 Q J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>(com * heap)%type</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h1 (hunion hj hf)) b</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> n b (c&#39;&#39;, h&#39;&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe <span class="mi">1</span> c&#39;&#39; h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1b"><span class="nb">destruct</span> b <span class="kr">as</span> [c&#39; h&#39;].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap)
(<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
starN <span class="nb">red</span> n (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
safe (S n) c h1 Q J -&gt;
J hj -&gt;
hdisj3 h1 hj hf -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
hdisj3 h1&#39; hj&#39; hf /\
h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\ J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c''</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe (S (S n)) c h1 Q J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> n (c&#39;, h&#39;) (c&#39;&#39;, h&#39;&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe <span class="mi">1</span> c&#39;&#39; h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1c"><span class="nb">edestruct</span> safe_red <span class="kr">as</span> (h1&#39; &amp; hj&#39; &amp; A &amp; B &amp; C &amp; D).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap)
(<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
starN <span class="nb">red</span> n (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
safe (S n) c h1 Q J -&gt;
J hj -&gt;
hdisj3 h1 hj hf -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
hdisj3 h1&#39; hj&#39; hf /\
h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\ J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c''</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe (S (S n)) c h1 Q J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> n (c&#39;, h&#39;) (c&#39;&#39;, h&#39;&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="nb">red</span> (<span class="nl">?c</span>, hunion <span class="nl">?h1</span> (hunion <span class="nl">?hj</span> <span class="nl">?hf</span>)) (<span class="nl">?c&#39;</span>, <span class="nl">?h&#39;</span>)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk1d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap)
(<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
starN <span class="nb">red</span> n (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
safe (S n) c h1 Q J -&gt;
J hj -&gt;
hdisj3 h1 hj hf -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
hdisj3 h1&#39; hj&#39; hf /\
h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\ J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c''</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe (S (S n)) c h1 Q J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> n (c&#39;, h&#39;) (c&#39;&#39;, h&#39;&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk1d"><hr></label><div class="goal-conclusion">safe (S <span class="nl">?n</span>) <span class="nl">?c</span> <span class="nl">?h1</span> <span class="nl">?Q</span> <span class="nl">?J</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk1e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap)
(<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
starN <span class="nb">red</span> n (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
safe (S n) c h1 Q J -&gt;
J hj -&gt;
hdisj3 h1 hj hf -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
hdisj3 h1&#39; hj&#39; hf /\
h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\ J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c''</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe (S (S n)) c h1 Q J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> n (c&#39;, h&#39;) (c&#39;&#39;, h&#39;&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk1e"><hr></label><div class="goal-conclusion"><span class="nl">?J</span> <span class="nl">?hj</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk1f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap)
(<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
starN <span class="nb">red</span> n (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
safe (S n) c h1 Q J -&gt;
J hj -&gt;
hdisj3 h1 hj hf -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
hdisj3 h1&#39; hj&#39; hf /\
h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\ J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c''</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe (S (S n)) c h1 Q J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> n (c&#39;, h&#39;) (c&#39;&#39;, h&#39;&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk1f"><hr></label><div class="goal-conclusion">hdisj3 <span class="nl">?h1</span> <span class="nl">?hj</span> <span class="nl">?hf</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk20" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap)
(<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
starN <span class="nb">red</span> n (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
safe (S n) c h1 Q J -&gt;
J hj -&gt;
hdisj3 h1 hj hf -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
hdisj3 h1&#39; hj&#39; hf /\
h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\ J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c''</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe (S (S n)) c h1 Q J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> n (c&#39;, h&#39;) (c&#39;&#39;, h&#39;&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; <span class="nl">?hf</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="nl">?h&#39;</span> = hunion h1&#39; (hunion hj&#39; <span class="nl">?hf</span>)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="nl">?J</span> hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="nl">?n</span> <span class="nl">?c&#39;</span> h1&#39; <span class="nl">?Q</span> <span class="nl">?J</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk20"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe <span class="mi">1</span> c&#39;&#39; h1&#39; Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk21"><span class="bp">eassumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap)
(<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
starN <span class="nb">red</span> n (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
safe (S n) c h1 Q J -&gt;
J hj -&gt;
hdisj3 h1 hj hf -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
hdisj3 h1&#39; hj&#39; hf /\
h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\ J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c''</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe (S (S n)) c h1 Q J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> n (c&#39;, h&#39;) (c&#39;&#39;, h&#39;&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S <span class="nl">?n</span>) c h1 <span class="nl">?Q</span> <span class="nl">?J</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk22" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap)
(<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
starN <span class="nb">red</span> n (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
safe (S n) c h1 Q J -&gt;
J hj -&gt;
hdisj3 h1 hj hf -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
hdisj3 h1&#39; hj&#39; hf /\
h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\ J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c''</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe (S (S n)) c h1 Q J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> n (c&#39;, h&#39;) (c&#39;&#39;, h&#39;&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk22"><hr></label><div class="goal-conclusion"><span class="nl">?J</span> hj</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk23" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap)
(<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
starN <span class="nb">red</span> n (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
safe (S n) c h1 Q J -&gt;
J hj -&gt;
hdisj3 h1 hj hf -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
hdisj3 h1&#39; hj&#39; hf /\
h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\ J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c''</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe (S (S n)) c h1 Q J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> n (c&#39;, h&#39;) (c&#39;&#39;, h&#39;&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk23"><hr></label><div class="goal-conclusion">hdisj3 h1 hj hf</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk24" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap)
(<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
starN <span class="nb">red</span> n (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
safe (S n) c h1 Q J -&gt;
J hj -&gt;
hdisj3 h1 hj hf -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
hdisj3 h1&#39; hj&#39; hf /\
h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\ J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c''</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe (S (S n)) c h1 Q J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> n (c&#39;, h&#39;) (c&#39;&#39;, h&#39;&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="nl">?J</span> hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="nl">?n</span> c&#39; h1&#39; <span class="nl">?Q</span> <span class="nl">?J</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk24"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe <span class="mi">1</span> c&#39;&#39; h1&#39; Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk25"><span class="bp">eassumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap)
(<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
starN <span class="nb">red</span> n (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
safe (S n) c h1 Q J -&gt;
J hj -&gt;
hdisj3 h1 hj hf -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
hdisj3 h1&#39; hj&#39; hf /\
h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\ J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c''</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe (S (S n)) c h1 Q J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> n (c&#39;, h&#39;) (c&#39;&#39;, h&#39;&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">J hj</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk26" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap)
(<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
starN <span class="nb">red</span> n (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
safe (S n) c h1 Q J -&gt;
J hj -&gt;
hdisj3 h1 hj hf -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
hdisj3 h1&#39; hj&#39; hf /\
h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\ J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c''</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe (S (S n)) c h1 Q J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> n (c&#39;, h&#39;) (c&#39;&#39;, h&#39;&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk26"><hr></label><div class="goal-conclusion">hdisj3 h1 hj hf</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk27" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap)
(<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
starN <span class="nb">red</span> n (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
safe (S n) c h1 Q J -&gt;
J hj -&gt;
hdisj3 h1 hj hf -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
hdisj3 h1&#39; hj&#39; hf /\
h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\ J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c''</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe (S (S n)) c h1 Q J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> n (c&#39;, h&#39;) (c&#39;&#39;, h&#39;&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe (S n) c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk27"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe <span class="mi">1</span> c&#39;&#39; h1&#39; Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk28"><span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap)
(<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
starN <span class="nb">red</span> n (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
safe (S n) c h1 Q J -&gt;
J hj -&gt;
hdisj3 h1 hj hf -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
hdisj3 h1&#39; hj&#39; hf /\
h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\ J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c''</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe (S (S n)) c h1 Q J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> n (c&#39;, h&#39;) (c&#39;&#39;, h&#39;&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 h1 hj hf</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk29" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap)
(<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
starN <span class="nb">red</span> n (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
safe (S n) c h1 Q J -&gt;
J hj -&gt;
hdisj3 h1 hj hf -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
hdisj3 h1&#39; hj&#39; hf /\
h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\ J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c''</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe (S (S n)) c h1 Q J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> n (c&#39;, h&#39;) (c&#39;&#39;, h&#39;&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe (S n) c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk29"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe <span class="mi">1</span> c&#39;&#39; h1&#39; Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2a"><span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap)
(<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
starN <span class="nb">red</span> n (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
safe (S n) c h1 Q J -&gt;
J hj -&gt;
hdisj3 h1 hj hf -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
hdisj3 h1&#39; hj&#39; hf /\
h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\ J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c''</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe (S (S n)) c h1 Q J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> n (c&#39;, h&#39;) (c&#39;&#39;, h&#39;&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe (S n) c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe <span class="mi">1</span> c&#39;&#39; h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2b"><span class="nb">subst</span> h&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap)
(<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
starN <span class="nb">red</span> n (c, hunion h1 (hunion hj hf)) (c&#39;, h&#39;) -&gt;
safe (S n) c h1 Q J -&gt;
J hj -&gt;
hdisj3 h1 hj hf -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
hdisj3 h1&#39; hj&#39; hf /\
h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\ J hj&#39; /\ safe <span class="mi">1</span> c&#39; h1&#39; Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c''</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe (S (S n)) c h1 Q J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> n (c&#39;, hunion h1&#39; (hunion hj&#39; hf))
  (c&#39;&#39;, h&#39;&#39;)</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h1 (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion hj&#39; hf))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe (S n) c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe <span class="mi">1</span> c&#39;&#39; h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eapply</span> IHn; <span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2c"><span class="kn">Lemma</span> <span class="nf">safe_not_erroneous</span>: <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">c</span> <span class="nv">h1</span> <span class="nv">Q</span> <span class="nv">J</span> <span class="nv">hj</span> <span class="nv">hf</span>,
  safe (S n) c h1 Q J -&gt;
  hdisj3 h1 hj hf -&gt;
  J hj -&gt;
  ~ erroneous (c, hunion h1 (hunion hj hf)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond)
  (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap),
safe (S n) c h1 Q J -&gt;
hdisj3 h1 hj hf -&gt;
J hj -&gt; ~ erroneous (c, hunion h1 (hunion hj hf))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond)
  (<span class="nv">J</span> : invariant) (<span class="nv">hj</span> <span class="nv">hf</span> : heap),
safe (S n) c h1 Q J -&gt;
hdisj3 h1 hj hf -&gt;
J hj -&gt; ~ erroneous (c, hunion h1 (hunion hj hf))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2e"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>safe (S n) c h1 Q J</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">~ erroneous (c, hunion h1 (hunion hj hf))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2f">inv H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Q v h1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">~ erroneous (PURE v, hunion h1 (hunion hj hf))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk30" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h1 l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h</span> : heap,
hdisj3 h1 hj hf -&gt;
h = hunion h1 (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h1 hj hf -&gt;
h = hunion h1 (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk30"><hr></label><div class="goal-conclusion">~ erroneous (c, hunion h1 (hunion hj hf))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk31">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Q v h1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">~ erroneous (PURE v, hunion h1 (hunion hj hf))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> ST; inv ST.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk32">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>hj, hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h1 hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h1 l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h</span> : heap,
hdisj3 h1 hj hf -&gt;
h = hunion h1 (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h1 hj hf -&gt;
h = hunion h1 (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">~ erroneous (c, hunion h1 (hunion hj hf))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk33"><span class="kn">Lemma</span> <span class="nf">safe_immacc</span>: <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">c</span> <span class="nv">h1</span> <span class="nv">Q</span> <span class="nv">J</span> <span class="nv">l</span>,
  safe (S n) c h1 Q J -&gt;
  immacc l c -&gt;
  h1 l &lt;&gt; None.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond)
  (<span class="nv">J</span> : invariant) (<span class="nv">l</span> : addr),
safe (S n) c h1 Q J -&gt; immacc l c -&gt; h1 l &lt;&gt; None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk34"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">c</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">Q</span> : postcond)
  (<span class="nv">J</span> : invariant) (<span class="nv">l</span> : addr),
safe (S n) c h1 Q J -&gt; immacc l c -&gt; h1 l &lt;&gt; None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk35"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>safe (S n) c h1 Q J</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>immacc l c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">h1 l &lt;&gt; None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk36">inv H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>immacc l (PURE v)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Q v h1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">h1 l &lt;&gt; None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk37" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>immacc l c</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h1 l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h</span> : heap,
hdisj3 h1 hj hf -&gt;
h = hunion h1 (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h1 hj hf -&gt;
h = hunion h1 (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk37"><hr></label><div class="goal-conclusion">h1 l &lt;&gt; None</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk38">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>immacc l (PURE v)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Q v h1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">h1 l &lt;&gt; None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">contradiction</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk39">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>immacc l c</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h1 l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h</span> : heap,
hdisj3 h1 hj hf -&gt;
h = hunion h1 (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h1 hj hf -&gt;
h = hunion h1 (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">h1 l &lt;&gt; None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eapply</span> ACC; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3a"><span class="kn">Lemma</span> <span class="nf">safe_mono</span>: <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">c</span> <span class="nv">h</span> <span class="nv">Q</span> <span class="nv">J</span>,
  safe n c h Q J -&gt; <span class="kr">forall</span> <span class="nv">n&#39;</span>, (n&#39; &lt;= n)%nat -&gt; safe n&#39; c h Q J.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap) (<span class="nv">Q</span> : postcond)
  (<span class="nv">J</span> : invariant),
safe n c h Q J -&gt;
<span class="kr">forall</span> <span class="nv">n&#39;</span> : nat, (n&#39; &lt;= n)%nat -&gt; safe n&#39; c h Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap) (<span class="nv">Q</span> : postcond)
  (<span class="nv">J</span> : invariant),
safe n c h Q J -&gt;
<span class="kr">forall</span> <span class="nv">n&#39;</span> : nat, (n&#39; &lt;= n)%nat -&gt; safe n&#39; c h Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3c"><span class="nb">induction</span> n; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">0</span> c h Q J</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(n&#39; &lt;= <span class="mi">0</span>)%nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n&#39; c h Q J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant),
safe n c h Q J -&gt; <span class="kr">forall</span> <span class="nv">n&#39;</span> : nat, (n&#39; &lt;= n)%nat -&gt; safe n&#39; c h Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q J</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(n&#39; &lt;= S n)%nat</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3d"><hr></label><div class="goal-conclusion">safe n&#39; c h Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">0</span> c h Q J</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(n&#39; &lt;= <span class="mi">0</span>)%nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n&#39; c h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3f"><span class="nb">replace</span> n&#39; <span class="kr">with</span> O <span class="bp">by</span> <span class="bp">lia</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">0</span> c h Q J</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(n&#39; &lt;= <span class="mi">0</span>)%nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe <span class="mi">0</span> c h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk40">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant),
safe n c h Q J -&gt; <span class="kr">forall</span> <span class="nv">n&#39;</span> : nat, (n&#39; &lt;= n)%nat -&gt; safe n&#39; c h Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q J</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(n&#39; &lt;= S n)%nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n&#39; c h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk41"><span class="nb">destruct</span> n&#39; <span class="kr">as</span> [ | n&#39;].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant),
safe n c h Q J -&gt; <span class="kr">forall</span> <span class="nv">n&#39;</span> : nat, (n&#39; &lt;= n)%nat -&gt; safe n&#39; c h Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q J</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(<span class="mi">0</span> &lt;= S n)%nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe <span class="mi">0</span> c h Q J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk42" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant),
safe n c h Q J -&gt; <span class="kr">forall</span> <span class="nv">n&#39;</span> : nat, (n&#39; &lt;= n)%nat -&gt; safe n&#39; c h Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q J</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(S n&#39; &lt;= S n)%nat</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk42"><hr></label><div class="goal-conclusion">safe (S n&#39;) c h Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk43"><span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant),
safe n c h Q J -&gt; <span class="kr">forall</span> <span class="nv">n&#39;</span> : nat, (n&#39; &lt;= n)%nat -&gt; safe n&#39; c h Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q J</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(S n&#39; &lt;= S n)%nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n&#39;) c h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk44">inv H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant),
safe n c h Q J -&gt; <span class="kr">forall</span> <span class="nv">n&#39;</span> : nat, (n&#39; &lt;= n)%nat -&gt; safe n&#39; c h Q J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(S n&#39; &lt;= S n)%nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Q v h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n&#39;) (PURE v) h Q J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk45" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant),
safe n c h Q J -&gt; <span class="kr">forall</span> <span class="nv">n&#39;</span> : nat, (n&#39; &lt;= n)%nat -&gt; safe n&#39; c h Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(S n&#39; &lt;= S n)%nat</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk45"><hr></label><div class="goal-conclusion">safe (S n&#39;) c h Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk46">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant),
safe n c h Q J -&gt; <span class="kr">forall</span> <span class="nv">n&#39;</span> : nat, (n&#39; &lt;= n)%nat -&gt; safe n&#39; c h Q J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(S n&#39; &lt;= S n)%nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Q v h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n&#39;) (PURE v) h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">constructor</span>; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk47">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant),
safe n c h Q J -&gt; <span class="kr">forall</span> <span class="nv">n&#39;</span> : nat, (n&#39; &lt;= n)%nat -&gt; safe n&#39; c h Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(S n&#39; &lt;= S n)%nat</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n&#39;) c h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk48"><span class="nb">constructor</span>; <span class="nb">auto</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant),
safe n c h Q J -&gt; <span class="kr">forall</span> <span class="nv">n&#39;</span> : nat, (n&#39; &lt;= n)%nat -&gt; safe n&#39; c h Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(S n&#39; &lt;= S n)%nat</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n&#39; c&#39; h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk49"><span class="nb">edestruct</span> STEP <span class="kr">as</span> (h1&#39; &amp; hj&#39; &amp; A &amp; B &amp; C &amp; D); <span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant),
safe n c h Q J -&gt; <span class="kr">forall</span> <span class="nv">n&#39;</span> : nat, (n&#39; &lt;= n)%nat -&gt; safe n&#39; c h Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(S n&#39; &lt;= S n)%nat</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n&#39; c&#39; h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4a"><span class="kr">exists</span> <span class="nv">h1&#39;</span>, hj&#39;; <span class="nb">intuition</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant),
safe n c h Q J -&gt; <span class="kr">forall</span> <span class="nv">n&#39;</span> : nat, (n&#39; &lt;= n)%nat -&gt; safe n&#39; c h Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(S n&#39; &lt;= S n)%nat</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
immacc l c -&gt; h l = None -&gt; <span class="kt">False</span></span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; erroneous (c, h0) -&gt; <span class="kt">False</span></span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n&#39; c&#39; h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4b"><span class="nb">apply</span> IHn; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant),
safe n c h Q J -&gt; <span class="kr">forall</span> <span class="nv">n&#39;</span> : nat, (n&#39; &lt;= n)%nat -&gt; safe n&#39; c h Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(S n&#39; &lt;= S n)%nat</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
immacc l c -&gt; h l = None -&gt; <span class="kt">False</span></span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; erroneous (c, h0) -&gt; <span class="kt">False</span></span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(n&#39; &lt;= n)%nat</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab5"></a><h2 class="section">2.3. The rules of concurrent separation logic</h2>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --></pre><div class="doc">
<a id="lab6"></a><h3 class="section">The frame rule</h3>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4c"><span class="kn">Lemma</span> <span class="nf">safe_frame</span>:
  <span class="kr">forall</span> (<span class="nv">R</span>: assertion) (<span class="nv">Q</span>: postcond) <span class="nv">J</span> <span class="nv">n</span> <span class="nv">c</span> <span class="nv">h</span> <span class="nv">h&#39;</span>,
  safe n c h Q J -&gt; hdisjoint h h&#39; -&gt; R h&#39; -&gt;
  safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> =&gt; Q v ** R) J.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">R</span> : assertion) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant)
  (<span class="nv">n</span> : nat) (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">R</span> : assertion) (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant)
  (<span class="nv">n</span> : nat) (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4e"><span class="nb">induction</span> n; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">0</span> c h Q J</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe <span class="mi">0</span> c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk4f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q J</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk4f"><hr></label><div class="goal-conclusion">safe (S n) c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk50">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">0</span> c h Q J</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe <span class="mi">0</span> c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk51">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q J</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n) c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk52">inv H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Q v h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n) (PURE v) (hunion h h&#39;)
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk53" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk53"><hr></label><div class="goal-conclusion">safe (S n) c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk54">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Q v h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n) (PURE v) (hunion h h&#39;)
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk55"><span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Q v h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(Q v ** R) (hunion h h&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kr">exists</span> <span class="nv">h</span>, h&#39;; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk56">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n) c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk57"><span class="nb">constructor</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; hunion h h&#39; l &lt;&gt; None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk58" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk58"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 (hunion h h&#39;) hj hf -&gt;
h0 = hunion (hunion h h&#39;) (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk59" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk59"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;0</span> : heap),
hdisj3 (hunion h h&#39;) hj hf -&gt;
h0 = hunion (hunion h h&#39;) (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;0) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk5a">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; hunion h h&#39; l &lt;&gt; None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk5b"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>immacc l c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h h&#39; l &lt;&gt; None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk5c"><span class="nb">apply</span> ACC <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>h l &lt;&gt; None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h h&#39; l &lt;&gt; None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk5d"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>h l &lt;&gt; None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> h l <span class="kr">then</span> h l <span class="kr">else</span> h&#39; l) &lt;&gt; None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> (h l); <span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk5e">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 (hunion h h&#39;) hj hf -&gt;
h0 = hunion (hunion h h&#39;) (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk5f"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">~ erroneous (c, h0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk60"><span class="nb">subst</span> h0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">~ erroneous (c, hunion (hunion h h&#39;) (hunion hj hf))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk61"><span class="nb">apply</span> (IMM (hunion h&#39; hf) hj).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 h hj (hunion h&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk62" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk62"><hr></label><div class="goal-conclusion">hunion (hunion h h&#39;) (hunion hj hf) =
hunion h (hunion hj (hunion h&#39; hf))</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk63" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk63"><hr></label><div class="goal-conclusion">J hj</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk64">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion (hunion h h&#39;) (hunion hj hf) =
hunion h (hunion hj (hunion h&#39; hf))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk65" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk65"><hr></label><div class="goal-conclusion">J hj</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk66"><span class="nb">rewrite</span> hunion_assoc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h (hunion h&#39; (hunion hj hf)) =
hunion h (hunion hj (hunion h&#39; hf))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk67" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk67"><hr></label><div class="goal-conclusion">J hj</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk68"><span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h&#39; (hunion hj hf) = hunion hj (hunion h&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk69" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk69"><hr></label><div class="goal-conclusion">J hj</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk6a"><span class="nb">rewrite</span> hunion_comm <span class="bp">by</span> HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion (hunion hj hf) h&#39; = hunion hj (hunion h&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk6b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk6b"><hr></label><div class="goal-conclusion">J hj</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk6c"><span class="nb">rewrite</span> hunion_assoc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion hj (hunion hf h&#39;) = hunion hj (hunion h&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk6d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk6d"><hr></label><div class="goal-conclusion">J hj</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk6e"><span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion hf h&#39; = hunion h&#39; hf</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk6f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk6f"><hr></label><div class="goal-conclusion">J hj</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk70"><span class="nb">apply</span> hunion_comm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisjoint h&#39; hf</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk71" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk71"><hr></label><div class="goal-conclusion">J hj</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk72">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">J hj</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk73">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;0</span> : heap),
hdisj3 (hunion h h&#39;) hj hf -&gt;
h0 = hunion (hunion h h&#39;) (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;0) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk74"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk75"><span class="nb">subst</span> h0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk76"><span class="nb">edestruct</span> (STEP (hunion h&#39; hf) hj) <span class="kr">as</span> (h1&#39; &amp; hj&#39; &amp; A &amp; B &amp; C &amp; D).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 h hj (hunion h&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk77" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk77"><hr></label><div class="goal-conclusion"><span class="nl">?h</span> = hunion h (hunion hj (hunion h&#39; hf))</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk78" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk78"><hr></label><div class="goal-conclusion">J hj</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk79" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk79"><hr></label><div class="goal-conclusion"><span class="nb">red</span> (c, <span class="nl">?h</span>) (<span class="nl">?c&#39;</span>, <span class="nl">?h&#39;</span>)</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk7a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="nl">?h&#39;</span> = hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n <span class="nl">?c&#39;</span> h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk7a"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk7b"><span class="mi">4</span>: <span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 h hj (hunion h&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk7c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk7c"><hr></label><div class="goal-conclusion">hunion (hunion h h&#39;) (hunion hj hf) =
hunion h (hunion hj (hunion h&#39; hf))</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk7d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk7d"><hr></label><div class="goal-conclusion">J hj</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk7e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39;0 = hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk7e"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk7f">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion (hunion h h&#39;) (hunion hj hf) =
hunion h (hunion hj (hunion h&#39; hf))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk80" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk80"><hr></label><div class="goal-conclusion">J hj</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk81" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39;0 = hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk81"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk82" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk82"><span class="nb">rewrite</span> hunion_assoc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h (hunion h&#39; (hunion hj hf)) =
hunion h (hunion hj (hunion h&#39; hf))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk83" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk83"><hr></label><div class="goal-conclusion">J hj</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk84" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39;0 = hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk84"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk85" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk85"><span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h&#39; (hunion hj hf) = hunion hj (hunion h&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk86" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk86"><hr></label><div class="goal-conclusion">J hj</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk87" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39;0 = hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk87"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk88" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk88"><span class="nb">rewrite</span> hunion_comm <span class="bp">by</span> HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion (hunion hj hf) h&#39; = hunion hj (hunion h&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk89" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk89"><hr></label><div class="goal-conclusion">J hj</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk8a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39;0 = hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk8a"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk8b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk8b"><span class="nb">rewrite</span> hunion_assoc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion hj (hunion hf h&#39;) = hunion hj (hunion h&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk8c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk8c"><hr></label><div class="goal-conclusion">J hj</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk8d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39;0 = hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk8d"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk8e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk8e"><span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion hf h&#39; = hunion h&#39; hf</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk8f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk8f"><hr></label><div class="goal-conclusion">J hj</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk90" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39;0 = hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk90"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk91" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk91"><span class="nb">apply</span> hunion_comm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisjoint h&#39; hf</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk92" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk92"><hr></label><div class="goal-conclusion">J hj</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk93" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39;0 = hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk93"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk94" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk94">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">J hj</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk95" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39;0 = hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk95"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk96"><span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39;0 = hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk97" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk97"><span class="nb">subst</span> h&#39;0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;0</span> <span class="nv">hj&#39;0</span> : heap,
  hdisj3 h1&#39;0 hj&#39;0 hf /\
  hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)) =
  hunion h1&#39;0 (hunion hj&#39;0 hf) /\
  J hj&#39;0 /\ safe n c&#39; h1&#39;0 (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk98" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk98"><span class="kr">exists</span> (<span class="nv">hunion</span> <span class="nv">h1&#39;</span> <span class="nv">h&#39;</span>), hj&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 (hunion h1&#39; h&#39;) hj&#39; hf /\
hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)) =
hunion (hunion h1&#39; h&#39;) (hunion hj&#39; hf) /\
J hj&#39; /\
safe n c&#39; (hunion h1&#39; h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk99" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk99"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 (hunion h1&#39; h&#39;) hj&#39; hf</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk9a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk9a"><hr></label><div class="goal-conclusion">hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)) =
hunion (hunion h1&#39; h&#39;) (hunion hj&#39; hf) /\
J hj&#39; /\
safe n c&#39; (hunion h1&#39; h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk9b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk9b">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)) =
hunion (hunion h1&#39; h&#39;) (hunion hj&#39; hf) /\
J hj&#39; /\
safe n c&#39; (hunion h1&#39; h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk9c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk9c"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)) =
hunion (hunion h1&#39; h&#39;) (hunion hj&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk9d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk9d"><hr></label><div class="goal-conclusion">J hj&#39; /\
safe n c&#39; (hunion h1&#39; h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk9e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk9e"><span class="nb">rewrite</span> hunion_assoc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)) =
hunion h1&#39; (hunion h&#39; (hunion hj&#39; hf))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk9f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk9f"><hr></label><div class="goal-conclusion">J hj&#39; /\
safe n c&#39; (hunion h1&#39; h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chka0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chka0"><span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion hj&#39; (hunion h&#39; hf) = hunion h&#39; (hunion hj&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chka1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chka1"><hr></label><div class="goal-conclusion">J hj&#39; /\
safe n c&#39; (hunion h1&#39; h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chka2" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chka2"><span class="nb">rewrite</span> hunion_comm <span class="bp">by</span> HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion (hunion h&#39; hf) hj&#39; = hunion h&#39; (hunion hj&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chka3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chka3"><hr></label><div class="goal-conclusion">J hj&#39; /\
safe n c&#39; (hunion h1&#39; h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chka4" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chka4"><span class="nb">rewrite</span> hunion_assoc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h&#39; (hunion hf hj&#39;) = hunion h&#39; (hunion hj&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chka5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chka5"><hr></label><div class="goal-conclusion">J hj&#39; /\
safe n c&#39; (hunion h1&#39; h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chka6" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chka6"><span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion hf hj&#39; = hunion hj&#39; hf</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chka7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chka7"><hr></label><div class="goal-conclusion">J hj&#39; /\
safe n c&#39; (hunion h1&#39; h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chka8" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chka8"><span class="nb">apply</span> hunion_comm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisjoint hj&#39; hf</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chka9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chka9"><hr></label><div class="goal-conclusion">J hj&#39; /\
safe n c&#39; (hunion h1&#39; h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkaa" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkaa">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">J hj&#39; /\
safe n c&#39; (hunion h1&#39; h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkab" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkab"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">J hj&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chkac" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt;
R h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chkac"><hr></label><div class="goal-conclusion">safe n c&#39; (hunion h1&#39; h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkad" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkad"><span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c&#39; (hunion h1&#39; h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkae" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkae"><span class="nb">apply</span> IHn; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q J -&gt;
hdisjoint h h&#39; -&gt; R h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>R h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion hj&#39; (hunion h&#39; hf)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion h&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisjoint h1&#39; h&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">HDISJ.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkaf" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkaf"><span class="kn">Lemma</span> <span class="nf">triple_frame</span>: <span class="kr">forall</span> <span class="nv">J</span> <span class="nv">P</span> <span class="nv">c</span> <span class="nv">Q</span> <span class="nv">R</span>,
  J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ -&gt;
  J ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> =&gt; Q v ** R ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : invariant) (<span class="nv">P</span> : precond) (<span class="nv">c</span> : com)
  (<span class="nv">Q</span> : postcond) (<span class="nv">R</span> : assertion),
J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ -&gt;
J ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkb0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkb0"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : invariant) (<span class="nv">P</span> : precond) (<span class="nv">c</span> : com)
  (<span class="nv">Q</span> : postcond) (<span class="nv">R</span> : assertion),
J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ -&gt;
J ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkb1" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkb1"><span class="nb">intros</span>; <span class="nb">red</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(P ** R) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkb2" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkb2"><span class="nb">destruct</span> H0 <span class="kr">as</span> (h1 &amp; h2 &amp; P1 &amp; R2 &amp; D &amp; U).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h, h1, h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>P1</var><span class="hyp-type"><b>: </b><span>P h1</span></span></span><br><span><var>R2</var><span class="hyp-type"><b>: </b><span>R h2</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>h = hunion h1 h2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkb3" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkb3"><span class="nb">subst</span> h.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h1, h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>P1</var><span class="hyp-type"><b>: </b><span>P h1</span></span></span><br><span><var>R2</var><span class="hyp-type"><b>: </b><span>R h2</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> safe_frame; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab7"></a><h3 class="section">The frame rule for invariants</h3>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkb4" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkb4"><span class="kn">Lemma</span> <span class="nf">safe_frame_invariant</span>:
  <span class="kr">forall</span> <span class="nv">Q</span> (<span class="nv">J</span> <span class="nv">J&#39;</span>: invariant) <span class="nv">n</span> <span class="nv">c</span> <span class="nv">h</span>,
  safe n c h Q J -&gt; 
  safe n c h Q (J ** J&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> <span class="nv">J&#39;</span> : invariant) (<span class="nv">n</span> : nat)
  (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkb5" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkb5"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> <span class="nv">J&#39;</span> : invariant) (<span class="nv">n</span> : nat)
  (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkb6" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkb6"><span class="nb">induction</span> n; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">0</span> c h Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe <span class="mi">0</span> c h Q (J ** J&#39;)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chkb7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chkb7"><hr></label><div class="goal-conclusion">safe (S n) c h Q (J ** J&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkb8" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkb8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">0</span> c h Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe <span class="mi">0</span> c h Q (J ** J&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkb9" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkb9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n) c h Q (J ** J&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkba" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkba">inv H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Q v h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n) (PURE v) h Q (J ** J&#39;)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chkbb" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chkbb"><hr></label><div class="goal-conclusion">safe (S n) c h Q (J ** J&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkbc" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkbc">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Q v h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n) (PURE v) h Q (J ** J&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">constructor</span>; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkbd" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkbd">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n) c h Q (J ** J&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkbe" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkbe"><span class="nb">constructor</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chkbf" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chkbf"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkc0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkc0">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkc1" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkc1"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(J ** J&#39;) hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">~ erroneous (c, h0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkc2" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkc2"><span class="nb">destruct</span> H1 <span class="kr">as</span> (hj1 &amp; hj2 &amp; A &amp; B &amp; C &amp; D).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>hj = hunion hj1 hj2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">~ erroneous (c, h0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkc3" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkc3"><span class="nb">subst</span> hj h0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">~ erroneous (c, hunion h (hunion (hunion hj1 hj2) hf))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkc4" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkc4"><span class="nb">apply</span> (IMM (hunion hj2 hf) hj1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 h hj1 (hunion hj2 hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chkc5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br></div><label class="goal-separator" for="CSL-v-chkc5"><hr></label><div class="goal-conclusion">hunion h (hunion (hunion hj1 hj2) hf) =
hunion h (hunion hj1 (hunion hj2 hf))</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chkc6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br></div><label class="goal-separator" for="CSL-v-chkc6"><hr></label><div class="goal-conclusion">J hj1</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkc7" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkc7">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h (hunion (hunion hj1 hj2) hf) =
hunion h (hunion hj1 (hunion hj2 hf))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chkc8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br></div><label class="goal-separator" for="CSL-v-chkc8"><hr></label><div class="goal-conclusion">J hj1</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkc9" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkc9"><span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion (hunion hj1 hj2) hf =
hunion hj1 (hunion hj2 hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chkca" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br></div><label class="goal-separator" for="CSL-v-chkca"><hr></label><div class="goal-conclusion">J hj1</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkcb" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkcb"><span class="nb">rewrite</span> hunion_assoc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion hj1 (hunion hj2 hf) =
hunion hj1 (hunion hj2 hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chkcc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br></div><label class="goal-separator" for="CSL-v-chkcc"><hr></label><div class="goal-conclusion">J hj1</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkcd" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkcd"><span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">J hj1</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkce" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkce">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkcf" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkcf"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(J ** J&#39;) hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkd0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkd0"><span class="nb">destruct</span> H1 <span class="kr">as</span> (hj1 &amp; hj2 &amp; A &amp; B &amp; C &amp; D).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>hj = hunion hj1 hj2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkd1" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkd1"><span class="nb">subst</span> hj h0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h', hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkd2" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkd2"><span class="nb">edestruct</span> (STEP (hunion hj2 hf) hj1) <span class="kr">as</span> (h1&#39; &amp; hj1&#39; &amp; U &amp; V &amp; X &amp; Y).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h', hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 h hj1 (hunion hj2 hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chkd3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h', hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chkd3"><hr></label><div class="goal-conclusion"><span class="nl">?h</span> = hunion h (hunion hj1 (hunion hj2 hf))</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chkd4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h', hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chkd4"><hr></label><div class="goal-conclusion">J hj1</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chkd5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h', hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chkd5"><hr></label><div class="goal-conclusion"><span class="nb">red</span> (c, <span class="nl">?h</span>) (<span class="nl">?c&#39;</span>, <span class="nl">?h&#39;</span>)</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chkd6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h', hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj1'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj1&#39; (hunion hj2 hf)</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span><span class="nl">?h&#39;</span> = hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf))</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n <span class="nl">?c&#39;</span> h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chkd6"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkd7" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkd7"><span class="mi">4</span>: <span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h', hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 h hj1 (hunion hj2 hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chkd8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h', hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chkd8"><hr></label><div class="goal-conclusion">hunion h (hunion (hunion hj1 hj2) hf) =
hunion h (hunion hj1 (hunion hj2 hf))</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chkd9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h', hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chkd9"><hr></label><div class="goal-conclusion">J hj1</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chkda" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h', hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj1'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj1&#39; (hunion hj2 hf)</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf))</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chkda"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkdb" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkdb">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h', hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h (hunion (hunion hj1 hj2) hf) =
hunion h (hunion hj1 (hunion hj2 hf))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chkdc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h', hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chkdc"><hr></label><div class="goal-conclusion">J hj1</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chkdd" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h', hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj1'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj1&#39; (hunion hj2 hf)</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf))</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chkdd"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkde" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkde"><span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h', hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion (hunion hj1 hj2) hf =
hunion hj1 (hunion hj2 hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chkdf" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h', hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chkdf"><hr></label><div class="goal-conclusion">J hj1</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chke0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h', hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj1'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj1&#39; (hunion hj2 hf)</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf))</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chke0"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chke1" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chke1"><span class="nb">rewrite</span> hunion_assoc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h', hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion hj1 (hunion hj2 hf) =
hunion hj1 (hunion hj2 hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chke2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h', hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chke2"><hr></label><div class="goal-conclusion">J hj1</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chke3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h', hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj1'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj1&#39; (hunion hj2 hf)</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf))</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chke3"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chke4" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chke4"><span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h', hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">J hj1</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chke5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h', hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj1'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj1&#39; (hunion hj2 hf)</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf))</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chke5"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chke6" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chke6"><span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h', hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj1'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj1&#39; (hunion hj2 hf)</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf))</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chke7" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chke7"><span class="nb">subst</span> h&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>h1', hj1'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf)))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj1&#39; (hunion hj2 hf)</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;0</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39;0 hj&#39; hf /\
  hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf)) =
  hunion h1&#39;0 (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39;0 Q (J ** J&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chke8" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chke8"><span class="kr">exists</span> <span class="nv">h1&#39;</span>, (hunion hj1&#39; hj2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>h1', hj1'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf)))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj1&#39; (hunion hj2 hf)</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 h1&#39; (hunion hj1&#39; hj2) hf /\
hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf)) =
hunion h1&#39; (hunion (hunion hj1&#39; hj2) hf) /\
(J ** J&#39;) (hunion hj1&#39; hj2) /\
safe n c&#39; h1&#39; Q (J ** J&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chke9" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chke9"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>h1', hj1'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf)))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj1&#39; (hunion hj2 hf)</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 h1&#39; (hunion hj1&#39; hj2) hf</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chkea" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>h1', hj1'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf)))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj1&#39; (hunion hj2 hf)</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chkea"><hr></label><div class="goal-conclusion">hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf)) =
hunion h1&#39; (hunion (hunion hj1&#39; hj2) hf) /\
(J ** J&#39;) (hunion hj1&#39; hj2) /\
safe n c&#39; h1&#39; Q (J ** J&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkeb" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkeb">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>h1', hj1'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf)))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj1&#39; (hunion hj2 hf)</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf)) =
hunion h1&#39; (hunion (hunion hj1&#39; hj2) hf) /\
(J ** J&#39;) (hunion hj1&#39; hj2) /\
safe n c&#39; h1&#39; Q (J ** J&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkec" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkec"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>h1', hj1'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf)))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj1&#39; (hunion hj2 hf)</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf)) =
hunion h1&#39; (hunion (hunion hj1&#39; hj2) hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chked" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>h1', hj1'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf)))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj1&#39; (hunion hj2 hf)</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chked"><hr></label><div class="goal-conclusion">(J ** J&#39;) (hunion hj1&#39; hj2) /\
safe n c&#39; h1&#39; Q (J ** J&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkee" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkee"><span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>h1', hj1'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf)))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj1&#39; (hunion hj2 hf)</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion hj1&#39; (hunion hj2 hf) =
hunion (hunion hj1&#39; hj2) hf</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chkef" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>h1', hj1'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf)))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj1&#39; (hunion hj2 hf)</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chkef"><hr></label><div class="goal-conclusion">(J ** J&#39;) (hunion hj1&#39; hj2) /\
safe n c&#39; h1&#39; Q (J ** J&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkf0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkf0"><span class="nb">rewrite</span> hunion_assoc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>h1', hj1'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf)))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj1&#39; (hunion hj2 hf)</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion hj1&#39; (hunion hj2 hf) =
hunion hj1&#39; (hunion hj2 hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chkf1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>h1', hj1'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf)))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj1&#39; (hunion hj2 hf)</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chkf1"><hr></label><div class="goal-conclusion">(J ** J&#39;) (hunion hj1&#39; hj2) /\
safe n c&#39; h1&#39; Q (J ** J&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkf2" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkf2"><span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>h1', hj1'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf)))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj1&#39; (hunion hj2 hf)</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(J ** J&#39;) (hunion hj1&#39; hj2) /\
safe n c&#39; h1&#39; Q (J ** J&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkf3" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkf3"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>h1', hj1'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf)))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj1&#39; (hunion hj2 hf)</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(J ** J&#39;) (hunion hj1&#39; hj2)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chkf4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>h1', hj1'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf)))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj1&#39; (hunion hj2 hf)</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chkf4"><hr></label><div class="goal-conclusion">safe n c&#39; h1&#39; Q (J ** J&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkf5" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkf5"><span class="kr">exists</span> <span class="nv">hj1&#39;</span>, hj2; <span class="nb">intuition</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
immacc l c -&gt; h l = None -&gt; <span class="kt">False</span></span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; erroneous (c, h0) -&gt; <span class="kt">False</span></span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>h1', hj1'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf)))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj1&#39; (hunion hj2 hf)</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisjoint hj1&#39; hj2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chkf6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>h1', hj1'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf)))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj1&#39; (hunion hj2 hf)</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chkf6"><hr></label><div class="goal-conclusion">safe n c&#39; h1&#39; Q (J ** J&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkf7" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkf7">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q J -&gt; safe n c h Q (J ** J&#39;)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>hf</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>hj1, hj2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h (hunion hj1 hj2) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1 hj2</span></span></span><br><span><var>h1', hj1'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion (hunion hj1 hj2) hf))
  (c&#39;, hunion h1&#39; (hunion hj1&#39; (hunion hj2 hf)))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj1&#39; (hunion hj2 hf)</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c&#39; h1&#39; Q (J ** J&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> IHn; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkf8" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkf8"><span class="kn">Lemma</span> <span class="nf">triple_frame_invariant</span>: <span class="kr">forall</span> <span class="nv">J</span> <span class="nv">J&#39;</span> <span class="nv">P</span> <span class="nv">c</span> <span class="nv">Q</span>,
  J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ -&gt;
  J ** J&#39; ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : invariant) (<span class="nv">J&#39;</span> : assertion) (<span class="nv">P</span> : precond)
  (<span class="nv">c</span> : com) (<span class="nv">Q</span> : postcond),
J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ -&gt; J ** J&#39; ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkf9" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkf9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : invariant) (<span class="nv">J&#39;</span> : assertion) (<span class="nv">P</span> : precond)
  (<span class="nv">c</span> : com) (<span class="nv">Q</span> : postcond),
J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ -&gt; J ** J&#39; ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkfa" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkfa"><span class="nb">intros</span>; <span class="nb">red</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c h Q (J ** J&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> safe_frame_invariant; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab8"></a><h3 class="section">Atomic commands</h3>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkfb" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkfb"><span class="kn">Lemma</span> <span class="nf">triple_atomic</span>: <span class="kr">forall</span> <span class="nv">J</span> <span class="nv">P</span> <span class="nv">c</span> (<span class="nv">Q</span>: postcond),
  emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> =&gt; Q v ** J ‚¶Ñ -&gt;
  J ‚ä¢ ‚¶É P ‚¶Ñ ATOMIC c ‚¶É Q ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> <span class="nv">P</span> : assertion) (<span class="nv">c</span> : com) (<span class="nv">Q</span> : postcond),
emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ -&gt;
J ‚ä¢ ‚¶É P ‚¶Ñ ATOMIC c ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkfc" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkfc"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> <span class="nv">P</span> : assertion) (<span class="nv">c</span> : com) (<span class="nv">Q</span> : postcond),
emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ -&gt;
J ‚ä¢ ‚¶É P ‚¶Ñ ATOMIC c ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkfd" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkfd"><span class="nb">intros until</span> Q; <span class="nb">intros</span> TR n h Ph.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (ATOMIC c) h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chkfe" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chkfe"><span class="nb">destruct</span> n; <span class="nb">constructor</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (ATOMIC c, h0)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chkff" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><label class="goal-separator" for="CSL-v-chkff"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (ATOMIC c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk100" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk100">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (ATOMIC c, h0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk101" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk101"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">~ erroneous (ATOMIC c, h0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk102" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk102"><span class="nb">intro</span> ST; inv ST.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>star <span class="nb">red</span> (c, hunion h (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk103" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk103"><span class="nb">apply</span> star_starN <span class="kr">in</span> H4.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="kr">exists</span> <span class="nv">n</span> : nat,
  starN <span class="nb">red</span> n (c, hunion h (hunion hj hf))
    (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk104" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk104"><span class="nb">destruct</span> H4 <span class="kr">as</span> (N &amp; STEPS).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N (c, hunion h (hunion hj hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk105" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk105"><span class="nb">rewrite</span> &lt;- hunion_assoc <span class="kr">in</span> STEPS.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N (c, hunion (hunion h hj) hf)
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk106" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk106"><span class="nb">rewrite</span> &lt;- (hunion_empty hf) <span class="kr">in</span> STEPS.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk107" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk107"><span class="nb">edestruct</span> safe_redN <span class="kr">as</span> (h1&#39; &amp; hj&#39; &amp; A &amp; B &amp; C &amp; D).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">starN <span class="nb">red</span> <span class="nl">?n</span> (<span class="nl">?c</span>, hunion <span class="nl">?h1</span> (hunion <span class="nl">?hj</span> <span class="nl">?hf</span>))
  (<span class="nl">?c&#39;</span>, <span class="nl">?h&#39;</span>)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk108" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk108"><hr></label><div class="goal-conclusion">safe (S <span class="nl">?n</span>) <span class="nl">?c</span> <span class="nl">?h1</span> <span class="nl">?Q</span> <span class="nl">?J</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk109" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk109"><hr></label><div class="goal-conclusion"><span class="nl">?J</span> <span class="nl">?hj</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk10a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk10a"><hr></label><div class="goal-conclusion">hdisj3 <span class="nl">?h1</span> <span class="nl">?hj</span> <span class="nl">?hf</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk10b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; <span class="nl">?hf</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="nl">?h&#39;</span> = hunion h1&#39; (hunion hj&#39; <span class="nl">?hf</span>)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="nl">?J</span> hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> <span class="nl">?c&#39;</span> h1&#39; <span class="nl">?Q</span> <span class="nl">?J</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk10b"><hr></label><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk10c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk10c"><span class="bp">eexact</span> STEPS.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S N) c (hunion h hj) <span class="nl">?Q</span> <span class="nl">?J</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk10d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk10d"><hr></label><div class="goal-conclusion"><span class="nl">?J</span> hempty</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk10e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk10e"><hr></label><div class="goal-conclusion">hdisj3 (hunion h hj) hempty hf</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk10f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="nl">?J</span> hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> c&#39; h1&#39; <span class="nl">?Q</span> <span class="nl">?J</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk10f"><hr></label><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk110" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk110"><span class="nb">apply</span> TR.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(P ** J) (hunion h hj)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk111" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk111"><hr></label><div class="goal-conclusion">emp hempty</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk112" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk112"><hr></label><div class="goal-conclusion">hdisj3 (hunion h hj) hempty hf</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk113" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J) emp</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk113"><hr></label><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk114" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk114"><span class="kr">exists</span> <span class="nv">h</span>, hj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P h /\
J hj /\ hdisjoint h hj /\ hunion h hj = hunion h hj</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk115" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk115"><hr></label><div class="goal-conclusion">emp hempty</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk116" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk116"><hr></label><div class="goal-conclusion">hdisj3 (hunion h hj) hempty hf</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk117" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J) emp</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk117"><hr></label><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk118" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk118"><span class="nb">intuition</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisjoint h hj</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk119" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk119"><hr></label><div class="goal-conclusion">emp hempty</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk11a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk11a"><hr></label><div class="goal-conclusion">hdisj3 (hunion h hj) hempty hf</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk11b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J) emp</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk11b"><hr></label><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk11c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk11c">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp hempty</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk11d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk11d"><hr></label><div class="goal-conclusion">hdisj3 (hunion h hj) hempty hf</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk11e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J) emp</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk11e"><hr></label><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk11f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk11f"><span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 (hunion h hj) hempty hf</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk120" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J) emp</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk120"><hr></label><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk121" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk121">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J) emp</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk122" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk122"><span class="nb">eelim</span> safe_not_erroneous.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J) emp</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S <span class="nl">?n</span>) <span class="nl">?c</span> <span class="nl">?h1</span> <span class="nl">?Q</span> <span class="nl">?J</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk123" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J) emp</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk123"><hr></label><div class="goal-conclusion">hdisj3 <span class="nl">?h1</span> <span class="nl">?hj</span> <span class="nl">?hf</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk124" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J) emp</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk124"><hr></label><div class="goal-conclusion"><span class="nl">?J</span> <span class="nl">?hj</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk125" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J) emp</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk125"><hr></label><div class="goal-conclusion">erroneous (<span class="nl">?c</span>, hunion <span class="nl">?h1</span> (hunion <span class="nl">?hj</span> <span class="nl">?hf</span>))</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk126" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk126"><span class="bp">eexact</span> D.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J) emp</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 h1&#39; <span class="nl">?hj</span> <span class="nl">?hf</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk127" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J) emp</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk127"><hr></label><div class="goal-conclusion">emp <span class="nl">?hj</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk128" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J) emp</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk128"><hr></label><div class="goal-conclusion">erroneous (c&#39;, hunion h1&#39; (hunion <span class="nl">?hj</span> <span class="nl">?hf</span>))</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk129" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk129"><span class="bp">eexact</span> A.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J) emp</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp hj&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk12a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J) emp</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk12a"><hr></label><div class="goal-conclusion">erroneous (c&#39;, hunion h1&#39; (hunion hj&#39; hf))</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk12b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk12b"><span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (c&#39;, h&#39;)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>erroneous (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J) emp</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">erroneous (c&#39;, hunion h1&#39; (hunion hj&#39; hf))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">subst</span> h&#39;; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk12c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk12c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (ATOMIC c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk12d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk12d"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (ATOMIC c, h0) (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk12e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk12e">inv H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>star <span class="nb">red</span> (c, hunion h (hunion hj hf))
  (PURE v, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n (PURE v) h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk12f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk12f"><span class="nb">apply</span> star_starN <span class="kr">in</span> H4.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="kr">exists</span> <span class="nv">n</span> : nat,
  starN <span class="nb">red</span> n (c, hunion h (hunion hj hf))
    (PURE v, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n (PURE v) h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk130" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk130"><span class="nb">destruct</span> H4 <span class="kr">as</span> (N &amp; STEPS).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N (c, hunion h (hunion hj hf))
  (PURE v, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n (PURE v) h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk131" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk131"><span class="nb">rewrite</span> &lt;- hunion_assoc <span class="kr">in</span> STEPS.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N (c, hunion (hunion h hj) hf)
  (PURE v, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n (PURE v) h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk132" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk132"><span class="nb">rewrite</span> &lt;- (hunion_empty hf) <span class="kr">in</span> STEPS.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n (PURE v) h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk133" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk133"><span class="nb">edestruct</span> safe_redN <span class="kr">as</span> (h1&#39; &amp; hj&#39; &amp; A &amp; B &amp; C &amp; D).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">starN <span class="nb">red</span> <span class="nl">?n</span> (<span class="nl">?c</span>, hunion <span class="nl">?h1</span> (hunion <span class="nl">?hj</span> <span class="nl">?hf</span>))
  (<span class="nl">?c&#39;</span>, <span class="nl">?h&#39;</span>)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk134" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk134"><hr></label><div class="goal-conclusion">safe (S <span class="nl">?n</span>) <span class="nl">?c</span> <span class="nl">?h1</span> <span class="nl">?Q</span> <span class="nl">?J</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk135" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk135"><hr></label><div class="goal-conclusion"><span class="nl">?J</span> <span class="nl">?hj</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk136" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk136"><hr></label><div class="goal-conclusion">hdisj3 <span class="nl">?h1</span> <span class="nl">?hj</span> <span class="nl">?hf</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk137" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; <span class="nl">?hf</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="nl">?h&#39;</span> = hunion h1&#39; (hunion hj&#39; <span class="nl">?hf</span>)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="nl">?J</span> hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> <span class="nl">?c&#39;</span> h1&#39; <span class="nl">?Q</span> <span class="nl">?J</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk137"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n (PURE v) h1&#39; Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk138" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk138"><span class="bp">eexact</span> STEPS.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S N) c (hunion h hj) <span class="nl">?Q</span> <span class="nl">?J</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk139" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk139"><hr></label><div class="goal-conclusion"><span class="nl">?J</span> hempty</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk13a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk13a"><hr></label><div class="goal-conclusion">hdisj3 (hunion h hj) hempty hf</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk13b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="nl">?J</span> hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> (PURE v) h1&#39; <span class="nl">?Q</span> <span class="nl">?J</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk13b"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n (PURE v) h1&#39; Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk13c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk13c"><span class="nb">apply</span> TR.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(P ** J) (hunion h hj)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk13d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk13d"><hr></label><div class="goal-conclusion">emp hempty</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk13e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk13e"><hr></label><div class="goal-conclusion">hdisj3 (hunion h hj) hempty hf</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk13f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> (PURE v) h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J) emp</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk13f"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n (PURE v) h1&#39; Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk140" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk140"><span class="kr">exists</span> <span class="nv">h</span>, hj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P h /\
J hj /\ hdisjoint h hj /\ hunion h hj = hunion h hj</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk141" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk141"><hr></label><div class="goal-conclusion">emp hempty</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk142" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk142"><hr></label><div class="goal-conclusion">hdisj3 (hunion h hj) hempty hf</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk143" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> (PURE v) h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J) emp</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk143"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n (PURE v) h1&#39; Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk144" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk144"><span class="nb">intuition</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisjoint h hj</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk145" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk145"><hr></label><div class="goal-conclusion">emp hempty</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk146" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk146"><hr></label><div class="goal-conclusion">hdisj3 (hunion h hj) hempty hf</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk147" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> (PURE v) h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J) emp</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk147"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n (PURE v) h1&#39; Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk148" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk148">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp hempty</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk149" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk149"><hr></label><div class="goal-conclusion">hdisj3 (hunion h hj) hempty hf</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk14a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> (PURE v) h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J) emp</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk14a"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n (PURE v) h1&#39; Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk14b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk14b"><span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 (hunion h hj) hempty hf</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk14c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> (PURE v) h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J) emp</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk14c"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n (PURE v) h1&#39; Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk14d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk14d">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> (PURE v) h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J) emp</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n (PURE v) h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk14e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk14e"><span class="nb">subst</span> h&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, hunion h1&#39; (hunion hj&#39; hf))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">1</span> (PURE v) h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J) emp</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;0</span> <span class="nv">hj&#39;0</span> : heap,
  hdisj3 h1&#39;0 hj&#39;0 hf /\
  hunion h1&#39; (hunion hj&#39; hf) =
  hunion h1&#39;0 (hunion hj&#39;0 hf) /\
  J hj&#39;0 /\ safe n (PURE v) h1&#39;0 Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk14f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk14f"><span class="nb">apply</span> safe_pure_inv <span class="kr">in</span> D.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, hunion h1&#39; (hunion hj&#39; hf))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>(Q v ** J) h1&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;0</span> <span class="nv">hj&#39;0</span> : heap,
  hdisj3 h1&#39;0 hj&#39;0 hf /\
  hunion h1&#39; (hunion hj&#39; hf) =
  hunion h1&#39;0 (hunion hj&#39;0 hf) /\
  J hj&#39;0 /\ safe n (PURE v) h1&#39;0 Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk150" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk150"><span class="nb">destruct</span> D <span class="kr">as</span> (h1&#39;&#39; &amp; hj&#39;&#39; &amp; U &amp; V &amp; X &amp; Y).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v, hunion h1&#39; (hunion hj&#39; hf))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>Q v h1&#39;&#39;</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>hdisjoint h1&#39;&#39; hj&#39;&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>h1&#39; = hunion h1&#39;&#39; hj&#39;&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;0</span> <span class="nv">hj&#39;0</span> : heap,
  hdisj3 h1&#39;0 hj&#39;0 hf /\
  hunion h1&#39; (hunion hj&#39; hf) =
  hunion h1&#39;0 (hunion hj&#39;0 hf) /\
  J hj&#39;0 /\ safe n (PURE v) h1&#39;0 Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk151" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk151"><span class="nb">subst</span> h1&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hj', h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1&#39;&#39; hj&#39;&#39;) hj&#39; hf</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v,
   hunion (hunion h1&#39;&#39; hj&#39;&#39;) (hunion hj&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>Q v h1&#39;&#39;</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>hdisjoint h1&#39;&#39; hj&#39;&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;0</span> : heap,
  hdisj3 h1&#39; hj&#39;0 hf /\
  hunion (hunion h1&#39;&#39; hj&#39;&#39;) (hunion hj&#39; hf) =
  hunion h1&#39; (hunion hj&#39;0 hf) /\
  J hj&#39;0 /\ safe n (PURE v) h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk152" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk152"><span class="kr">exists</span> <span class="nv">h1&#39;&#39;</span>, hj&#39;&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hj', h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1&#39;&#39; hj&#39;&#39;) hj&#39; hf</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v,
   hunion (hunion h1&#39;&#39; hj&#39;&#39;) (hunion hj&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>Q v h1&#39;&#39;</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>hdisjoint h1&#39;&#39; hj&#39;&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 h1&#39;&#39; hj&#39;&#39; hf /\
hunion (hunion h1&#39;&#39; hj&#39;&#39;) (hunion hj&#39; hf) =
hunion h1&#39;&#39; (hunion hj&#39;&#39; hf) /\
J hj&#39;&#39; /\ safe n (PURE v) h1&#39;&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk153" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk153"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hj', h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1&#39;&#39; hj&#39;&#39;) hj&#39; hf</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v,
   hunion (hunion h1&#39;&#39; hj&#39;&#39;) (hunion hj&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>Q v h1&#39;&#39;</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>hdisjoint h1&#39;&#39; hj&#39;&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 h1&#39;&#39; hj&#39;&#39; hf</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk154" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hj', h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1&#39;&#39; hj&#39;&#39;) hj&#39; hf</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v,
   hunion (hunion h1&#39;&#39; hj&#39;&#39;) (hunion hj&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>Q v h1&#39;&#39;</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>hdisjoint h1&#39;&#39; hj&#39;&#39;</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk154"><hr></label><div class="goal-conclusion">hunion (hunion h1&#39;&#39; hj&#39;&#39;) (hunion hj&#39; hf) =
hunion h1&#39;&#39; (hunion hj&#39;&#39; hf) /\
J hj&#39;&#39; /\ safe n (PURE v) h1&#39;&#39; Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk155" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk155">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hj', h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1&#39;&#39; hj&#39;&#39;) hj&#39; hf</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v,
   hunion (hunion h1&#39;&#39; hj&#39;&#39;) (hunion hj&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>Q v h1&#39;&#39;</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>hdisjoint h1&#39;&#39; hj&#39;&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion (hunion h1&#39;&#39; hj&#39;&#39;) (hunion hj&#39; hf) =
hunion h1&#39;&#39; (hunion hj&#39;&#39; hf) /\
J hj&#39;&#39; /\ safe n (PURE v) h1&#39;&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk156" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk156"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hj', h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1&#39;&#39; hj&#39;&#39;) hj&#39; hf</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v,
   hunion (hunion h1&#39;&#39; hj&#39;&#39;) (hunion hj&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>Q v h1&#39;&#39;</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>hdisjoint h1&#39;&#39; hj&#39;&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion (hunion h1&#39;&#39; hj&#39;&#39;) (hunion hj&#39; hf) =
hunion h1&#39;&#39; (hunion hj&#39;&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk157" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hj', h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1&#39;&#39; hj&#39;&#39;) hj&#39; hf</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v,
   hunion (hunion h1&#39;&#39; hj&#39;&#39;) (hunion hj&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>Q v h1&#39;&#39;</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>hdisjoint h1&#39;&#39; hj&#39;&#39;</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk157"><hr></label><div class="goal-conclusion">J hj&#39;&#39; /\ safe n (PURE v) h1&#39;&#39; Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk158" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk158"><span class="nb">rewrite</span> hunion_assoc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hj', h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1&#39;&#39; hj&#39;&#39;) hj&#39; hf</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v,
   hunion (hunion h1&#39;&#39; hj&#39;&#39;) (hunion hj&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>Q v h1&#39;&#39;</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>hdisjoint h1&#39;&#39; hj&#39;&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h1&#39;&#39; (hunion hj&#39;&#39; (hunion hj&#39; hf)) =
hunion h1&#39;&#39; (hunion hj&#39;&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk159" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hj', h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1&#39;&#39; hj&#39;&#39;) hj&#39; hf</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v,
   hunion (hunion h1&#39;&#39; hj&#39;&#39;) (hunion hj&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>Q v h1&#39;&#39;</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>hdisjoint h1&#39;&#39; hj&#39;&#39;</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk159"><hr></label><div class="goal-conclusion">J hj&#39;&#39; /\ safe n (PURE v) h1&#39;&#39; Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk15a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk15a"><span class="nb">rewrite</span> C.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hj', h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1&#39;&#39; hj&#39;&#39;) hj&#39; hf</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v,
   hunion (hunion h1&#39;&#39; hj&#39;&#39;) (hunion hj&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>Q v h1&#39;&#39;</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>hdisjoint h1&#39;&#39; hj&#39;&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h1&#39;&#39; (hunion hj&#39;&#39; (hunion hempty hf)) =
hunion h1&#39;&#39; (hunion hj&#39;&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk15b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hj', h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1&#39;&#39; hj&#39;&#39;) hj&#39; hf</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v,
   hunion (hunion h1&#39;&#39; hj&#39;&#39;) (hunion hj&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>Q v h1&#39;&#39;</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>hdisjoint h1&#39;&#39; hj&#39;&#39;</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk15b"><hr></label><div class="goal-conclusion">J hj&#39;&#39; /\ safe n (PURE v) h1&#39;&#39; Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk15c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk15c"><span class="nb">rewrite</span> hunion_empty.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hj', h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1&#39;&#39; hj&#39;&#39;) hj&#39; hf</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v,
   hunion (hunion h1&#39;&#39; hj&#39;&#39;) (hunion hj&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>Q v h1&#39;&#39;</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>hdisjoint h1&#39;&#39; hj&#39;&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h1&#39;&#39; (hunion hj&#39;&#39; hf) =
hunion h1&#39;&#39; (hunion hj&#39;&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk15d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hj', h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1&#39;&#39; hj&#39;&#39;) hj&#39; hf</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v,
   hunion (hunion h1&#39;&#39; hj&#39;&#39;) (hunion hj&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>Q v h1&#39;&#39;</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>hdisjoint h1&#39;&#39; hj&#39;&#39;</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk15d"><hr></label><div class="goal-conclusion">J hj&#39;&#39; /\ safe n (PURE v) h1&#39;&#39; Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk15e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk15e"><span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hj', h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1&#39;&#39; hj&#39;&#39;) hj&#39; hf</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v,
   hunion (hunion h1&#39;&#39; hj&#39;&#39;) (hunion hj&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>Q v h1&#39;&#39;</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>hdisjoint h1&#39;&#39; hj&#39;&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">J hj&#39;&#39; /\ safe n (PURE v) h1&#39;&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk15f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk15f"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hj', h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1&#39;&#39; hj&#39;&#39;) hj&#39; hf</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v,
   hunion (hunion h1&#39;&#39; hj&#39;&#39;) (hunion hj&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>Q v h1&#39;&#39;</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>hdisjoint h1&#39;&#39; hj&#39;&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">J hj&#39;&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk160" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hj', h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1&#39;&#39; hj&#39;&#39;) hj&#39; hf</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v,
   hunion (hunion h1&#39;&#39; hj&#39;&#39;) (hunion hj&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>Q v h1&#39;&#39;</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>hdisjoint h1&#39;&#39; hj&#39;&#39;</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk160"><hr></label><div class="goal-conclusion">safe n (PURE v) h1&#39;&#39; Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk161" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk161"><span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hj', h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1&#39;&#39; hj&#39;&#39;) hj&#39; hf</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v,
   hunion (hunion h1&#39;&#39; hj&#39;&#39;) (hunion hj&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>Q v h1&#39;&#39;</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>hdisjoint h1&#39;&#39; hj&#39;&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (PURE v) h1&#39;&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk162" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk162"><span class="nb">apply</span> safe_pure.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** J ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>N</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hj', h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1&#39;&#39; hj&#39;&#39;) hj&#39; hf</span></span></span><br><span><var>STEPS</var><span class="hyp-type"><b>: </b><span>starN <span class="nb">red</span> N
  (c, hunion (hunion h hj) (hunion hempty hf))
  (PURE v,
   hunion (hunion h1&#39;&#39; hj&#39;&#39;) (hunion hj&#39; hf))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>emp hj&#39;</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>Q v h1&#39;&#39;</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>hdisjoint h1&#39;&#39; hj&#39;&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q v h1&#39;&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab9"></a><h3 class="section">Sharing some state in the invariant</h3>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk163" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk163"><span class="kn">Lemma</span> <span class="nf">safe_share</span>:
  <span class="kr">forall</span> <span class="nv">Q</span> (<span class="nv">J</span> <span class="nv">J&#39;</span>: invariant) <span class="nv">n</span> <span class="nv">c</span> <span class="nv">h</span> <span class="nv">h&#39;</span>,
  safe n c h Q (J ** J&#39;) -&gt; 
  hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt;
  safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> =&gt; Q v ** J&#39;) J.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> <span class="nv">J&#39;</span> : invariant) (<span class="nv">n</span> : nat)
  (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk164" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk164"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> <span class="nv">J&#39;</span> : invariant) (<span class="nv">n</span> : nat)
  (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk165" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk165"><span class="nb">induction</span> n; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">0</span> c h Q (J ** J&#39;)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe <span class="mi">0</span> c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk166" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q (J ** J&#39;)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk166"><hr></label><div class="goal-conclusion">safe (S n) c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk167" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk167">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">0</span> c h Q (J ** J&#39;)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe <span class="mi">0</span> c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk168" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk168">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q (J ** J&#39;)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n) c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk169" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk169">inv H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Q v h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n) (PURE v) (hunion h h&#39;)
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk16a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk16a"><hr></label><div class="goal-conclusion">safe (S n) c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk16b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk16b">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Q v h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n) (PURE v) (hunion h h&#39;)
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk16c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk16c"><span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Q v h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(Q v ** J&#39;) (hunion h h&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kr">exists</span> <span class="nv">h</span>, h&#39;; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk16d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk16d">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n) c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk16e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk16e"><span class="nb">constructor</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; hunion h h&#39; l &lt;&gt; None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk16f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk16f"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 (hunion h h&#39;) hj hf -&gt;
h0 = hunion (hunion h h&#39;) (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk170" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk170"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;0</span> : heap),
hdisj3 (hunion h h&#39;) hj hf -&gt;
h0 = hunion (hunion h h&#39;) (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;0) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk171" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk171">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; hunion h h&#39; l &lt;&gt; None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk172" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk172"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>immacc l c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h h&#39; l &lt;&gt; None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk173" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk173"><span class="nb">apply</span> ACC <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>h l &lt;&gt; None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h h&#39; l &lt;&gt; None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk174" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk174"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>h l &lt;&gt; None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> h l <span class="kr">then</span> h l <span class="kr">else</span> h&#39; l) &lt;&gt; None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> (h l); <span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk175" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk175">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 (hunion h h&#39;) hj hf -&gt;
h0 = hunion (hunion h h&#39;) (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk176" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk176"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">~ erroneous (c, h0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk177" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk177"><span class="nb">apply</span> (IMM hf (hunion h&#39; hj)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 h (hunion h&#39; hj) hf</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk178" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk178"><hr></label><div class="goal-conclusion">h0 = hunion h (hunion (hunion h&#39; hj) hf)</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk179" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk179"><hr></label><div class="goal-conclusion">(J ** J&#39;) (hunion h&#39; hj)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk17a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk17a">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">h0 = hunion h (hunion (hunion h&#39; hj) hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk17b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk17b"><hr></label><div class="goal-conclusion">(J ** J&#39;) (hunion h&#39; hj)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk17c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk17c"><span class="nb">subst</span> h0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion (hunion h h&#39;) (hunion hj hf) =
hunion h (hunion (hunion h&#39; hj) hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk17d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk17d"><hr></label><div class="goal-conclusion">(J ** J&#39;) (hunion h&#39; hj)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk17e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk17e"><span class="nb">rewrite</span> ! hunion_assoc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h (hunion h&#39; (hunion hj hf)) =
hunion h (hunion h&#39; (hunion hj hf))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk17f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk17f"><hr></label><div class="goal-conclusion">(J ** J&#39;) (hunion h&#39; hj)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk180" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk180"><span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(J ** J&#39;) (hunion h&#39; hj)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk181" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk181"><span class="nb">rewrite</span> hunion_comm <span class="bp">by</span> HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(J ** J&#39;) (hunion hj h&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk182" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk182"><span class="kr">exists</span> <span class="nv">hj</span>, h&#39;; <span class="nb">intuition</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
immacc l c -&gt; h l = None -&gt; <span class="kt">False</span></span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; erroneous (c, h0) -&gt; <span class="kt">False</span></span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisjoint hj h&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">HDISJ.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk183" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk183">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;0</span> : heap),
hdisj3 (hunion h h&#39;) hj hf -&gt;
h0 = hunion (hunion h h&#39;) (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;0) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk184" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk184"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk185" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk185"><span class="nb">edestruct</span> (STEP hf (hunion h&#39; hj)) <span class="kr">as</span> (h1&#39; &amp; hj&#39; &amp; U &amp; V &amp; X &amp; Y).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 h (hunion h&#39; hj) hf</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk186" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;0)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk186"><hr></label><div class="goal-conclusion"><span class="nl">?h</span> = hunion h (hunion (hunion h&#39; hj) hf)</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk187" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;0)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk187"><hr></label><div class="goal-conclusion">(J ** J&#39;) (hunion h&#39; hj)</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk188" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;0)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk188"><hr></label><div class="goal-conclusion"><span class="nb">red</span> (c, <span class="nl">?h</span>) (<span class="nl">?c&#39;</span>, <span class="nl">?h&#39;</span>)</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk189" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;0)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span><span class="nl">?h&#39;</span> = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>(J ** J&#39;) hj&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n <span class="nl">?c&#39;</span> h1&#39; Q (J ** J&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk189"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk18a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk18a"><span class="mi">4</span>: <span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 h (hunion h&#39; hj) hf</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk18b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;0)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk18b"><hr></label><div class="goal-conclusion">h0 = hunion h (hunion (hunion h&#39; hj) hf)</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk18c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;0)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk18c"><hr></label><div class="goal-conclusion">(J ** J&#39;) (hunion h&#39; hj)</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk18d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;0)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>h&#39;0 = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>(J ** J&#39;) hj&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk18d"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk18e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk18e">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">h0 = hunion h (hunion (hunion h&#39; hj) hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk18f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;0)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk18f"><hr></label><div class="goal-conclusion">(J ** J&#39;) (hunion h&#39; hj)</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk190" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;0)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>h&#39;0 = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>(J ** J&#39;) hj&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk190"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk191" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk191"><span class="nb">subst</span> h0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion (hunion h h&#39;) (hunion hj hf) =
hunion h (hunion (hunion h&#39; hj) hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk192" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;0)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk192"><hr></label><div class="goal-conclusion">(J ** J&#39;) (hunion h&#39; hj)</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk193" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;0)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>h&#39;0 = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>(J ** J&#39;) hj&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk193"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk194" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk194"><span class="nb">rewrite</span> ! hunion_assoc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, h&#39;0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h (hunion h&#39; (hunion hj hf)) =
hunion h (hunion h&#39; (hunion hj hf))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk195" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;0)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk195"><hr></label><div class="goal-conclusion">(J ** J&#39;) (hunion h&#39; hj)</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk196" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;0)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>h&#39;0 = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>(J ** J&#39;) hj&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk196"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk197" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk197"><span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(J ** J&#39;) (hunion h&#39; hj)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk198" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;0)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>h&#39;0 = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>(J ** J&#39;) hj&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk198"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk199" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk199"><span class="nb">rewrite</span> hunion_comm <span class="bp">by</span> HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(J ** J&#39;) (hunion hj h&#39;)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk19a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;0)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>h&#39;0 = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>(J ** J&#39;) hj&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk19a"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk19b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk19b"><span class="kr">exists</span> <span class="nv">hj</span>, h&#39;; <span class="nb">intuition</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
immacc l c -&gt; h l = None -&gt; <span class="kt">False</span></span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; erroneous (c, h0) -&gt; <span class="kt">False</span></span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisjoint hj h&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk19c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;0)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>h&#39;0 = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>(J ** J&#39;) hj&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk19c"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk19d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk19d">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;0)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>h&#39;0 = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>(J ** J&#39;) hj&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk19e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk19e"><span class="nb">destruct</span> X <span class="kr">as</span> (hj1&#39; &amp; hj2&#39; &amp; A &amp; B &amp; C &amp; D).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion (hunion h h&#39;) (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;0)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>h&#39;0 = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>hj1', hj2'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2&#39;</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1&#39; hj2&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>hj&#39; = hunion hj1&#39; hj2&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39;0 = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk19f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk19f"><span class="nb">subst</span> hj&#39; h&#39;0 h0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj1', hj2'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion (hunion hj1&#39; hj2&#39;) hf))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; (hunion hj1&#39; hj2&#39;) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2&#39;</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1&#39; hj2&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;0</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39;0 hj&#39; hf /\
  hunion h1&#39; (hunion (hunion hj1&#39; hj2&#39;) hf) =
  hunion h1&#39;0 (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39;0 (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1a0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1a0"><span class="kr">exists</span> (<span class="nv">hunion</span> <span class="nv">h1&#39;</span> <span class="nv">hj2&#39;</span>), hj1&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj1', hj2'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion (hunion hj1&#39; hj2&#39;) hf))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; (hunion hj1&#39; hj2&#39;) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2&#39;</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1&#39; hj2&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 (hunion h1&#39; hj2&#39;) hj1&#39; hf /\
hunion h1&#39; (hunion (hunion hj1&#39; hj2&#39;) hf) =
hunion (hunion h1&#39; hj2&#39;) (hunion hj1&#39; hf) /\
J hj1&#39; /\
safe n c&#39; (hunion h1&#39; hj2&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1a1" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1a1"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj1', hj2'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion (hunion hj1&#39; hj2&#39;) hf))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; (hunion hj1&#39; hj2&#39;) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2&#39;</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1&#39; hj2&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 (hunion h1&#39; hj2&#39;) hj1&#39; hf</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk1a2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj1', hj2'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion (hunion hj1&#39; hj2&#39;) hf))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; (hunion hj1&#39; hj2&#39;) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2&#39;</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1&#39; hj2&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk1a2"><hr></label><div class="goal-conclusion">hunion h1&#39; (hunion (hunion hj1&#39; hj2&#39;) hf) =
hunion (hunion h1&#39; hj2&#39;) (hunion hj1&#39; hf) /\
J hj1&#39; /\
safe n c&#39; (hunion h1&#39; hj2&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1a3" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1a3">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj1', hj2'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion (hunion hj1&#39; hj2&#39;) hf))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; (hunion hj1&#39; hj2&#39;) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2&#39;</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1&#39; hj2&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h1&#39; (hunion (hunion hj1&#39; hj2&#39;) hf) =
hunion (hunion h1&#39; hj2&#39;) (hunion hj1&#39; hf) /\
J hj1&#39; /\
safe n c&#39; (hunion h1&#39; hj2&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1a4" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1a4"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj1', hj2'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion (hunion hj1&#39; hj2&#39;) hf))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; (hunion hj1&#39; hj2&#39;) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2&#39;</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1&#39; hj2&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h1&#39; (hunion (hunion hj1&#39; hj2&#39;) hf) =
hunion (hunion h1&#39; hj2&#39;) (hunion hj1&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk1a5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj1', hj2'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion (hunion hj1&#39; hj2&#39;) hf))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; (hunion hj1&#39; hj2&#39;) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2&#39;</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1&#39; hj2&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk1a5"><hr></label><div class="goal-conclusion">J hj1&#39; /\
safe n c&#39; (hunion h1&#39; hj2&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1a6" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1a6"><span class="nb">rewrite</span> (hunion_comm hj2&#39;) <span class="bp">by</span> HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj1', hj2'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion (hunion hj1&#39; hj2&#39;) hf))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; (hunion hj1&#39; hj2&#39;) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2&#39;</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1&#39; hj2&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h1&#39; (hunion (hunion hj2&#39; hj1&#39;) hf) =
hunion (hunion h1&#39; hj2&#39;) (hunion hj1&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk1a7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj1', hj2'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion (hunion hj1&#39; hj2&#39;) hf))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; (hunion hj1&#39; hj2&#39;) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2&#39;</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1&#39; hj2&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk1a7"><hr></label><div class="goal-conclusion">J hj1&#39; /\
safe n c&#39; (hunion h1&#39; hj2&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1a8" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1a8"><span class="nb">rewrite</span> ! hunion_assoc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj1', hj2'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion (hunion hj1&#39; hj2&#39;) hf))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; (hunion hj1&#39; hj2&#39;) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2&#39;</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1&#39; hj2&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h1&#39; (hunion hj2&#39; (hunion hj1&#39; hf)) =
hunion h1&#39; (hunion hj2&#39; (hunion hj1&#39; hf))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk1a9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj1', hj2'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion (hunion hj1&#39; hj2&#39;) hf))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; (hunion hj1&#39; hj2&#39;) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2&#39;</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1&#39; hj2&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk1a9"><hr></label><div class="goal-conclusion">J hj1&#39; /\
safe n c&#39; (hunion h1&#39; hj2&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1aa" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1aa"><span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj1', hj2'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion (hunion hj1&#39; hj2&#39;) hf))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; (hunion hj1&#39; hj2&#39;) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2&#39;</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1&#39; hj2&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">J hj1&#39; /\
safe n c&#39; (hunion h1&#39; hj2&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1ab" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1ab"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj1', hj2'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion (hunion hj1&#39; hj2&#39;) hf))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; (hunion hj1&#39; hj2&#39;) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2&#39;</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1&#39; hj2&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">J hj1&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk1ac" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt;
J&#39; h&#39; -&gt;
safe n c (hunion h h&#39;) 
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj1', hj2'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion (hunion hj1&#39; hj2&#39;) hf))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; (hunion hj1&#39; hj2&#39;) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2&#39;</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1&#39; hj2&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk1ac"><hr></label><div class="goal-conclusion">safe n c&#39; (hunion h1&#39; hj2&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1ad" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1ad"><span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj1', hj2'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion (hunion hj1&#39; hj2&#39;) hf))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; (hunion hj1&#39; hj2&#39;) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2&#39;</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1&#39; hj2&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c&#39; (hunion h1&#39; hj2&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1ae" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1ae"><span class="nb">apply</span> IHn; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> <span class="nv">h&#39;</span> : heap),
safe n c h Q (J ** J&#39;) -&gt;
hdisjoint h h&#39; -&gt; J&#39; h&#39; -&gt; safe n c (hunion h h&#39;) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint h h&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J&#39; h&#39;</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
(J ** J&#39;) hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  (J ** J&#39;) hj&#39; /\ safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h h&#39;) hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>h1', hj1', hj2'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion (hunion h h&#39;) (hunion hj hf))
  (c&#39;, hunion h1&#39; (hunion (hunion hj1&#39; hj2&#39;) hf))</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; (hunion hj1&#39; hj2&#39;) hf</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>J hj1&#39;</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>J&#39; hj2&#39;</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>hdisjoint hj1&#39; hj2&#39;</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q (J ** J&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisjoint h1&#39; hj2&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">HDISJ.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1af" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1af"><span class="kn">Lemma</span> <span class="nf">triple_share</span>: <span class="kr">forall</span> <span class="nv">J</span> <span class="nv">J&#39;</span> <span class="nv">P</span> <span class="nv">c</span> <span class="nv">Q</span>,
  J ** J&#39; ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ -&gt;
  J ‚ä¢ ‚¶É P ** J&#39; ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> =&gt; Q v ** J&#39; ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> <span class="nv">J&#39;</span> : assertion) (<span class="nv">P</span> : precond) (<span class="nv">c</span> : com)
  (<span class="nv">Q</span> : postcond),
J ** J&#39; ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ -&gt;
J ‚ä¢ ‚¶É P ** J&#39; ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39; ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1b0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1b0"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> <span class="nv">J&#39;</span> : assertion) (<span class="nv">P</span> : precond) (<span class="nv">c</span> : com)
  (<span class="nv">Q</span> : postcond),
J ** J&#39; ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ -&gt;
J ‚ä¢ ‚¶É P ** J&#39; ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39; ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"> </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1b1" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1b1"><span class="nb">intros</span>; <span class="nb">intros</span> n h (h1 &amp; h2 &amp; Ph1 &amp; J&#39;h2 &amp; D &amp; U).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ** J&#39; ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h, h1, h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph1</var><span class="hyp-type"><b>: </b><span>P h1</span></span></span><br><span><var>J'h2</var><span class="hyp-type"><b>: </b><span>J&#39; h2</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>h = hunion h1 h2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1b2" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1b2"><span class="nb">subst</span> h.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, J'</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ** J&#39; ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h1, h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph1</var><span class="hyp-type"><b>: </b><span>P h1</span></span></span><br><span><var>J'h2</var><span class="hyp-type"><b>: </b><span>J&#39; h2</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** J&#39;) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> safe_share; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab10"></a><h3 class="section">Sequential commands</h3>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1b3" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1b3"><span class="kn">Lemma</span> <span class="nf">triple_pure</span>: <span class="kr">forall</span> <span class="nv">J</span> <span class="nv">P</span> <span class="nv">Q</span> <span class="nv">v</span>,
  aimp P (Q v) -&gt;
  J ‚ä¢ ‚¶É P ‚¶Ñ PURE v ‚¶É Q ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : invariant) (<span class="nv">P</span> : assertion)
  (<span class="nv">Q</span> : Z -&gt; assertion) (<span class="nv">v</span> : Z),
P --&gt;&gt; Q v -&gt; J ‚ä¢ ‚¶É P ‚¶Ñ PURE v ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1b4" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1b4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : invariant) (<span class="nv">P</span> : assertion)
  (<span class="nv">Q</span> : Z -&gt; assertion) (<span class="nv">v</span> : Z),
P --&gt;&gt; Q v -&gt; J ‚ä¢ ‚¶É P ‚¶Ñ PURE v ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1b5" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1b5"><span class="nb">intros</span> J P Q v IMP n h Ph.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>P --&gt;&gt; Q v</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (PURE v) h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> safe_pure; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1b6" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1b6"><span class="kn">Lemma</span> <span class="nf">safe_let</span>:
  <span class="kr">forall</span> (<span class="nv">Q</span> <span class="nv">R</span>: postcond) (<span class="nv">J</span>: invariant) <span class="nv">f</span> <span class="nv">n</span> <span class="nv">c</span> <span class="nv">h</span>,
  safe n c h Q J -&gt;
  (<span class="kr">forall</span> <span class="nv">v</span> <span class="nv">n&#39;</span> <span class="nv">h&#39;</span>, Q v h&#39; -&gt; (n&#39; &lt; n)%nat -&gt; safe n&#39; (f v) h&#39; R J) -&gt;
  safe n (LET c f) h R J.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Q</span> <span class="nv">R</span> : postcond) (<span class="nv">J</span> : invariant) (<span class="nv">f</span> : Z -&gt; com)
  (<span class="nv">n</span> : nat) (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
(<span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
 Q v h&#39; -&gt; (n&#39; &lt; n)%nat -&gt; safe n&#39; (f v) h&#39; R J) -&gt;
safe n (LET c f) h R J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1b7" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1b7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Q</span> <span class="nv">R</span> : postcond) (<span class="nv">J</span> : invariant) (<span class="nv">f</span> : Z -&gt; com)
  (<span class="nv">n</span> : nat) (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
(<span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
 Q v h&#39; -&gt; (n&#39; &lt; n)%nat -&gt; safe n&#39; (f v) h&#39; R J) -&gt;
safe n (LET c f) h R J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1b8" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1b8"><span class="nb">induction</span> n; <span class="nb">intros until</span> h; <span class="nb">intros</span> S1 S2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; com</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">0</span> c h Q J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; <span class="mi">0</span>)%nat -&gt; safe n&#39; (f v) h&#39; R J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe <span class="mi">0</span> (LET c f) h R J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk1b9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; com</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
(<span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; n)%nat -&gt; safe n&#39; (f v) h&#39; R J) -&gt; safe n (LET c f) h R J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; S n)%nat -&gt; safe n&#39; (f v) h&#39; R J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk1b9"><hr></label><div class="goal-conclusion">safe (S n) (LET c f) h R J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1ba" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1ba">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; com</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">0</span> c h Q J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; <span class="mi">0</span>)%nat -&gt; safe n&#39; (f v) h&#39; R J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe <span class="mi">0</span> (LET c f) h R J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1bb" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1bb">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; com</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
(<span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; n)%nat -&gt; safe n&#39; (f v) h&#39; R J) -&gt; safe n (LET c f) h R J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; S n)%nat -&gt; safe n&#39; (f v) h&#39; R J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n) (LET c f) h R J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1bc" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1bc"><span class="nb">constructor</span>; <span class="nb">auto</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; com</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
(<span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; n)%nat -&gt; safe n&#39; (f v) h&#39; R J) -&gt; safe n (LET c f) h R J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; S n)%nat -&gt; safe n&#39; (f v) h&#39; R J</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>immacc l (LET c f)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">h l &lt;&gt; None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk1bd" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; com</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
(<span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; n)%nat -&gt; safe n&#39; (f v) h&#39; R J) -&gt; safe n (LET c f) h R J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; S n)%nat -&gt; safe n&#39; (f v) h&#39; R J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk1bd"><hr></label><div class="goal-conclusion">~ erroneous (LET c f, h0)</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk1be" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; com</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
(<span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; n)%nat -&gt; safe n&#39; (f v) h&#39; R J) -&gt; safe n (LET c f) h R J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; S n)%nat -&gt; safe n&#39; (f v) h&#39; R J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (LET c f, h0) (c&#39;, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk1be"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; R J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1bf" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1bf">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; com</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
(<span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; n)%nat -&gt; safe n&#39; (f v) h&#39; R J) -&gt; safe n (LET c f) h R J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; S n)%nat -&gt; safe n&#39; (f v) h&#39; R J</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>immacc l (LET c f)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">h l &lt;&gt; None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eapply</span> safe_immacc; <span class="nb">eauto</span>.</span><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1c0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1c0">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; com</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
(<span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; n)%nat -&gt; safe n&#39; (f v) h&#39; R J) -&gt; safe n (LET c f) h R J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; S n)%nat -&gt; safe n&#39; (f v) h&#39; R J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">~ erroneous (LET c f, h0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1c1" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1c1"><span class="nb">red</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; com</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
(<span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; n)%nat -&gt; safe n&#39; (f v) h&#39; R J) -&gt; safe n (LET c f) h R J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; S n)%nat -&gt; safe n&#39; (f v) h&#39; R J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>erroneous (LET c f, h0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1c2" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1c2">inv H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; com</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
(<span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; n)%nat -&gt; safe n&#39; (f v) h&#39; R J) -&gt; safe n (LET c f) h R J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; S n)%nat -&gt; safe n&#39; (f v) h&#39; R J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>erroneous (c, hunion h (hunion hj hf))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eelim</span> safe_not_erroneous; <span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1c3" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1c3">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; com</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
(<span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; n)%nat -&gt; safe n&#39; (f v) h&#39; R J) -&gt; safe n (LET c f) h R J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; S n)%nat -&gt; safe n&#39; (f v) h&#39; R J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (LET c f, h0) (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; R J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1c4" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1c4"><span class="nb">subst</span> h0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; com</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
(<span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; n)%nat -&gt; safe n&#39; (f v) h&#39; R J) -&gt; safe n (LET c f) h R J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; S n)%nat -&gt; safe n&#39; (f v) h&#39; R J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (LET c f, hunion h (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; R J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1c5" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1c5">inv H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; com</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
(<span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; n)%nat -&gt; safe n&#39; (f v) h&#39; R J) -&gt; safe n (LET c f) h R J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) (PURE x) h Q J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; S n)%nat -&gt; safe n&#39; (f v) h&#39; R J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  hunion h (hunion hj hf) = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n (f x) h1&#39; R J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk1c6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; com</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
(<span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; n)%nat -&gt; safe n&#39; (f v) h&#39; R J) -&gt; safe n (LET c f) h R J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; S n)%nat -&gt; safe n&#39; (f v) h&#39; R J</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'0</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion hj hf)) (c&#39;0, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk1c6"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n (LET c&#39;0 f) h1&#39; R J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1c7" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1c7">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; com</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
(<span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; n)%nat -&gt; safe n&#39; (f v) h&#39; R J) -&gt; safe n (LET c f) h R J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) (PURE x) h Q J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; S n)%nat -&gt; safe n&#39; (f v) h&#39; R J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  hunion h (hunion hj hf) = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n (f x) h1&#39; R J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1c8" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1c8"><span class="kr">exists</span> <span class="nv">h</span>, hj; <span class="nb">intuition</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; com</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
(<span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; n)%nat -&gt; safe n&#39; (f v) h&#39; R J) -&gt; safe n (LET c f) h R J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) (PURE x) h Q J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; S n)%nat -&gt; safe n&#39; (f v) h&#39; R J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (f x) h R J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1c9" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1c9"><span class="nb">apply</span> S2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; com</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
(<span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; n)%nat -&gt; safe n&#39; (f v) h&#39; R J) -&gt; safe n (LET c f) h R J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) (PURE x) h Q J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; S n)%nat -&gt; safe n&#39; (f v) h&#39; R J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q x h</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk1ca" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; com</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
(<span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; n)%nat -&gt; safe n&#39; (f v) h&#39; R J) -&gt; safe n (LET c f) h R J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) (PURE x) h Q J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; S n)%nat -&gt; safe n&#39; (f v) h&#39; R J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk1ca"><hr></label><div class="goal-conclusion">(n &lt; S n)%nat</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1cb" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1cb"><span class="nb">eapply</span> safe_pure_inv; <span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; com</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
(<span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; n)%nat -&gt; safe n&#39; (f v) h&#39; R J) -&gt; safe n (LET c f) h R J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) (PURE x) h Q J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; S n)%nat -&gt; safe n&#39; (f v) h&#39; R J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(n &lt; S n)%nat</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1cc" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1cc">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; com</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
(<span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; n)%nat -&gt; safe n&#39; (f v) h&#39; R J) -&gt; safe n (LET c f) h R J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; S n)%nat -&gt; safe n&#39; (f v) h&#39; R J</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'0</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion hj hf)) (c&#39;0, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n (LET c&#39;0 f) h1&#39; R J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1cd" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1cd"><span class="nb">edestruct</span> safe_red <span class="kr">as</span> (h1&#39; &amp; hj&#39; &amp; A &amp; B &amp; C &amp; D); <span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; com</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
(<span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; n)%nat -&gt; safe n&#39; (f v) h&#39; R J) -&gt; safe n (LET c f) h R J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; S n)%nat -&gt; safe n&#39; (f v) h&#39; R J</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c'0</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, hunion h (hunion hj hf)) (c&#39;0, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39;0 h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n (LET c&#39;0 f) h1&#39; R J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kr">exists</span> <span class="nv">h1&#39;</span>, hj&#39;; <span class="nb">intuition</span> <span class="nb">auto</span>.</span><span class="alectryon-wsp"> 
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1ce" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1ce"><span class="kn">Lemma</span> <span class="nf">triple_let</span>:
  <span class="kr">forall</span> <span class="nv">c</span> <span class="nv">f</span> (<span class="nv">J</span>: invariant) (<span class="nv">P</span>: precond) (<span class="nv">Q</span> <span class="nv">R</span>: postcond),
  J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ -&gt;
  (<span class="kr">forall</span> <span class="nv">v</span>, J ‚ä¢ ‚¶É Q v ‚¶Ñ f v ‚¶É R ‚¶Ñ) -&gt;
  J ‚ä¢ ‚¶É P ‚¶Ñ LET c f ‚¶É R ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">f</span> : Z -&gt; com) (<span class="nv">J</span> : invariant)
  (<span class="nv">P</span> : precond) (<span class="nv">Q</span> <span class="nv">R</span> : postcond),
J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ -&gt;
(<span class="kr">forall</span> <span class="nv">v</span> : Z, J ‚ä¢ ‚¶É Q v ‚¶Ñ f v ‚¶É R ‚¶Ñ) -&gt;
J ‚ä¢ ‚¶É P ‚¶Ñ LET c f ‚¶É R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1cf" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1cf"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">f</span> : Z -&gt; com) (<span class="nv">J</span> : invariant)
  (<span class="nv">P</span> : precond) (<span class="nv">Q</span> <span class="nv">R</span> : postcond),
J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ -&gt;
(<span class="kr">forall</span> <span class="nv">v</span> : Z, J ‚ä¢ ‚¶É Q v ‚¶Ñ f v ‚¶É R ‚¶Ñ) -&gt;
J ‚ä¢ ‚¶É P ‚¶Ñ LET c f ‚¶É R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1d0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1d0"><span class="nb">intros</span>; <span class="nb">red</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; com</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>Q, R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, J ‚ä¢ ‚¶É Q v ‚¶Ñ f v ‚¶É R ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (LET c f) h R J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1d1" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1d1"><span class="nb">apply</span> safe_let <span class="kr">with</span> Q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; com</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>Q, R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, J ‚ä¢ ‚¶É Q v ‚¶Ñ f v ‚¶É R ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c h Q J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk1d2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; com</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>Q, R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, J ‚ä¢ ‚¶É Q v ‚¶Ñ f v ‚¶É R ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk1d2"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; n)%nat -&gt; safe n&#39; (f v) h&#39; R J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1d3" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1d3"><span class="nb">apply</span> H; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Z -&gt; com</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>Q, R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, J ‚ä¢ ‚¶É Q v ‚¶Ñ f v ‚¶É R ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt; (n&#39; &lt; n)%nat -&gt; safe n&#39; (f v) h&#39; R J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span>; <span class="nb">apply</span> H0; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1d4" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1d4"><span class="kn">Corollary</span> <span class="nf">triple_seq</span>:
  <span class="kr">forall</span> <span class="nv">c1</span> <span class="nv">c2</span> (<span class="nv">J</span>: invariant) (<span class="nv">P</span> <span class="nv">Q</span>: precond) (<span class="nv">R</span>: postcond),
  J ‚ä¢ ‚¶É P ‚¶Ñ c1 ‚¶É <span class="kr">fun</span> <span class="nv">_</span> =&gt; Q ‚¶Ñ -&gt;
  J ‚ä¢ ‚¶É Q ‚¶Ñ c2 ‚¶É R ‚¶Ñ -&gt;
  J ‚ä¢ ‚¶É P ‚¶Ñ SEQ c1 c2 ‚¶É R ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">c1</span> <span class="nv">c2</span> : com) (<span class="nv">J</span> : invariant) (<span class="nv">P</span> <span class="nv">Q</span> : precond)
  (<span class="nv">R</span> : postcond),
J ‚ä¢ ‚¶É P ‚¶Ñ c1 ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ‚¶Ñ -&gt;
J ‚ä¢ ‚¶É Q ‚¶Ñ c2 ‚¶É R ‚¶Ñ -&gt; J ‚ä¢ ‚¶É P ‚¶Ñ SEQ c1 c2 ‚¶É R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1d5" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1d5"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">c1</span> <span class="nv">c2</span> : com) (<span class="nv">J</span> : invariant) (<span class="nv">P</span> <span class="nv">Q</span> : precond)
  (<span class="nv">R</span> : postcond),
J ‚ä¢ ‚¶É P ‚¶Ñ c1 ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ‚¶Ñ -&gt;
J ‚ä¢ ‚¶É Q ‚¶Ñ c2 ‚¶É R ‚¶Ñ -&gt; J ‚ä¢ ‚¶É P ‚¶Ñ SEQ c1 c2 ‚¶É R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1d6" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1d6"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>c1, c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c1 ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ‚¶Ñ</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É Q ‚¶Ñ c2 ‚¶É R ‚¶Ñ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">J ‚ä¢ ‚¶É P ‚¶Ñ SEQ c1 c2 ‚¶É R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> triple_let <span class="kr">with</span> (<span class="kr">fun</span> <span class="nv">_</span> =&gt; Q); <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab11"></a><h3 class="section">Conditionals and loops</h3>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1d7" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1d7"><span class="kn">Lemma</span> <span class="nf">safe_ifthenelse</span>:
  <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">b</span> <span class="nv">c1</span> <span class="nv">c2</span> <span class="nv">h</span> <span class="nv">Q</span> <span class="nv">J</span>,
  (b &lt;&gt; <span class="mi">0</span> -&gt; safe n c1 h Q J) -&gt;
  (b = <span class="mi">0</span>  -&gt; safe n c2 h Q J) -&gt;
  safe (S n) (IFTHENELSE b c1 c2) h Q J.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">b</span> : Z) (<span class="nv">c1</span> <span class="nv">c2</span> : com) (<span class="nv">h</span> : heap)
  (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant),
(b &lt;&gt; <span class="mi">0</span> -&gt; safe n c1 h Q J) -&gt;
(b = <span class="mi">0</span> -&gt; safe n c2 h Q J) -&gt;
safe (S n) (IFTHENELSE b c1 c2) h Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1d8" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1d8"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">b</span> : Z) (<span class="nv">c1</span> <span class="nv">c2</span> : com) (<span class="nv">h</span> : heap)
  (<span class="nv">Q</span> : postcond) (<span class="nv">J</span> : invariant),
(b &lt;&gt; <span class="mi">0</span> -&gt; safe n c1 h Q J) -&gt;
(b = <span class="mi">0</span> -&gt; safe n c2 h Q J) -&gt;
safe (S n) (IFTHENELSE b c1 c2) h Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1d9" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1d9"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>c1, c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>b &lt;&gt; <span class="mi">0</span> -&gt; safe n c1 h Q J</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>b = <span class="mi">0</span> -&gt; safe n c2 h Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n) (IFTHENELSE b c1 c2) h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1da" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1da"><span class="nb">constructor</span>; <span class="nb">auto</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>c1, c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>b &lt;&gt; <span class="mi">0</span> -&gt; safe n c1 h Q J</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>b = <span class="mi">0</span> -&gt; safe n c2 h Q J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">~ erroneous (IFTHENELSE b c1 c2, h0)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk1db" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>c1, c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>b &lt;&gt; <span class="mi">0</span> -&gt; safe n c1 h Q J</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>b = <span class="mi">0</span> -&gt; safe n c2 h Q J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (IFTHENELSE b c1 c2, h0) (c&#39;, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk1db"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1dc" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1dc">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>c1, c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>b &lt;&gt; <span class="mi">0</span> -&gt; safe n c1 h Q J</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>b = <span class="mi">0</span> -&gt; safe n c2 h Q J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">~ erroneous (IFTHENELSE b c1 c2, h0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intro</span> ST; inv ST.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1dd" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1dd">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>c1, c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>b &lt;&gt; <span class="mi">0</span> -&gt; safe n c1 h Q J</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>b = <span class="mi">0</span> -&gt; safe n c2 h Q J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (IFTHENELSE b c1 c2, h0) (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1de" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1de">inv H4.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>c1, c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>b &lt;&gt; <span class="mi">0</span> -&gt; safe n c1 h Q J</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>b = <span class="mi">0</span> -&gt; safe n c2 h Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  hunion h (hunion hj hf) = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n (<span class="kr">if</span> b =? <span class="mi">0</span> <span class="kr">then</span> c2 <span class="kr">else</span> c1) h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1df" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1df"><span class="kr">exists</span> <span class="nv">h</span>, hj; <span class="nb">intuition</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>c1, c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(b = <span class="mi">0</span> -&gt; <span class="kt">False</span>) -&gt; safe n c1 h Q J</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>b = <span class="mi">0</span> -&gt; safe n c2 h Q J</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (<span class="kr">if</span> b =? <span class="mi">0</span> <span class="kr">then</span> c2 <span class="kr">else</span> c1) h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> (Z.eqb_spec b <span class="mi">0</span>); <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1e0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1e0"><span class="kn">Lemma</span> <span class="nf">triple_ifthenelse</span>: <span class="kr">forall</span> <span class="nv">J</span> <span class="nv">b</span> <span class="nv">c1</span> <span class="nv">c2</span> <span class="nv">P</span> <span class="nv">Q</span>,
  J ‚ä¢ ‚¶É (b &lt;&gt; <span class="mi">0</span>) //\\ P ‚¶Ñ c1 ‚¶É Q ‚¶Ñ -&gt;
  J ‚ä¢ ‚¶É (b = <span class="mi">0</span>) //\\ P ‚¶Ñ c2 ‚¶É Q ‚¶Ñ -&gt;
  J ‚ä¢ ‚¶É P ‚¶Ñ IFTHENELSE b c1 c2 ‚¶É Q ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : invariant) (<span class="nv">b</span> : Z) (<span class="nv">c1</span> <span class="nv">c2</span> : com)
  (<span class="nv">P</span> : assertion) (<span class="nv">Q</span> : postcond),
J ‚ä¢ ‚¶É (b &lt;&gt; <span class="mi">0</span>) //\\ P ‚¶Ñ c1 ‚¶É Q ‚¶Ñ -&gt;
J ‚ä¢ ‚¶É (b = <span class="mi">0</span>) //\\ P ‚¶Ñ c2 ‚¶É Q ‚¶Ñ -&gt;
J ‚ä¢ ‚¶É P ‚¶Ñ IFTHENELSE b c1 c2 ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1e1" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1e1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : invariant) (<span class="nv">b</span> : Z) (<span class="nv">c1</span> <span class="nv">c2</span> : com)
  (<span class="nv">P</span> : assertion) (<span class="nv">Q</span> : postcond),
J ‚ä¢ ‚¶É (b &lt;&gt; <span class="mi">0</span>) //\\ P ‚¶Ñ c1 ‚¶É Q ‚¶Ñ -&gt;
J ‚ä¢ ‚¶É (b = <span class="mi">0</span>) //\\ P ‚¶Ñ c2 ‚¶É Q ‚¶Ñ -&gt;
J ‚ä¢ ‚¶É P ‚¶Ñ IFTHENELSE b c1 c2 ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1e2" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1e2"><span class="nb">intros</span>; <span class="nb">red</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>c1, c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É (b &lt;&gt; <span class="mi">0</span>) //\\ P ‚¶Ñ c1 ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É (b = <span class="mi">0</span>) //\\ P ‚¶Ñ c2 ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (IFTHENELSE b c1 c2) h Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1e3" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1e3"><span class="nb">destruct</span> n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>c1, c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É (b &lt;&gt; <span class="mi">0</span>) //\\ P ‚¶Ñ c1 ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É (b = <span class="mi">0</span>) //\\ P ‚¶Ñ c2 ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe <span class="mi">0</span> (IFTHENELSE b c1 c2) h Q J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk1e4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>c1, c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É (b &lt;&gt; <span class="mi">0</span>) //\\ P ‚¶Ñ c1 ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É (b = <span class="mi">0</span>) //\\ P ‚¶Ñ c2 ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk1e4"><hr></label><div class="goal-conclusion">safe (S n) (IFTHENELSE b c1 c2) h Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1e5" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1e5"><span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>c1, c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É (b &lt;&gt; <span class="mi">0</span>) //\\ P ‚¶Ñ c1 ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É (b = <span class="mi">0</span>) //\\ P ‚¶Ñ c2 ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n) (IFTHENELSE b c1 c2) h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1e6" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1e6"><span class="nb">apply</span> safe_ifthenelse.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>c1, c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É (b &lt;&gt; <span class="mi">0</span>) //\\ P ‚¶Ñ c1 ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É (b = <span class="mi">0</span>) //\\ P ‚¶Ñ c2 ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">b &lt;&gt; <span class="mi">0</span> -&gt; safe n c1 h Q J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk1e7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>c1, c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É (b &lt;&gt; <span class="mi">0</span>) //\\ P ‚¶Ñ c1 ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É (b = <span class="mi">0</span>) //\\ P ‚¶Ñ c2 ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk1e7"><hr></label><div class="goal-conclusion">b = <span class="mi">0</span> -&gt; safe n c2 h Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1e8" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1e8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>c1, c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É (b &lt;&gt; <span class="mi">0</span>) //\\ P ‚¶Ñ c1 ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É (b = <span class="mi">0</span>) //\\ P ‚¶Ñ c2 ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">b &lt;&gt; <span class="mi">0</span> -&gt; safe n c1 h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1e9" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1e9"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>c1, c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É (b &lt;&gt; <span class="mi">0</span>) //\\ P ‚¶Ñ c1 ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É (b = <span class="mi">0</span>) //\\ P ‚¶Ñ c2 ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>b &lt;&gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c1 h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1ea" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1ea"><span class="nb">apply</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>c1, c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É (b &lt;&gt; <span class="mi">0</span>) //\\ P ‚¶Ñ c1 ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É (b = <span class="mi">0</span>) //\\ P ‚¶Ñ c2 ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>b &lt;&gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((b &lt;&gt; <span class="mi">0</span>) //\\ P) h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">split</span>; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1eb" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1eb">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>c1, c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É (b &lt;&gt; <span class="mi">0</span>) //\\ P ‚¶Ñ c1 ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É (b = <span class="mi">0</span>) //\\ P ‚¶Ñ c2 ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">b = <span class="mi">0</span> -&gt; safe n c2 h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1ec" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1ec"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>c1, c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É (b &lt;&gt; <span class="mi">0</span>) //\\ P ‚¶Ñ c1 ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É (b = <span class="mi">0</span>) //\\ P ‚¶Ñ c2 ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>b = <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c2 h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1ed" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1ed"><span class="nb">apply</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>c1, c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É (b &lt;&gt; <span class="mi">0</span>) //\\ P ‚¶Ñ c1 ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É (b = <span class="mi">0</span>) //\\ P ‚¶Ñ c2 ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>b = <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((b = <span class="mi">0</span>) //\\ P) h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">split</span>; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1ee" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1ee"><span class="kn">Lemma</span> <span class="nf">triple_repeat</span>: <span class="kr">forall</span> <span class="nv">J</span> <span class="nv">P</span> <span class="nv">c</span> <span class="nv">Q</span>,
  J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ -&gt;
  aimp (Q <span class="mi">0</span>) P -&gt;
  J ‚ä¢ ‚¶É P ‚¶Ñ REPEAT c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> =&gt; (v &lt;&gt; <span class="mi">0</span>) //\\ Q v ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : invariant) (<span class="nv">P</span> : precond) (<span class="nv">c</span> : com)
  (<span class="nv">Q</span> : postcond),
J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ -&gt;
Q <span class="mi">0</span> --&gt;&gt; P -&gt;
J ‚ä¢ ‚¶É P ‚¶Ñ REPEAT c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v &lt;&gt; <span class="mi">0</span>) //\\ Q v ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1ef" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1ef"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : invariant) (<span class="nv">P</span> : precond) (<span class="nv">c</span> : com)
  (<span class="nv">Q</span> : postcond),
J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ -&gt;
Q <span class="mi">0</span> --&gt;&gt; P -&gt;
J ‚ä¢ ‚¶É P ‚¶Ñ REPEAT c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v &lt;&gt; <span class="mi">0</span>) //\\ Q v ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1f0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1f0"><span class="nb">intros</span> J P c Q TR IMP.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">J ‚ä¢ ‚¶É P ‚¶Ñ REPEAT c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v &lt;&gt; <span class="mi">0</span>) //\\ Q v ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1f1" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1f1"><span class="nb">red</span>; <span class="nb">induction</span> n; <span class="nb">intros</span> h Ph.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe <span class="mi">0</span> (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v &lt;&gt; <span class="mi">0</span>) //\\ Q v) J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk1f2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v &lt;&gt; <span class="mi">0</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk1f2"><hr></label><div class="goal-conclusion">safe (S n) (REPEAT c) h
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v &lt;&gt; <span class="mi">0</span>) //\\ Q v) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1f3" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1f3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe <span class="mi">0</span> (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v &lt;&gt; <span class="mi">0</span>) //\\ Q v) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1f4" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1f4">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v &lt;&gt; <span class="mi">0</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n) (REPEAT c) h
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v &lt;&gt; <span class="mi">0</span>) //\\ Q v) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1f5" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1f5"><span class="nb">constructor</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v &lt;&gt; <span class="mi">0</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (REPEAT c, h0)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk1f6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v &lt;&gt; <span class="mi">0</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk1f6"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (REPEAT c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v &lt;&gt; <span class="mi">0</span>) //\\ Q v) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1f7" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1f7">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v &lt;&gt; <span class="mi">0</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (REPEAT c, h0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1f8" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1f8"><span class="nb">intros</span>; <span class="nb">intro</span> ST.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v &lt;&gt; <span class="mi">0</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>ST</var><span class="hyp-type"><b>: </b><span>erroneous (REPEAT c, h0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">inv ST.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1f9" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1f9">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v &lt;&gt; <span class="mi">0</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (REPEAT c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v &lt;&gt; <span class="mi">0</span>) //\\ Q v) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1fa" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1fa"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v &lt;&gt; <span class="mi">0</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (REPEAT c, h0) (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v &lt;&gt; <span class="mi">0</span>) //\\ Q v) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1fb" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1fb">inv H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v &lt;&gt; <span class="mi">0</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  hunion h (hunion hj hf) = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n
    (LET c
       (<span class="kr">fun</span> <span class="nv">b</span> : Z =&gt; IFTHENELSE b (PURE b) (REPEAT c)))
    h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v &lt;&gt; <span class="mi">0</span>) //\\ Q v) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1fc" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1fc"><span class="kr">exists</span> <span class="nv">h</span>, hj; <span class="nb">intuition</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n
  (LET c
     (<span class="kr">fun</span> <span class="nv">b</span> : Z =&gt; IFTHENELSE b (PURE b) (REPEAT c)))
  h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1fd" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1fd"><span class="nb">apply</span> safe_let <span class="kr">with</span> Q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c h Q J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk1fe" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk1fe"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt;
(n&#39; &lt; n)%nat -&gt;
safe n&#39; (IFTHENELSE v (PURE v) (REPEAT c)) h&#39;
  (<span class="kr">fun</span> <span class="nv">v0</span> : Z =&gt; (v0 = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v0) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk1ff" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk1ff">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> TR; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk200" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk200">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">v</span> : Z) (<span class="nv">n&#39;</span> : nat) (<span class="nv">h&#39;</span> : heap),
Q v h&#39; -&gt;
(n&#39; &lt; n)%nat -&gt;
safe n&#39; (IFTHENELSE v (PURE v) (REPEAT c)) h&#39;
  (<span class="kr">fun</span> <span class="nv">v0</span> : Z =&gt; (v0 = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v0) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk201" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk201"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Q v h&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(n&#39; &lt; n)%nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n&#39; (IFTHENELSE v (PURE v) (REPEAT c)) h&#39;
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk202" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk202"><span class="nb">destruct</span> n&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Q v h&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(<span class="mi">0</span> &lt; n)%nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe <span class="mi">0</span> (IFTHENELSE v (PURE v) (REPEAT c)) h&#39;
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk203" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Q v h&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(S n&#39; &lt; n)%nat</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk203"><hr></label><div class="goal-conclusion">safe (S n&#39;) (IFTHENELSE v (PURE v) (REPEAT c)) h&#39;
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk204" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk204"><span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Q v h&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(S n&#39; &lt; n)%nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n&#39;) (IFTHENELSE v (PURE v) (REPEAT c)) h&#39;
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk205" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk205"><span class="nb">apply</span> safe_ifthenelse.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Q v h&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(S n&#39; &lt; n)%nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v &lt;&gt; <span class="mi">0</span> -&gt;
safe n&#39; (PURE v) h&#39;
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk206" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Q v h&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(S n&#39; &lt; n)%nat</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk206"><hr></label><div class="goal-conclusion">v = <span class="mi">0</span> -&gt;
safe n&#39; (REPEAT c) h&#39;
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk207" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk207">**</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Q v h&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(S n&#39; &lt; n)%nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v &lt;&gt; <span class="mi">0</span> -&gt;
safe n&#39; (PURE v) h&#39;
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk208" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk208"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Q v h&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(S n&#39; &lt; n)%nat</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>v &lt;&gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n&#39; (PURE v) h&#39;
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk209" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk209"><span class="nb">destruct</span> n&#39;; <span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Q v h&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(S (S n&#39;) &lt; n)%nat</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>v &lt;&gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) h&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">split</span>; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk20a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk20a">**</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Q v h&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(S n&#39; &lt; n)%nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v = <span class="mi">0</span> -&gt;
safe n&#39; (REPEAT c) h&#39;
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk20b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk20b"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Q v h&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(S n&#39; &lt; n)%nat</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>v = <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n&#39; (REPEAT c) h&#39;
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk20c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk20c"><span class="nb">apply</span> safe_mono <span class="kr">with</span> n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Q v h&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(S n&#39; &lt; n)%nat</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>v = <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (REPEAT c) h&#39;
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk20d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Q v h&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(S n&#39; &lt; n)%nat</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>v = <span class="mi">0</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk20d"><hr></label><div class="goal-conclusion">(n&#39; &lt;= n)%nat</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk20e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk20e"><span class="nb">apply</span> IHn.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Q v h&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(S n&#39; &lt; n)%nat</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>v = <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P h&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk20f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Q v h&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(S n&#39; &lt; n)%nat</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>v = <span class="mi">0</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk20f"><hr></label><div class="goal-conclusion">(n&#39; &lt;= n)%nat</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk210" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk210"><span class="nb">apply</span> IMP.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Q v h&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(S n&#39; &lt; n)%nat</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>v = <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q <span class="mi">0</span> h&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk211" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Q v h&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(S n&#39; &lt; n)%nat</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>v = <span class="mi">0</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk211"><hr></label><div class="goal-conclusion">(n&#39; &lt;= n)%nat</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk212" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk212"><span class="bp">congruence</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>IMP</var><span class="hyp-type"><b>: </b><span>Q <span class="mi">0</span> --&gt;&gt; P</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">h</span> : heap,
P h -&gt; safe n (REPEAT c) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ Q v) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n'</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Q v h&#39;</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(S n&#39; &lt; n)%nat</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>v = <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(n&#39; &lt;= n)%nat</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab12"></a><h3 class="section">Parallel composition</h3>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk213" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk213"><span class="kn">Lemma</span> <span class="nf">safe_par</span>:
  <span class="kr">forall</span> (<span class="nv">J</span>: invariant) (<span class="nv">Q1</span> <span class="nv">Q2</span>: assertion) <span class="nv">n</span> <span class="nv">c1</span> <span class="nv">h1</span> <span class="nv">c2</span> <span class="nv">h2</span>,
  safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> =&gt; Q1) J -&gt;
  safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> =&gt; Q2) J -&gt;
  hdisjoint h1 h2 -&gt;
  safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> =&gt; Q1 ** Q2) J.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : invariant) (<span class="nv">Q1</span> <span class="nv">Q2</span> : assertion) (<span class="nv">n</span> : nat)
  (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk214" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk214"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : invariant) (<span class="nv">Q1</span> <span class="nv">Q2</span> : assertion) (<span class="nv">n</span> : nat)
  (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk215" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk215"><span class="nb">induction</span> n; <span class="nb">intros until</span> h2; <span class="nb">intros</span> S1 S2 DISJ; <span class="nb">constructor</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">l</span> : addr,
immacc l (PAR c1 c2) -&gt; hunion h1 h2 l &lt;&gt; None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk216" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk216"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h</span> : heap,
hdisj3 (hunion h1 h2) hj hf -&gt;
h = hunion (hunion h1 h2) (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (PAR c1 c2, h)</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk217" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk217"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 (hunion h1 h2) hj hf -&gt;
h = hunion (hunion h1 h2) (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (PAR c1 c2, h) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk218" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk218">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">l</span> : addr,
immacc l (PAR c1 c2) -&gt; hunion h1 h2 l &lt;&gt; None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk219" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk219"><span class="nb">cbn</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>immacc l c1 \/ immacc l c2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> h1 l <span class="kr">then</span> h1 l <span class="kr">else</span> h2 l) &lt;&gt; None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk21a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk21a"><span class="nb">destruct</span> H <span class="kr">as</span> [H | H]; <span class="nb">eapply</span> safe_immacc <span class="kr">in</span> H; <span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>h1 l &lt;&gt; None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> h1 l <span class="kr">then</span> h1 l <span class="kr">else</span> h2 l) &lt;&gt; None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk21b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>h2 l &lt;&gt; None</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk21b"><hr></label><div class="goal-conclusion">(<span class="kr">if</span> h1 l <span class="kr">then</span> h1 l <span class="kr">else</span> h2 l) &lt;&gt; None</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk21c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk21c"><span class="nb">destruct</span> (h1 l); <span class="bp">congruence</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>h2 l &lt;&gt; None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> h1 l <span class="kr">then</span> h1 l <span class="kr">else</span> h2 l) &lt;&gt; None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> (h1 l); <span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk21d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk21d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h</span> : heap,
hdisj3 (hunion h1 h2) hj hf -&gt;
h = hunion (hunion h1 h2) (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (PAR c1 c2, h)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk21e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk21e"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj, h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>h = hunion (hunion h1 h2) (hunion hj hf)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">~ erroneous (PAR c1 c2, h)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk21f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk21f"><span class="nb">intros</span> ST; inv ST.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>immacc l c1 /\ immacc l c2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk220" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>erroneous
  (c1, hunion (hunion h1 h2) (hunion hj hf))</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk220"><hr></label><div class="goal-conclusion"><span class="kt">False</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk221" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>erroneous
  (c2, hunion (hunion h1 h2) (hunion hj hf))</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk221"><hr></label><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk222" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk222">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>immacc l c1 /\ immacc l c2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk223" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk223"><span class="nb">destruct</span> H3 <span class="kr">as</span> [IM1 IM2].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>IM1</var><span class="hyp-type"><b>: </b><span>immacc l c1</span></span></span><br><span><var>IM2</var><span class="hyp-type"><b>: </b><span>immacc l c2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk224" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk224"><span class="nb">eapply</span> safe_immacc <span class="kr">in</span> IM1; <span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>IM2</var><span class="hyp-type"><b>: </b><span>immacc l c2</span></span></span><br><span><var>IM1</var><span class="hyp-type"><b>: </b><span>h1 l &lt;&gt; None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk225" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk225"><span class="nb">eapply</span> safe_immacc <span class="kr">in</span> IM2; <span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>IM1</var><span class="hyp-type"><b>: </b><span>h1 l &lt;&gt; None</span></span></span><br><span><var>IM2</var><span class="hyp-type"><b>: </b><span>h2 l &lt;&gt; None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk226" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk226"><span class="nb">specialize</span> (DISJ l).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>h1 l = None \/ h2 l = None</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>IM1</var><span class="hyp-type"><b>: </b><span>h1 l &lt;&gt; None</span></span></span><br><span><var>IM2</var><span class="hyp-type"><b>: </b><span>h2 l &lt;&gt; None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">tauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk227" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk227">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>erroneous
  (c1, hunion (hunion h1 h2) (hunion hj hf))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk228" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk228"><span class="nb">elim</span> (safe_not_erroneous _ _ _ _ _ hj (hunion h2 hf) S1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>erroneous
  (c1, hunion (hunion h1 h2) (hunion hj hf))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 h1 hj (hunion h2 hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk229" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>erroneous
  (c1, hunion (hunion h1 h2) (hunion hj hf))</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk229"><hr></label><div class="goal-conclusion">J hj</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk22a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>erroneous
  (c1, hunion (hunion h1 h2) (hunion hj hf))</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk22a"><hr></label><div class="goal-conclusion">erroneous (c1, hunion h1 (hunion hj (hunion h2 hf)))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk22b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk22b">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>erroneous
  (c1, hunion (hunion h1 h2) (hunion hj hf))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">J hj</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk22c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>erroneous
  (c1, hunion (hunion h1 h2) (hunion hj hf))</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk22c"><hr></label><div class="goal-conclusion">erroneous (c1, hunion h1 (hunion hj (hunion h2 hf)))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk22d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk22d"><span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>erroneous
  (c1, hunion (hunion h1 h2) (hunion hj hf))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">erroneous (c1, hunion h1 (hunion hj (hunion h2 hf)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk22e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk22e"><span class="nb">rewrite</span> hunion_assoc <span class="kr">in</span> H3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>erroneous
  (c1, hunion h1 (hunion h2 (hunion hj hf)))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">erroneous (c1, hunion h1 (hunion hj (hunion h2 hf)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk22f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk22f"><span class="nb">rewrite</span> &lt;- (hunion_comm hj) <span class="bp">by</span> HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>erroneous
  (c1, hunion h1 (hunion h2 (hunion hj hf)))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">erroneous (c1, hunion h1 (hunion (hunion h2 hf) hj))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk230" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk230"><span class="nb">rewrite</span> hunion_assoc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>erroneous
  (c1, hunion h1 (hunion h2 (hunion hj hf)))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">erroneous (c1, hunion h1 (hunion h2 (hunion hf hj)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk231" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk231"><span class="nb">rewrite</span> (hunion_comm hj) <span class="bp">by</span> HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>erroneous
  (c1, hunion h1 (hunion h2 (hunion hj hf)))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">erroneous (c1, hunion h1 (hunion h2 (hunion hj hf)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk232" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk232">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>erroneous
  (c2, hunion (hunion h1 h2) (hunion hj hf))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk233" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk233"><span class="nb">elim</span> (safe_not_erroneous _ _ _ _ _ hj (hunion h1 hf) S2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>erroneous
  (c2, hunion (hunion h1 h2) (hunion hj hf))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 h2 hj (hunion h1 hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk234" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>erroneous
  (c2, hunion (hunion h1 h2) (hunion hj hf))</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk234"><hr></label><div class="goal-conclusion">J hj</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk235" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>erroneous
  (c2, hunion (hunion h1 h2) (hunion hj hf))</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk235"><hr></label><div class="goal-conclusion">erroneous (c2, hunion h2 (hunion hj (hunion h1 hf)))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk236" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk236">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>erroneous
  (c2, hunion (hunion h1 h2) (hunion hj hf))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">J hj</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk237" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>erroneous
  (c2, hunion (hunion h1 h2) (hunion hj hf))</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk237"><hr></label><div class="goal-conclusion">erroneous (c2, hunion h2 (hunion hj (hunion h1 hf)))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk238" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk238"><span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>erroneous
  (c2, hunion (hunion h1 h2) (hunion hj hf))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">erroneous (c2, hunion h2 (hunion hj (hunion h1 hf)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk239" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk239"><span class="nb">rewrite</span> &lt;- (hunion_comm h1) <span class="kr">in</span> H3 <span class="bp">by</span> HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>erroneous
  (c2, hunion (hunion h2 h1) (hunion hj hf))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">erroneous (c2, hunion h2 (hunion hj (hunion h1 hf)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk23a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk23a"><span class="nb">rewrite</span> hunion_assoc <span class="kr">in</span> H3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>erroneous
  (c2, hunion h2 (hunion h1 (hunion hj hf)))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">erroneous (c2, hunion h2 (hunion hj (hunion h1 hf)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk23b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk23b"><span class="nb">rewrite</span> &lt;- (hunion_comm hj) <span class="bp">by</span> HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>erroneous
  (c2, hunion h2 (hunion h1 (hunion hj hf)))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">erroneous (c2, hunion h2 (hunion (hunion h1 hf) hj))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk23c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk23c"><span class="nb">rewrite</span> hunion_assoc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>erroneous
  (c2, hunion h2 (hunion h1 (hunion hj hf)))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">erroneous (c2, hunion h2 (hunion h1 (hunion hf hj)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk23d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk23d"><span class="nb">rewrite</span> (hunion_comm hj) <span class="bp">by</span> HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>erroneous
  (c2, hunion h2 (hunion h1 (hunion hj hf)))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">erroneous (c2, hunion h2 (hunion h1 (hunion hj hf)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk23e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk23e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 (hunion h1 h2) hj hf -&gt;
h = hunion (hunion h1 h2) (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (PAR c1 c2, h) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk23f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk23f"><span class="nb">intros</span>; <span class="nb">subst</span> h.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span>
  (PAR c1 c2,
   hunion (hunion h1 h2) (hunion hj hf)) (
  c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk240" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk240">inv H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>h1, h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) (PURE v1) h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) (PURE v2) h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  hunion (hunion h1 h2) (hunion hj hf) =
  hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n SKIP h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk241" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion (hunion h1 h2) (hunion hj hf))
  (c1&#39;, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk241"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n (PAR c1&#39; c2) h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk242" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion (hunion h1 h2) (hunion hj hf))
  (c2&#39;, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk242"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n (PAR c1 c2&#39;) h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk243" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk243">+ <span class="c">(* c1 and c2 are PURE *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>h1, h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) (PURE v1) h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) (PURE v2) h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  hunion (hunion h1 h2) (hunion hj hf) =
  hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n SKIP h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk244" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk244"><span class="nb">apply</span> safe_pure_inv <span class="kr">in</span> S1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>h1, h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>Q1 h1</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) (PURE v2) h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  hunion (hunion h1 h2) (hunion hj hf) =
  hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n SKIP h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk245" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk245"><span class="nb">apply</span> safe_pure_inv <span class="kr">in</span> S2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>h1, h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>Q1 h1</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>Q2 h2</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  hunion (hunion h1 h2) (hunion hj hf) =
  hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n SKIP h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk246" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk246"><span class="kr">exists</span> (<span class="nv">hunion</span> <span class="nv">h1</span> <span class="nv">h2</span>), hj; <span class="nb">intuition</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>h1, h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>Q1 h1</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>Q2 h2</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n SKIP (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk247" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk247"><span class="nb">apply</span> safe_pure.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>h1, h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>Q1 h1</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>Q2 h2</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(Q1 ** Q2) (hunion h1 h2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kr">exists</span> <span class="nv">h1</span>, h2; <span class="nb">intuition</span> <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk248" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk248">+ <span class="c">(* c1 reduces *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion (hunion h1 h2) (hunion hj hf))
  (c1&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n (PAR c1&#39; c2) h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk249" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk249"><span class="nb">rewrite</span> hunion_assoc <span class="kr">in</span> H3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion h2 (hunion hj hf)))
  (c1&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n (PAR c1&#39; c2) h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk24a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk24a"><span class="nb">rewrite</span> &lt;- (hunion_comm h2) <span class="kr">in</span> H3 <span class="bp">by</span> HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion (hunion hj hf) h2))
  (c1&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n (PAR c1&#39; c2) h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk24b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk24b"><span class="nb">rewrite</span> hunion_assoc <span class="kr">in</span> H3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n (PAR c1&#39; c2) h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk24c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk24c"><span class="nb">destruct</span> (safe_red _ _ _ _ _ _ _ _ _ H3 S1) <span class="kr">as</span> (h1&#39; &amp; hj&#39; &amp; A &amp; B &amp; C &amp; D).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">J hj</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk24d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk24d"><hr></label><div class="goal-conclusion">hdisj3 h1 hj (hunion hf h2)</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk24e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; (hunion hf h2))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk24e"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n (PAR c1&#39; c2) h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk24f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk24f"><span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 h1 hj (hunion hf h2)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk250" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; (hunion hf h2))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk250"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n (PAR c1&#39; c2) h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk251" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk251">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; (hunion hf h2))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n (PAR c1&#39; c2) h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk252" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk252"><span class="nb">subst</span> h&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, hunion h1&#39; (hunion hj&#39; (hunion hf h2)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;0</span> <span class="nv">hj&#39;0</span> : heap,
  hdisj3 h1&#39;0 hj&#39;0 hf /\
  hunion h1&#39; (hunion hj&#39; (hunion hf h2)) =
  hunion h1&#39;0 (hunion hj&#39;0 hf) /\
  J hj&#39;0 /\
  safe n (PAR c1&#39; c2) h1&#39;0 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk253" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk253"><span class="kr">exists</span> (<span class="nv">hunion</span> <span class="nv">h1&#39;</span> <span class="nv">h2</span>), hj&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, hunion h1&#39; (hunion hj&#39; (hunion hf h2)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 (hunion h1&#39; h2) hj&#39; hf /\
hunion h1&#39; (hunion hj&#39; (hunion hf h2)) =
hunion (hunion h1&#39; h2) (hunion hj&#39; hf) /\
J hj&#39; /\
safe n (PAR c1&#39; c2) (hunion h1&#39; h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk254" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk254"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, hunion h1&#39; (hunion hj&#39; (hunion hf h2)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 (hunion h1&#39; h2) hj&#39; hf</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk255" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, hunion h1&#39; (hunion hj&#39; (hunion hf h2)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk255"><hr></label><div class="goal-conclusion">hunion h1&#39; (hunion hj&#39; (hunion hf h2)) =
hunion (hunion h1&#39; h2) (hunion hj&#39; hf) /\
J hj&#39; /\
safe n (PAR c1&#39; c2) (hunion h1&#39; h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk256" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk256">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, hunion h1&#39; (hunion hj&#39; (hunion hf h2)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h1&#39; (hunion hj&#39; (hunion hf h2)) =
hunion (hunion h1&#39; h2) (hunion hj&#39; hf) /\
J hj&#39; /\
safe n (PAR c1&#39; c2) (hunion h1&#39; h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk257" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk257"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, hunion h1&#39; (hunion hj&#39; (hunion hf h2)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h1&#39; (hunion hj&#39; (hunion hf h2)) =
hunion (hunion h1&#39; h2) (hunion hj&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk258" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, hunion h1&#39; (hunion hj&#39; (hunion hf h2)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk258"><hr></label><div class="goal-conclusion">J hj&#39; /\
safe n (PAR c1&#39; c2) (hunion h1&#39; h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk259" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk259"><span class="nb">rewrite</span> hunion_assoc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, hunion h1&#39; (hunion hj&#39; (hunion hf h2)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h1&#39; (hunion hj&#39; (hunion hf h2)) =
hunion h1&#39; (hunion h2 (hunion hj&#39; hf))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk25a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, hunion h1&#39; (hunion hj&#39; (hunion hf h2)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk25a"><hr></label><div class="goal-conclusion">J hj&#39; /\
safe n (PAR c1&#39; c2) (hunion h1&#39; h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk25b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk25b"><span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, hunion h1&#39; (hunion hj&#39; (hunion hf h2)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion hj&#39; (hunion hf h2) = hunion h2 (hunion hj&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk25c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, hunion h1&#39; (hunion hj&#39; (hunion hf h2)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk25c"><hr></label><div class="goal-conclusion">J hj&#39; /\
safe n (PAR c1&#39; c2) (hunion h1&#39; h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk25d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk25d"><span class="nb">rewrite</span> &lt;- (hunion_comm h2) <span class="bp">by</span> HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, hunion h1&#39; (hunion hj&#39; (hunion hf h2)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion hj&#39; (hunion hf h2) = hunion (hunion hj&#39; hf) h2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk25e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, hunion h1&#39; (hunion hj&#39; (hunion hf h2)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk25e"><hr></label><div class="goal-conclusion">J hj&#39; /\
safe n (PAR c1&#39; c2) (hunion h1&#39; h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk25f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk25f"><span class="nb">rewrite</span> hunion_assoc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, hunion h1&#39; (hunion hj&#39; (hunion hf h2)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion hj&#39; (hunion hf h2) = hunion hj&#39; (hunion hf h2)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk260" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, hunion h1&#39; (hunion hj&#39; (hunion hf h2)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk260"><hr></label><div class="goal-conclusion">J hj&#39; /\
safe n (PAR c1&#39; c2) (hunion h1&#39; h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk261" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk261"><span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, hunion h1&#39; (hunion hj&#39; (hunion hf h2)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">J hj&#39; /\
safe n (PAR c1&#39; c2) (hunion h1&#39; h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk262" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk262"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, hunion h1&#39; (hunion hj&#39; (hunion hf h2)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">J hj&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk263" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, hunion h1&#39; (hunion hj&#39; (hunion hf h2)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk263"><hr></label><div class="goal-conclusion">safe n (PAR c1&#39; c2) (hunion h1&#39; h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk264" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk264"><span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, hunion h1&#39; (hunion hj&#39; (hunion hf h2)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (PAR c1&#39; c2) (hunion h1&#39; h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk265" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk265"><span class="nb">apply</span> IHn.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, hunion h1&#39; (hunion hj&#39; (hunion hf h2)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk266" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, hunion h1&#39; (hunion hj&#39; (hunion hf h2)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk266"><hr></label><div class="goal-conclusion">safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk267" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, hunion h1&#39; (hunion hj&#39; (hunion hf h2)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk267"><hr></label><div class="goal-conclusion">hdisjoint h1&#39; h2</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk268" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk268"><span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, hunion h1&#39; (hunion hj&#39; (hunion hf h2)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk269" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, hunion h1&#39; (hunion hj&#39; (hunion hf h2)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk269"><hr></label><div class="goal-conclusion">hdisjoint h1&#39; h2</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk26a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk26a"><span class="nb">apply</span> safe_mono <span class="kr">with</span> (S n); <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c1'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c1, hunion h1 (hunion hj (hunion hf h2)))
  (c1&#39;, hunion h1&#39; (hunion hj&#39; (hunion hf h2)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; (hunion hf h2)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c1&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisjoint h1&#39; h2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">HDISJ.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk26b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk26b">+ <span class="c">(* c2 reduces *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion (hunion h1 h2) (hunion hj hf))
  (c2&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n (PAR c1 c2&#39;) h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk26c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk26c"><span class="nb">rewrite</span> &lt;- (hunion_comm h1) <span class="kr">in</span> H3 <span class="bp">by</span> HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion (hunion h2 h1) (hunion hj hf))
  (c2&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n (PAR c1 c2&#39;) h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk26d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk26d"><span class="nb">rewrite</span> hunion_assoc <span class="kr">in</span> H3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion h1 (hunion hj hf)))
  (c2&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n (PAR c1 c2&#39;) h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk26e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk26e"><span class="nb">rewrite</span> &lt;- (hunion_comm h1) <span class="kr">in</span> H3 <span class="bp">by</span> HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion (hunion hj hf) h1))
  (c2&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n (PAR c1 c2&#39;) h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk26f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk26f"><span class="nb">rewrite</span> hunion_assoc <span class="kr">in</span> H3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n (PAR c1 c2&#39;) h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk270" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk270"><span class="nb">destruct</span> (safe_red _ _ _ _ _ _ _ _ _ H3 S2) <span class="kr">as</span> (h2&#39; &amp; hj&#39; &amp; A &amp; B &amp; C &amp; D).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">J hj</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk271" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, h&#39;)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk271"><hr></label><div class="goal-conclusion">hdisj3 h2 hj (hunion hf h1)</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk272" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, h&#39;)</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h2&#39; (hunion hj&#39; (hunion hf h1))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk272"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n (PAR c1 c2&#39;) h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk273" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk273"><span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 h2 hj (hunion hf h1)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk274" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, h&#39;)</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h2&#39; (hunion hj&#39; (hunion hf h1))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk274"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n (PAR c1 c2&#39;) h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk275" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk275">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj, h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, h&#39;)</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h2&#39; (hunion hj&#39; (hunion hf h1))</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n (PAR c1 c2&#39;) h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk276" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk276"><span class="nb">subst</span> h&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, hunion h2&#39; (hunion hj&#39; (hunion hf h1)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;0</span> : heap,
  hdisj3 h1&#39; hj&#39;0 hf /\
  hunion h2&#39; (hunion hj&#39; (hunion hf h1)) =
  hunion h1&#39; (hunion hj&#39;0 hf) /\
  J hj&#39;0 /\
  safe n (PAR c1 c2&#39;) h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk277" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk277"><span class="kr">exists</span> (<span class="nv">hunion</span> <span class="nv">h2&#39;</span> <span class="nv">h1</span>), hj&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, hunion h2&#39; (hunion hj&#39; (hunion hf h1)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 (hunion h2&#39; h1) hj&#39; hf /\
hunion h2&#39; (hunion hj&#39; (hunion hf h1)) =
hunion (hunion h2&#39; h1) (hunion hj&#39; hf) /\
J hj&#39; /\
safe n (PAR c1 c2&#39;) (hunion h2&#39; h1)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk278" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk278"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, hunion h2&#39; (hunion hj&#39; (hunion hf h1)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 (hunion h2&#39; h1) hj&#39; hf</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk279" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, hunion h2&#39; (hunion hj&#39; (hunion hf h1)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk279"><hr></label><div class="goal-conclusion">hunion h2&#39; (hunion hj&#39; (hunion hf h1)) =
hunion (hunion h2&#39; h1) (hunion hj&#39; hf) /\
J hj&#39; /\
safe n (PAR c1 c2&#39;) (hunion h2&#39; h1)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk27a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk27a">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, hunion h2&#39; (hunion hj&#39; (hunion hf h1)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h2&#39; (hunion hj&#39; (hunion hf h1)) =
hunion (hunion h2&#39; h1) (hunion hj&#39; hf) /\
J hj&#39; /\
safe n (PAR c1 c2&#39;) (hunion h2&#39; h1)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk27b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk27b"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, hunion h2&#39; (hunion hj&#39; (hunion hf h1)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h2&#39; (hunion hj&#39; (hunion hf h1)) =
hunion (hunion h2&#39; h1) (hunion hj&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk27c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, hunion h2&#39; (hunion hj&#39; (hunion hf h1)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk27c"><hr></label><div class="goal-conclusion">J hj&#39; /\
safe n (PAR c1 c2&#39;) (hunion h2&#39; h1)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk27d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk27d"><span class="nb">rewrite</span> hunion_assoc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, hunion h2&#39; (hunion hj&#39; (hunion hf h1)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h2&#39; (hunion hj&#39; (hunion hf h1)) =
hunion h2&#39; (hunion h1 (hunion hj&#39; hf))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk27e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, hunion h2&#39; (hunion hj&#39; (hunion hf h1)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk27e"><hr></label><div class="goal-conclusion">J hj&#39; /\
safe n (PAR c1 c2&#39;) (hunion h2&#39; h1)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk27f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk27f"><span class="nb">f_equal</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, hunion h2&#39; (hunion hj&#39; (hunion hf h1)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion hj&#39; (hunion hf h1) = hunion h1 (hunion hj&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk280" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, hunion h2&#39; (hunion hj&#39; (hunion hf h1)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk280"><hr></label><div class="goal-conclusion">J hj&#39; /\
safe n (PAR c1 c2&#39;) (hunion h2&#39; h1)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk281" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk281"><span class="nb">rewrite</span> &lt;- (hunion_comm h1) <span class="bp">by</span> HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, hunion h2&#39; (hunion hj&#39; (hunion hf h1)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion hj&#39; (hunion hf h1) = hunion (hunion hj&#39; hf) h1</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk282" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, hunion h2&#39; (hunion hj&#39; (hunion hf h1)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk282"><hr></label><div class="goal-conclusion">J hj&#39; /\
safe n (PAR c1 c2&#39;) (hunion h2&#39; h1)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk283" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk283"><span class="nb">rewrite</span> hunion_assoc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, hunion h2&#39; (hunion hj&#39; (hunion hf h1)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion hj&#39; (hunion hf h1) = hunion hj&#39; (hunion hf h1)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk284" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, hunion h2&#39; (hunion hj&#39; (hunion hf h1)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk284"><hr></label><div class="goal-conclusion">J hj&#39; /\
safe n (PAR c1 c2&#39;) (hunion h2&#39; h1)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk285" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk285"><span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, hunion h2&#39; (hunion hj&#39; (hunion hf h1)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">J hj&#39; /\
safe n (PAR c1 c2&#39;) (hunion h2&#39; h1)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk286" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk286"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, hunion h2&#39; (hunion hj&#39; (hunion hf h1)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">J hj&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk287" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, hunion h2&#39; (hunion hj&#39; (hunion hf h1)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk287"><hr></label><div class="goal-conclusion">safe n (PAR c1 c2&#39;) (hunion h2&#39; h1)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk288" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk288"><span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, hunion h2&#39; (hunion hj&#39; (hunion hf h1)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (PAR c1 c2&#39;) (hunion h2&#39; h1)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk289" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk289"><span class="nb">rewrite</span> hunion_comm <span class="bp">by</span> HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, hunion h2&#39; (hunion hj&#39; (hunion hf h1)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (PAR c1 c2&#39;) (hunion h1 h2&#39;)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk28a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk28a"><span class="nb">apply</span> IHn.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, hunion h2&#39; (hunion hj&#39; (hunion hf h1)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk28b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, hunion h2&#39; (hunion hj&#39; (hunion hf h1)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk28b"><hr></label><div class="goal-conclusion">safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk28c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, hunion h2&#39; (hunion hj&#39; (hunion hf h1)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk28c"><hr></label><div class="goal-conclusion">hdisjoint h1 h2&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk28d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk28d"><span class="nb">apply</span> safe_mono <span class="kr">with</span> (S n); <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, hunion h2&#39; (hunion hj&#39; (hunion hf h1)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk28e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) 
  (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, hunion h2&#39; (hunion hj&#39; (hunion hf h1)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk28e"><hr></label><div class="goal-conclusion">hdisjoint h1 h2&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk28f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk28f"><span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>Q1, Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c1</span> : com) (<span class="nv">h1</span> : heap) (<span class="nv">c2</span> : com) (<span class="nv">h2</span> : heap),
safe n c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J -&gt;
safe n c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J -&gt;
hdisjoint h1 h2 -&gt;
safe n (PAR c1 c2) (hunion h1 h2) (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S1</var><span class="hyp-type"><b>: </b><span>safe (S n) c1 h1 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1) J</span></span></span><br><span><var>S2</var><span class="hyp-type"><b>: </b><span>safe (S n) c2 h2 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br><span><var>DISJ</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hunion h1 h2) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>c2'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h2', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c2, hunion h2 (hunion hj (hunion hf h1)))
  (c2&#39;, hunion h2&#39; (hunion hj&#39; (hunion hf h1)))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h2&#39; hj&#39; (hunion hf h1)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c2&#39; h2&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2) J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisjoint h1 h2&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">HDISJ.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk290" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk290"><span class="kn">Lemma</span> <span class="nf">triple_par</span>: <span class="kr">forall</span> <span class="nv">J</span> <span class="nv">P1</span> <span class="nv">c1</span> <span class="nv">Q1</span> <span class="nv">P2</span> <span class="nv">c2</span> <span class="nv">Q2</span>,
  J ‚ä¢ ‚¶É P1 ‚¶Ñ c1 ‚¶É <span class="kr">fun</span> <span class="nv">_</span> =&gt; Q1 ‚¶Ñ -&gt;
  J ‚ä¢ ‚¶É P2 ‚¶Ñ c2 ‚¶É <span class="kr">fun</span> <span class="nv">_</span> =&gt; Q2 ‚¶Ñ -&gt;
  J ‚ä¢ ‚¶É P1 ** P2 ‚¶Ñ PAR c1 c2 ‚¶É <span class="kr">fun</span> <span class="nv">_</span> =&gt; Q1 ** Q2 ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : invariant) (<span class="nv">P1</span> : precond) (<span class="nv">c1</span> : com)
  (<span class="nv">Q1</span> : assertion) (<span class="nv">P2</span> : precond) (<span class="nv">c2</span> : com)
  (<span class="nv">Q2</span> : assertion),
J ‚ä¢ ‚¶É P1 ‚¶Ñ c1 ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ‚¶Ñ -&gt;
J ‚ä¢ ‚¶É P2 ‚¶Ñ c2 ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2 ‚¶Ñ -&gt;
J ‚ä¢ ‚¶É P1 ** P2 ‚¶Ñ PAR c1 c2 ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2 ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk291" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk291"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : invariant) (<span class="nv">P1</span> : precond) (<span class="nv">c1</span> : com)
  (<span class="nv">Q1</span> : assertion) (<span class="nv">P2</span> : precond) (<span class="nv">c2</span> : com)
  (<span class="nv">Q2</span> : assertion),
J ‚ä¢ ‚¶É P1 ‚¶Ñ c1 ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ‚¶Ñ -&gt;
J ‚ä¢ ‚¶É P2 ‚¶Ñ c2 ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2 ‚¶Ñ -&gt;
J ‚ä¢ ‚¶É P1 ** P2 ‚¶Ñ PAR c1 c2 ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2 ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk292" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk292"><span class="nb">intros until</span> Q2; <span class="nb">intros</span> TR1 TR2 n h Ph.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P1</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q1</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>P2</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>TR1</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P1 ‚¶Ñ c1 ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ‚¶Ñ</span></span></span><br><span><var>TR2</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P2 ‚¶Ñ c2 ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2 ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>(P1 ** P2) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (PAR c1 c2) h (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk293" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk293"><span class="nb">destruct</span> Ph <span class="kr">as</span> (h1 &amp; h2 &amp; Ph1 &amp; Ph2 &amp; D &amp; U).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P1</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q1</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>P2</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>TR1</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P1 ‚¶Ñ c1 ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ‚¶Ñ</span></span></span><br><span><var>TR2</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P2 ‚¶Ñ c2 ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2 ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h, h1, h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph1</var><span class="hyp-type"><b>: </b><span>P1 h1</span></span></span><br><span><var>Ph2</var><span class="hyp-type"><b>: </b><span>P2 h2</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>h = hunion h1 h2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (PAR c1 c2) h (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk294" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk294"><span class="nb">subst</span> h.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P1</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q1</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>P2</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q2</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>TR1</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P1 ‚¶Ñ c1 ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ‚¶Ñ</span></span></span><br><span><var>TR2</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P2 ‚¶Ñ c2 ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q2 ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h1, h2</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph1</var><span class="hyp-type"><b>: </b><span>P1 h1</span></span></span><br><span><var>Ph2</var><span class="hyp-type"><b>: </b><span>P2 h2</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>hdisjoint h1 h2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (PAR c1 c2) (hunion h1 h2)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q1 ** Q2) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> safe_par; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab13"></a><h3 class="section">The "small rules" for heap operations</h3>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk295" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk295"><span class="kn">Lemma</span> <span class="nf">triple_get</span>: <span class="kr">forall</span> <span class="nv">J</span> <span class="nv">l</span> <span class="nv">v</span>,
  J ‚ä¢ ‚¶É contains l v ‚¶Ñ GET l ‚¶É <span class="kr">fun</span> <span class="nv">v&#39;</span> =&gt; (v&#39; = v) //\\ contains l v ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : invariant) (<span class="nv">l</span> : addr) (<span class="nv">v</span> : Z),
J ‚ä¢ ‚¶É contains l v ‚¶Ñ GET l
‚¶É <span class="kr">fun</span> <span class="nv">v&#39;</span> : Z =&gt; (v&#39; = v) //\\ contains l v ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk296" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk296"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : invariant) (<span class="nv">l</span> : addr) (<span class="nv">v</span> : Z),
J ‚ä¢ ‚¶É contains l v ‚¶Ñ GET l
‚¶É <span class="kr">fun</span> <span class="nv">v&#39;</span> : Z =&gt; (v&#39; = v) //\\ contains l v ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk297" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk297"><span class="nb">intros</span> J l v n h Ph.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (GET l) h
  (<span class="kr">fun</span> <span class="nv">v&#39;</span> : Z =&gt; (v&#39; = v) //\\ contains l v) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk298" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk298"><span class="nb">assert</span> (L: h l = Some v) <span class="bp">by</span> (<span class="nb">rewrite</span> Ph; <span class="nb">apply</span> hupdate_same).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (GET l) h
  (<span class="kr">fun</span> <span class="nv">v&#39;</span> : Z =&gt; (v&#39; = v) //\\ contains l v) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk299" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk299"><span class="nb">destruct</span> n; <span class="nb">constructor</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">l0</span> : addr, immacc l0 (GET l) -&gt; h l0 &lt;&gt; None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk29a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk29a"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (GET l, h0)</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk29b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk29b"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (GET l, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n c&#39; h1&#39;
    (<span class="kr">fun</span> <span class="nv">v&#39;</span> : Z =&gt; (v&#39; = v) //\\ contains l v) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk29c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk29c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">l0</span> : addr, immacc l0 (GET l) -&gt; h l0 &lt;&gt; None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk29d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk29d"><span class="nb">cbn</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>l0 = l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">h l0 &lt;&gt; None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk29e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk29e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (GET l, h0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk29f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk29f"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">~ erroneous (GET l, h0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2a0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2a0"><span class="nb">subst</span> h0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">~ erroneous (GET l, hunion h (hunion hj hf))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2a1" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2a1"><span class="nb">intro</span> ST; inv ST.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2a2" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2a2"><span class="nb">cbn</span> <span class="kr">in</span> H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(<span class="kr">if</span> h l <span class="kr">then</span> h l <span class="kr">else</span> <span class="kr">if</span> hj l <span class="kr">then</span> hj l <span class="kr">else</span> hf l) =
None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2a3" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2a3"><span class="nb">rewrite</span> L <span class="kr">in</span> H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Some v = None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2a4" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2a4">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (GET l, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n c&#39; h1&#39;
    (<span class="kr">fun</span> <span class="nv">v&#39;</span> : Z =&gt; (v&#39; = v) //\\ contains l v) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2a5" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2a5"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (GET l, h0) (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n c&#39; h1&#39;
    (<span class="kr">fun</span> <span class="nv">v&#39;</span> : Z =&gt; (v&#39; = v) //\\ contains l v) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2a6" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2a6"><span class="nb">subst</span> h0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (GET l, hunion h (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n c&#39; h1&#39;
    (<span class="kr">fun</span> <span class="nv">v&#39;</span> : Z =&gt; (v&#39; = v) //\\ contains l v) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2a7" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2a7">inv H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = Some v0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  hunion h (hunion hj hf) = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n (PURE v0) h1&#39;
    (<span class="kr">fun</span> <span class="nv">v&#39;</span> : Z =&gt; (v&#39; = v) //\\ contains l v) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2a8" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2a8"><span class="nb">assert</span> (v0 = v).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = Some v0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v0 = v</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk2a9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = Some v0</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>v0 = v</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk2a9"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  hunion h (hunion hj hf) = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n (PURE v0) h1&#39;
    (<span class="kr">fun</span> <span class="nv">v&#39;</span> : Z =&gt; (v&#39; = v) //\\ contains l v) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2aa" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2aa">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = Some v0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v0 = v</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2ab" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2ab"><span class="nb">cbn</span> <span class="kr">in</span> H3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>(<span class="kr">if</span> h l <span class="kr">then</span> h l <span class="kr">else</span> <span class="kr">if</span> hj l <span class="kr">then</span> hj l <span class="kr">else</span> hf l) =
Some v0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v0 = v</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2ac" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2ac"><span class="nb">rewrite</span> L <span class="kr">in</span> H3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Some v = Some v0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v0 = v</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">congruence</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2ad" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2ad">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = Some v0</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>v0 = v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  hunion h (hunion hj hf) = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n (PURE v0) h1&#39;
    (<span class="kr">fun</span> <span class="nv">v&#39;</span> : Z =&gt; (v&#39; = v) //\\ contains l v) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2ae" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2ae"><span class="nb">subst</span> v0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  hunion h (hunion hj hf) = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n (PURE v) h1&#39;
    (<span class="kr">fun</span> <span class="nv">v&#39;</span> : Z =&gt; (v&#39; = v) //\\ contains l v) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2af" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2af"><span class="kr">exists</span> <span class="nv">h</span>, hj; <span class="nb">intuition</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (PURE v) h
  (<span class="kr">fun</span> <span class="nv">v&#39;</span> : Z =&gt; (v&#39; = v) //\\ contains l v) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2b0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2b0"><span class="nb">apply</span> safe_pure.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((v = v) //\\ contains l v) h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">split</span>; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2b1" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2b1"><span class="kn">Lemma</span> <span class="nf">triple_set</span>: <span class="kr">forall</span> <span class="nv">J</span> <span class="nv">l</span> <span class="nv">v</span>,
  J ‚ä¢ ‚¶É valid l ‚¶Ñ SET l v ‚¶É <span class="kr">fun</span> <span class="nv">_</span> =&gt; contains l v ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : invariant) (<span class="nv">l</span> : addr) (<span class="nv">v</span> : Z),
J ‚ä¢ ‚¶É valid l ‚¶Ñ SET l v ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; contains l v ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2b2" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2b2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : invariant) (<span class="nv">l</span> : addr) (<span class="nv">v</span> : Z),
J ‚ä¢ ‚¶É valid l ‚¶Ñ SET l v ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; contains l v ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2b3" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2b3"><span class="nb">intros</span> J l v n h Ph.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>valid l h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (SET l v) h (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; contains l v) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2b4" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2b4"><span class="nb">destruct</span> Ph <span class="kr">as</span> (v0 &amp; Ph).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (SET l v) h (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; contains l v) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2b5" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2b5"><span class="nb">assert</span> (L: h l = Some v0) <span class="bp">by</span> (<span class="nb">rewrite</span> Ph; <span class="nb">apply</span> hupdate_same).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (SET l v) h (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; contains l v) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2b6" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2b6"><span class="nb">destruct</span> n; <span class="nb">constructor</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">l0</span> : addr, immacc l0 (SET l v) -&gt; h l0 &lt;&gt; None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk2b7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk2b7"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (SET l v, h0)</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk2b8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk2b8"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (SET l v, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; contains l v) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2b9" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2b9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">l0</span> : addr, immacc l0 (SET l v) -&gt; h l0 &lt;&gt; None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2ba" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2ba"><span class="nb">cbn</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>l0 = l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">h l0 &lt;&gt; None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2bb" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2bb">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (SET l v, h0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2bc" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2bc"><span class="nb">intros</span>; <span class="nb">intro</span> ST; inv ST.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2bd" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2bd"><span class="nb">cbn</span> <span class="kr">in</span> H3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>(<span class="kr">if</span> h l <span class="kr">then</span> h l <span class="kr">else</span> <span class="kr">if</span> hj l <span class="kr">then</span> hj l <span class="kr">else</span> hf l) =
None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> L <span class="kr">in</span> H3; <span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2be" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2be">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (SET l v, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; contains l v) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2bf" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2bf"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (SET l v, h0) (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; contains l v) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2c0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2c0"><span class="nb">subst</span> h0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (SET l v, hunion h (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; contains l v) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2c1" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2c1"><span class="nb">rewrite</span> Ph <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hupdate l v0 hempty) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (SET l v, hunion h (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; contains l v) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2c2" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2c2">inv H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hupdate l v0 hempty) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l &lt;&gt; None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  hupdate l v (hunion h (hunion hj hf)) =
  hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n SKIP h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; contains l v) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2c3" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2c3"><span class="kr">exists</span> (<span class="nv">hupdate</span> <span class="nv">l</span> <span class="nv">v</span> <span class="nv">hempty</span>), hj; <span class="nb">intuition</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hupdate l v0 hempty) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 (hupdate l v hempty) hj hf</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk2c4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hupdate l v0 hempty) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk2c4"><hr></label><div class="goal-conclusion">hupdate l v (hunion h (hunion hj hf)) =
hunion (hupdate l v hempty) (hunion hj hf)</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk2c5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hupdate l v0 hempty) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk2c5"><hr></label><div class="goal-conclusion">safe n SKIP (hupdate l v hempty)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; contains l v) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2c6" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2c6">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hupdate l v0 hempty) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 (hupdate l v hempty) hj hf</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2c7" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2c7">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisjoint (hupdate l v0 hempty) hj</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint (hupdate l v0 hempty) hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisjoint hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisjoint (hupdate l v hempty) hj</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk2c8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisjoint (hupdate l v0 hempty) hj</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint (hupdate l v0 hempty) hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisjoint hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk2c8"><hr></label><div class="goal-conclusion">hdisjoint (hupdate l v hempty) hf</div></blockquote></div></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2c9" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2c9"><span class="nb">red</span>; <span class="nb">intros</span> l0; <span class="nb">generalize</span> (H l0); <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisjoint (hupdate l v0 hempty) hj</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint (hupdate l v0 hempty) hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisjoint hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> Z.eq_dec l l0 <span class="kr">then</span> Some v0 <span class="kr">else</span> None) = None \/
hj l0 = None -&gt;
(<span class="kr">if</span> Z.eq_dec l l0 <span class="kr">then</span> Some v <span class="kr">else</span> None) = None \/
hj l0 = None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk2ca" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisjoint (hupdate l v0 hempty) hj</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint (hupdate l v0 hempty) hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisjoint hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk2ca"><hr></label><div class="goal-conclusion">hdisjoint (hupdate l v hempty) hf</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2cb" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2cb"><span class="nb">destruct</span> (Z.eq_dec l l0); <span class="nb">intuition</span> <span class="bp">congruence</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisjoint (hupdate l v0 hempty) hj</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint (hupdate l v0 hempty) hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisjoint hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisjoint (hupdate l v hempty) hf</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2cc" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2cc"><span class="nb">red</span>; <span class="nb">intros</span> l0; <span class="nb">generalize</span> (H0 l0); <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisjoint (hupdate l v0 hempty) hj</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisjoint (hupdate l v0 hempty) hf</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>hdisjoint hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> Z.eq_dec l l0 <span class="kr">then</span> Some v0 <span class="kr">else</span> None) = None \/
hf l0 = None -&gt;
(<span class="kr">if</span> Z.eq_dec l l0 <span class="kr">then</span> Some v <span class="kr">else</span> None) = None \/
hf l0 = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> (Z.eq_dec l l0); <span class="nb">intuition</span> <span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2cd" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2cd">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hupdate l v0 hempty) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hupdate l v (hunion h (hunion hj hf)) =
hunion (hupdate l v hempty) (hunion hj hf)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2ce" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2ce"><span class="nb">rewrite</span> Ph.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hupdate l v0 hempty) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hupdate l v
  (hunion (hupdate l v0 hempty) (hunion hj hf)) =
hunion (hupdate l v hempty) (hunion hj hf)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2cf" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2cf"><span class="nb">apply</span> heap_extensionality; <span class="nb">intros</span> l0; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hupdate l v0 hempty) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> Z.eq_dec l l0
 <span class="kr">then</span> Some v
 <span class="kr">else</span>
  <span class="kr">if</span> <span class="kr">if</span> Z.eq_dec l l0 <span class="kr">then</span> Some v0 <span class="kr">else</span> None
  <span class="kr">then</span> <span class="kr">if</span> Z.eq_dec l l0 <span class="kr">then</span> Some v0 <span class="kr">else</span> None
  <span class="kr">else</span> <span class="kr">if</span> hj l0 <span class="kr">then</span> hj l0 <span class="kr">else</span> hf l0) =
(<span class="kr">if</span> <span class="kr">if</span> Z.eq_dec l l0 <span class="kr">then</span> Some v <span class="kr">else</span> None
 <span class="kr">then</span> <span class="kr">if</span> Z.eq_dec l l0 <span class="kr">then</span> Some v <span class="kr">else</span> None
 <span class="kr">else</span> <span class="kr">if</span> hj l0 <span class="kr">then</span> hj l0 <span class="kr">else</span> hf l0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> (Z.eq_dec l l0); <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2d0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2d0">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hupdate l v0 hempty) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n SKIP (hupdate l v hempty)
  (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; contains l v) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2d1" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2d1"><span class="nb">apply</span> safe_pure.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hupdate l v0 hempty) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains l v (hupdate l v hempty)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> 
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Fixpoint</span> <span class="nf">valid_N</span> (<span class="nv">l</span>: addr) (<span class="nv">sz</span>: nat) : assertion :=
  <span class="kr">match</span> sz <span class="kr">with</span> O =&gt; emp | S sz =&gt; valid l ** valid_N (l + <span class="mi">1</span>) sz <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2d2" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2d2"><span class="kn">Remark</span> <span class="nf">valid_N_init</span>:
  <span class="kr">forall</span> <span class="nv">sz</span> <span class="nv">l</span>,
  (valid_N l sz) (hinit l sz hempty).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">sz</span> : nat) (<span class="nv">l</span> : addr),
valid_N l sz (hinit l sz hempty)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2d3" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2d3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">sz</span> : nat) (<span class="nv">l</span> : addr),
valid_N l sz (hinit l sz hempty)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2d4" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2d4"><span class="nb">induction</span> sz <span class="kr">as</span> [ | sz]; <span class="nb">intros</span> l; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp hempty</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk2d5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>sz</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHsz</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
valid_N l sz (hinit l sz hempty)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk2d5"><hr></label><div class="goal-conclusion">(valid l ** valid_N (l + <span class="mi">1</span>) sz)
  (hupdate l <span class="mi">0</span> (hinit (l + <span class="mi">1</span>) sz hempty))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2d6" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2d6">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp hempty</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">red</span>; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2d7" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2d7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>sz</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHsz</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
valid_N l sz (hinit l sz hempty)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(valid l ** valid_N (l + <span class="mi">1</span>) sz)
  (hupdate l <span class="mi">0</span> (hinit (l + <span class="mi">1</span>) sz hempty))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2d8" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2d8"><span class="kr">exists</span> (<span class="nv">hupdate</span> <span class="nv">l</span> <span class="mi">0</span> <span class="nv">hempty</span>), (hinit (l + <span class="mi">1</span>) sz hempty).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>sz</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHsz</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
valid_N l sz (hinit l sz hempty)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid l (hupdate l <span class="mi">0</span> hempty) /\
valid_N (l + <span class="mi">1</span>) sz (hinit (l + <span class="mi">1</span>) sz hempty) /\
hdisjoint (hupdate l <span class="mi">0</span> hempty)
  (hinit (l + <span class="mi">1</span>) sz hempty) /\
hupdate l <span class="mi">0</span> (hinit (l + <span class="mi">1</span>) sz hempty) =
hunion (hupdate l <span class="mi">0</span> hempty) (hinit (l + <span class="mi">1</span>) sz hempty)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2d9" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2d9"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>sz</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHsz</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
valid_N l sz (hinit l sz hempty)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid l (hupdate l <span class="mi">0</span> hempty)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk2da" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>sz</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHsz</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
valid_N l sz (hinit l sz hempty)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk2da"><hr></label><div class="goal-conclusion">valid_N (l + <span class="mi">1</span>) sz (hinit (l + <span class="mi">1</span>) sz hempty) /\
hdisjoint (hupdate l <span class="mi">0</span> hempty)
  (hinit (l + <span class="mi">1</span>) sz hempty) /\
hupdate l <span class="mi">0</span> (hinit (l + <span class="mi">1</span>) sz hempty) =
hunion (hupdate l <span class="mi">0</span> hempty) (hinit (l + <span class="mi">1</span>) sz hempty)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2db" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2db"><span class="kr">exists</span> <span class="mi">0</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>sz</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHsz</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
valid_N l sz (hinit l sz hempty)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains l <span class="mi">0</span> (hupdate l <span class="mi">0</span> hempty)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk2dc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>sz</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHsz</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
valid_N l sz (hinit l sz hempty)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk2dc"><hr></label><div class="goal-conclusion">valid_N (l + <span class="mi">1</span>) sz (hinit (l + <span class="mi">1</span>) sz hempty) /\
hdisjoint (hupdate l <span class="mi">0</span> hempty)
  (hinit (l + <span class="mi">1</span>) sz hempty) /\
hupdate l <span class="mi">0</span> (hinit (l + <span class="mi">1</span>) sz hempty) =
hunion (hupdate l <span class="mi">0</span> hempty) (hinit (l + <span class="mi">1</span>) sz hempty)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2dd" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2dd"><span class="nb">red</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>sz</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHsz</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
valid_N l sz (hinit l sz hempty)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_N (l + <span class="mi">1</span>) sz (hinit (l + <span class="mi">1</span>) sz hempty) /\
hdisjoint (hupdate l <span class="mi">0</span> hempty)
  (hinit (l + <span class="mi">1</span>) sz hempty) /\
hupdate l <span class="mi">0</span> (hinit (l + <span class="mi">1</span>) sz hempty) =
hunion (hupdate l <span class="mi">0</span> hempty) (hinit (l + <span class="mi">1</span>) sz hempty)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2de" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2de"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>sz</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHsz</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
valid_N l sz (hinit l sz hempty)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_N (l + <span class="mi">1</span>) sz (hinit (l + <span class="mi">1</span>) sz hempty)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk2df" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>sz</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHsz</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
valid_N l sz (hinit l sz hempty)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk2df"><hr></label><div class="goal-conclusion">hdisjoint (hupdate l <span class="mi">0</span> hempty)
  (hinit (l + <span class="mi">1</span>) sz hempty) /\
hupdate l <span class="mi">0</span> (hinit (l + <span class="mi">1</span>) sz hempty) =
hunion (hupdate l <span class="mi">0</span> hempty) (hinit (l + <span class="mi">1</span>) sz hempty)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2e0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2e0"><span class="nb">apply</span> IHsz.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>sz</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHsz</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
valid_N l sz (hinit l sz hempty)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisjoint (hupdate l <span class="mi">0</span> hempty)
  (hinit (l + <span class="mi">1</span>) sz hempty) /\
hupdate l <span class="mi">0</span> (hinit (l + <span class="mi">1</span>) sz hempty) =
hunion (hupdate l <span class="mi">0</span> hempty) (hinit (l + <span class="mi">1</span>) sz hempty)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2e1" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2e1"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>sz</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHsz</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
valid_N l sz (hinit l sz hempty)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisjoint (hupdate l <span class="mi">0</span> hempty)
  (hinit (l + <span class="mi">1</span>) sz hempty)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk2e2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>sz</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHsz</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
valid_N l sz (hinit l sz hempty)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk2e2"><hr></label><div class="goal-conclusion">hupdate l <span class="mi">0</span> (hinit (l + <span class="mi">1</span>) sz hempty) =
hunion (hupdate l <span class="mi">0</span> hempty) (hinit (l + <span class="mi">1</span>) sz hempty)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2e3" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2e3"><span class="nb">intros</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>sz</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHsz</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
valid_N l sz (hinit l sz hempty)</span></span></span><br><span><var>l, x</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hupdate l <span class="mi">0</span> hempty x = None \/
hinit (l + <span class="mi">1</span>) sz hempty x = None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk2e4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>sz</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHsz</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
valid_N l sz (hinit l sz hempty)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk2e4"><hr></label><div class="goal-conclusion">hupdate l <span class="mi">0</span> (hinit (l + <span class="mi">1</span>) sz hempty) =
hunion (hupdate l <span class="mi">0</span> hempty) (hinit (l + <span class="mi">1</span>) sz hempty)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2e5" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2e5"><span class="nb">unfold</span> hupdate, hempty <span class="nb">at</span> <span class="mi">1</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>sz</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHsz</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
valid_N l sz (hinit l sz hempty)</span></span></span><br><span><var>l, x</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> Z.eq_dec l x <span class="kr">then</span> Some <span class="mi">0</span> <span class="kr">else</span> None) = None \/
hinit (l + <span class="mi">1</span>) sz hempty x = None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk2e6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>sz</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHsz</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
valid_N l sz (hinit l sz hempty)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk2e6"><hr></label><div class="goal-conclusion">hupdate l <span class="mi">0</span> (hinit (l + <span class="mi">1</span>) sz hempty) =
hunion (hupdate l <span class="mi">0</span> hempty) (hinit (l + <span class="mi">1</span>) sz hempty)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2e7" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2e7"><span class="nb">destruct</span> (Z.eq_dec l x); <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>sz</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHsz</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
valid_N l sz (hinit l sz hempty)</span></span></span><br><span><var>l, x</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>l = x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Some <span class="mi">0</span> = None \/ hinit (l + <span class="mi">1</span>) sz hempty x = None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk2e8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>sz</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHsz</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
valid_N l sz (hinit l sz hempty)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk2e8"><hr></label><div class="goal-conclusion">hupdate l <span class="mi">0</span> (hinit (l + <span class="mi">1</span>) sz hempty) =
hunion (hupdate l <span class="mi">0</span> hempty) (hinit (l + <span class="mi">1</span>) sz hempty)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2e9" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2e9"><span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>sz</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHsz</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
valid_N l sz (hinit l sz hempty)</span></span></span><br><span><var>l, x</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>l = x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hinit (l + <span class="mi">1</span>) sz hempty x = None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk2ea" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>sz</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHsz</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
valid_N l sz (hinit l sz hempty)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk2ea"><hr></label><div class="goal-conclusion">hupdate l <span class="mi">0</span> (hinit (l + <span class="mi">1</span>) sz hempty) =
hunion (hupdate l <span class="mi">0</span> hempty) (hinit (l + <span class="mi">1</span>) sz hempty)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2eb" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2eb"><span class="nb">rewrite</span> hinit_outside <span class="bp">by</span> <span class="bp">lia</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>sz</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHsz</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
valid_N l sz (hinit l sz hempty)</span></span></span><br><span><var>l, x</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>l = x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hempty x = None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk2ec" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>sz</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHsz</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
valid_N l sz (hinit l sz hempty)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk2ec"><hr></label><div class="goal-conclusion">hupdate l <span class="mi">0</span> (hinit (l + <span class="mi">1</span>) sz hempty) =
hunion (hupdate l <span class="mi">0</span> hempty) (hinit (l + <span class="mi">1</span>) sz hempty)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2ed" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2ed"><span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>sz</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHsz</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
valid_N l sz (hinit l sz hempty)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hupdate l <span class="mi">0</span> (hinit (l + <span class="mi">1</span>) sz hempty) =
hunion (hupdate l <span class="mi">0</span> hempty) (hinit (l + <span class="mi">1</span>) sz hempty)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2ee" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2ee"><span class="nb">apply</span> heap_extensionality; <span class="nb">intros</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>sz</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHsz</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
valid_N l sz (hinit l sz hempty)</span></span></span><br><span><var>l, x</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hupdate l <span class="mi">0</span> (hinit (l + <span class="mi">1</span>) sz hempty) x =
hunion (hupdate l <span class="mi">0</span> hempty) (hinit (l + <span class="mi">1</span>) sz hempty)
  x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2ef" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2ef"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>sz</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHsz</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
valid_N l sz (hinit l sz hempty)</span></span></span><br><span><var>l, x</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> Z.eq_dec l x
 <span class="kr">then</span> Some <span class="mi">0</span>
 <span class="kr">else</span> hinit (l + <span class="mi">1</span>) sz hempty x) =
(<span class="kr">if</span> <span class="kr">if</span> Z.eq_dec l x <span class="kr">then</span> Some <span class="mi">0</span> <span class="kr">else</span> None
 <span class="kr">then</span> <span class="kr">if</span> Z.eq_dec l x <span class="kr">then</span> Some <span class="mi">0</span> <span class="kr">else</span> None
 <span class="kr">else</span> hinit (l + <span class="mi">1</span>) sz hempty x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> (Z.eq_dec l x); <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2f0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2f0"><span class="kn">Lemma</span> <span class="nf">triple_alloc</span>: <span class="kr">forall</span> <span class="nv">J</span> <span class="nv">sz</span>,
  J ‚ä¢ ‚¶É emp ‚¶Ñ  ALLOC sz  ‚¶É <span class="kr">fun</span> <span class="nv">l</span> =&gt; (l &lt;&gt; <span class="mi">0</span>) //\\ valid_N l sz ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : invariant) (<span class="nv">sz</span> : nat),
J ‚ä¢ ‚¶É emp ‚¶Ñ ALLOC sz
‚¶É <span class="kr">fun</span> <span class="nv">l</span> : Z =&gt; (l &lt;&gt; <span class="mi">0</span>) //\\ valid_N l sz ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2f1" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2f1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : invariant) (<span class="nv">sz</span> : nat),
J ‚ä¢ ‚¶É emp ‚¶Ñ ALLOC sz
‚¶É <span class="kr">fun</span> <span class="nv">l</span> : Z =&gt; (l &lt;&gt; <span class="mi">0</span>) //\\ valid_N l sz ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2f2" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2f2"><span class="nb">intros</span> J sz n h Ph.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>emp h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (ALLOC sz) h
  (<span class="kr">fun</span> <span class="nv">l</span> : Z =&gt; (l &lt;&gt; <span class="mi">0</span>) //\\ valid_N l sz) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2f3" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2f3"><span class="nb">red</span> <span class="kr">in</span> Ph; <span class="nb">subst</span> h.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (ALLOC sz) hempty
  (<span class="kr">fun</span> <span class="nv">l</span> : Z =&gt; (l &lt;&gt; <span class="mi">0</span>) //\\ valid_N l sz) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2f4" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2f4"><span class="nb">destruct</span> n; <span class="nb">constructor</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h</span> : heap,
hdisj3 hempty hj hf -&gt;
h = hunion hempty (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (ALLOC sz, h)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk2f5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk2f5"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 hempty hj hf -&gt;
h = hunion hempty (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (ALLOC sz, h) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n c&#39; h1&#39;
    (<span class="kr">fun</span> <span class="nv">l</span> : Z =&gt; (l &lt;&gt; <span class="mi">0</span>) //\\ valid_N l sz) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2f6" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2f6">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h</span> : heap,
hdisj3 hempty hj hf -&gt;
h = hunion hempty (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (ALLOC sz, h)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2f7" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2f7"><span class="nb">intros</span>; <span class="nb">intro</span> ST.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj, h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>h = hunion hempty (hunion hj hf)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>ST</var><span class="hyp-type"><b>: </b><span>erroneous (ALLOC sz, h)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">inv ST.</span><span class="alectryon-wsp"> 
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2f8" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2f8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 hempty hj hf -&gt;
h = hunion hempty (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (ALLOC sz, h) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n c&#39; h1&#39;
    (<span class="kr">fun</span> <span class="nv">l</span> : Z =&gt; (l &lt;&gt; <span class="mi">0</span>) //\\ valid_N l sz) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2f9" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2f9"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj, h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>h = hunion hempty (hunion hj hf)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (ALLOC sz, h) (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n c&#39; h1&#39;
    (<span class="kr">fun</span> <span class="nv">l</span> : Z =&gt; (l &lt;&gt; <span class="mi">0</span>) //\\ valid_N l sz) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2fa" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2fa"><span class="nb">rewrite</span> hunion_empty <span class="kr">in</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj, h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>h = hunion hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (ALLOC sz, h) (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n c&#39; h1&#39;
    (<span class="kr">fun</span> <span class="nv">l</span> : Z =&gt; (l &lt;&gt; <span class="mi">0</span>) //\\ valid_N l sz) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2fb" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2fb"><span class="nb">subst</span> h.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (ALLOC sz, hunion hj hf) (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n c&#39; h1&#39;
    (<span class="kr">fun</span> <span class="nv">l</span> : Z =&gt; (l &lt;&gt; <span class="mi">0</span>) //\\ valid_N l sz) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2fc" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2fc">inv H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l &lt;&gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  hinit l sz (hunion hj hf) =
  hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n (PURE l) h1&#39;
    (<span class="kr">fun</span> <span class="nv">l</span> : Z =&gt; (l &lt;&gt; <span class="mi">0</span>) //\\ valid_N l sz) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk2fd" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk2fd"><span class="kr">exists</span> (<span class="nv">hinit</span> <span class="nv">l</span> <span class="nv">sz</span> <span class="nv">hempty</span>), hj; <span class="nb">intuition</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 (hinit l sz hempty) hj hf</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk2fe" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk2fe"><hr></label><div class="goal-conclusion">hinit l sz (hunion hj hf) =
hunion (hinit l sz hempty) (hunion hj hf)</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk2ff" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk2ff"><hr></label><div class="goal-conclusion">safe n (PURE l) (hinit l sz hempty)
  (<span class="kr">fun</span> <span class="nv">l</span> : Z =&gt; (l = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ valid_N l sz) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk300" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk300">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 (hinit l sz hempty) hj hf</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk301" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk301"><span class="nb">assert</span> (D: hdisjoint (hinit l sz hempty) (hunion hj hf)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisjoint (hinit l sz hempty) (hunion hj hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk302" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>hdisjoint (hinit l sz hempty) (hunion hj hf)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk302"><hr></label><div class="goal-conclusion">hdisj3 (hinit l sz hempty) hj hf</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk303" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk303">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisjoint (hinit l sz hempty) (hunion hj hf)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk304" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk304"><span class="nb">red</span>; <span class="nb">intros</span> l0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hinit l sz hempty l0 = None \/ hunion hj hf l0 = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk305" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk305"><span class="nb">assert</span> (EITHER: l &lt;= l0 &lt; l + Z.of_nat sz \/ l0 &lt; l \/ l + Z.of_nat sz &lt;= l0) <span class="bp">by</span> <span class="bp">lia</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>EITHER</var><span class="hyp-type"><b>: </b><span>l &lt;= l0 &lt; l + Z.of_nat sz \/
l0 &lt; l \/ l + Z.of_nat sz &lt;= l0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hinit l sz hempty l0 = None \/ hunion hj hf l0 = None</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk306" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk306"><span class="nb">destruct</span> EITHER.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>l &lt;= l0 &lt; l + Z.of_nat sz</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hinit l sz hempty l0 = None \/ hunion hj hf l0 = None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk307" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>l0 &lt; l \/ l + Z.of_nat sz &lt;= l0</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk307"><hr></label><div class="goal-conclusion">hinit l sz hempty l0 = None \/ hunion hj hf l0 = None</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk308" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk308"><span class="nb">right</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>l0 &lt; l \/ l + Z.of_nat sz &lt;= l0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hinit l sz hempty l0 = None \/ hunion hj hf l0 = None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">left</span>; <span class="nb">apply</span> hinit_outside; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk309" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk309">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>hdisjoint (hinit l sz hempty) (hunion hj hf)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 (hinit l sz hempty) hj hf</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input">HDISJ.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk30a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk30a">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hinit l sz (hunion hj hf) =
hunion (hinit l sz hempty) (hunion hj hf)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk30b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk30b"><span class="nb">apply</span> heap_extensionality; <span class="nb">intros</span> l0; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hinit l sz (hunion hj hf) l0 =
(<span class="kr">if</span> hinit l sz hempty l0
 <span class="kr">then</span> hinit l sz hempty l0
 <span class="kr">else</span> <span class="kr">if</span> hj l0 <span class="kr">then</span> hj l0 <span class="kr">else</span> hf l0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk30c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk30c"><span class="nb">assert</span> (EITHER: l &lt;= l0 &lt; l + Z.of_nat sz \/ l0 &lt; l \/ l + Z.of_nat sz &lt;= l0) <span class="bp">by</span> <span class="bp">lia</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>EITHER</var><span class="hyp-type"><b>: </b><span>l &lt;= l0 &lt; l + Z.of_nat sz \/
l0 &lt; l \/ l + Z.of_nat sz &lt;= l0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hinit l sz (hunion hj hf) l0 =
(<span class="kr">if</span> hinit l sz hempty l0
 <span class="kr">then</span> hinit l sz hempty l0
 <span class="kr">else</span> <span class="kr">if</span> hj l0 <span class="kr">then</span> hj l0 <span class="kr">else</span> hf l0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk30d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk30d"><span class="nb">destruct</span> EITHER.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>l &lt;= l0 &lt; l + Z.of_nat sz</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hinit l sz (hunion hj hf) l0 =
(<span class="kr">if</span> hinit l sz hempty l0
 <span class="kr">then</span> hinit l sz hempty l0
 <span class="kr">else</span> <span class="kr">if</span> hj l0 <span class="kr">then</span> hj l0 <span class="kr">else</span> hf l0)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk30e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>l0 &lt; l \/ l + Z.of_nat sz &lt;= l0</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk30e"><hr></label><div class="goal-conclusion">hinit l sz (hunion hj hf) l0 =
(<span class="kr">if</span> hinit l sz hempty l0
 <span class="kr">then</span> hinit l sz hempty l0
 <span class="kr">else</span> <span class="kr">if</span> hj l0 <span class="kr">then</span> hj l0 <span class="kr">else</span> hf l0)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk30f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk30f"><span class="nb">rewrite</span> ! hinit_inside <span class="bp">by</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>l &lt;= l0 &lt; l + Z.of_nat sz</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Some <span class="mi">0</span> = Some <span class="mi">0</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk310" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>l0 &lt; l \/ l + Z.of_nat sz &lt;= l0</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk310"><hr></label><div class="goal-conclusion">hinit l sz (hunion hj hf) l0 =
(<span class="kr">if</span> hinit l sz hempty l0
 <span class="kr">then</span> hinit l sz hempty l0
 <span class="kr">else</span> <span class="kr">if</span> hj l0 <span class="kr">then</span> hj l0 <span class="kr">else</span> hf l0)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk311" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk311"><span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>l0 &lt; l \/ l + Z.of_nat sz &lt;= l0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hinit l sz (hunion hj hf) l0 =
(<span class="kr">if</span> hinit l sz hempty l0
 <span class="kr">then</span> hinit l sz hempty l0
 <span class="kr">else</span> <span class="kr">if</span> hj l0 <span class="kr">then</span> hj l0 <span class="kr">else</span> hf l0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk312" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk312"><span class="nb">rewrite</span> ! hinit_outside <span class="bp">by</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>l0 &lt; l \/ l + Z.of_nat sz &lt;= l0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion hj hf l0 =
(<span class="kr">if</span> hempty l0
 <span class="kr">then</span> hempty l0
 <span class="kr">else</span> <span class="kr">if</span> hj l0 <span class="kr">then</span> hj l0 <span class="kr">else</span> hf l0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk313" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk313">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (PURE l) (hinit l sz hempty)
  (<span class="kr">fun</span> <span class="nv">l</span> : Z =&gt; (l = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ valid_N l sz) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk314" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk314"><span class="nb">apply</span> safe_pure.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((l = <span class="mi">0</span> -&gt; <span class="kt">False</span>) //\\ valid_N l sz)
  (hinit l sz hempty)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk315" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk315"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">l = <span class="mi">0</span> -&gt; <span class="kt">False</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk316" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk316"><hr></label><div class="goal-conclusion">valid_N l sz (hinit l sz hempty)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk317" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk317"><span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>sz, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 hempty hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : Z,
l &lt;= i &lt; l + Z.of_nat sz -&gt; hunion hj hf i = None</span></span></span><br><span><var>H7</var><span class="hyp-type"><b>: </b><span>l = <span class="mi">0</span> -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid_N l sz (hinit l sz hempty)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> valid_N_init.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk318" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk318"><span class="kn">Lemma</span> <span class="nf">triple_free</span>: <span class="kr">forall</span> <span class="nv">J</span> <span class="nv">l</span>,
  J ‚ä¢ ‚¶É valid l ‚¶Ñ FREE l ‚¶É <span class="kr">fun</span> <span class="nv">_</span> =&gt; emp ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : invariant) (<span class="nv">l</span> : addr),
J ‚ä¢ ‚¶É valid l ‚¶Ñ FREE l ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk319" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk319"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : invariant) (<span class="nv">l</span> : addr),
J ‚ä¢ ‚¶É valid l ‚¶Ñ FREE l ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk31a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk31a"><span class="nb">intros</span> J l n h Ph.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>valid l h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (FREE l) h (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk31b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk31b"><span class="nb">destruct</span> Ph <span class="kr">as</span> (v0 &amp; Ph).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (FREE l) h (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk31c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk31c"><span class="nb">assert</span> (L: h l = Some v0) <span class="bp">by</span> (<span class="nb">rewrite</span> Ph; <span class="nb">apply</span> hupdate_same).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n (FREE l) h (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk31d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk31d"><span class="nb">destruct</span> n; <span class="nb">constructor</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">l0</span> : addr, immacc l0 (FREE l) -&gt; h l0 &lt;&gt; None</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk31e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk31e"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (FREE l, h0)</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk31f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk31f"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (FREE l, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk320" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk320">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">l0</span> : addr, immacc l0 (FREE l) -&gt; h l0 &lt;&gt; None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk321" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk321"><span class="nb">cbn</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>l0 = l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">h l0 &lt;&gt; None</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk322" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk322">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (FREE l, h0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk323" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk323"><span class="nb">intros</span>; <span class="nb">intro</span> ST; inv ST.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk324" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk324"><span class="nb">cbn</span> <span class="kr">in</span> H3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>(<span class="kr">if</span> h l <span class="kr">then</span> h l <span class="kr">else</span> <span class="kr">if</span> hj l <span class="kr">then</span> hj l <span class="kr">else</span> hf l) =
None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> L <span class="kr">in</span> H3; <span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk325" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk325">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (FREE l, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk326" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk326"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (FREE l, h0) (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk327" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk327"><span class="nb">subst</span> h0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (FREE l, hunion h (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk328" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk328"><span class="nb">rewrite</span> Ph <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hupdate l v0 hempty) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (FREE l, hunion h (hunion hj hf)) (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk329" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk329">inv H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hupdate l v0 hempty) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l &lt;&gt; None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  hfree l (hunion h (hunion hj hf)) =
  hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n SKIP h1&#39; (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk32a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk32a"><span class="kr">exists</span> <span class="nv">hempty</span>, hj; <span class="nb">intuition</span> <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hupdate l v0 hempty) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 hempty hj hf</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk32b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hupdate l v0 hempty) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk32b"><hr></label><div class="goal-conclusion">hfree l (hunion h (hunion hj hf)) =
hunion hempty (hunion hj hf)</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk32c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hupdate l v0 hempty) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk32c"><hr></label><div class="goal-conclusion">safe n SKIP hempty (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk32d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk32d">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hupdate l v0 hempty) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisj3 hempty hj hf</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">HDISJ.</span><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk32e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk32e">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hupdate l v0 hempty) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hfree l (hunion h (hunion hj hf)) =
hunion hempty (hunion hj hf)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk32f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk32f"><span class="nb">assert</span> (D: hdisjoint (hupdate l v0 hempty) (hunion hj hf)) <span class="bp">by</span> HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hupdate l v0 hempty) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>hdisjoint (hupdate l v0 hempty) (hunion hj hf)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hfree l (hunion h (hunion hj hf)) =
hunion hempty (hunion hj hf)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk330" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk330"><span class="nb">rewrite</span> Ph.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hupdate l v0 hempty) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>hdisjoint (hupdate l v0 hempty) (hunion hj hf)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hfree l (hunion (hupdate l v0 hempty) (hunion hj hf)) =
hunion hempty (hunion hj hf)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk331" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk331"><span class="nb">apply</span> heap_extensionality; <span class="nb">intros</span> l0; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hupdate l v0 hempty) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>hdisjoint (hupdate l v0 hempty) (hunion hj hf)</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> Z.eq_dec l l0
 <span class="kr">then</span> None
 <span class="kr">else</span>
  <span class="kr">if</span> <span class="kr">if</span> Z.eq_dec l l0 <span class="kr">then</span> Some v0 <span class="kr">else</span> None
  <span class="kr">then</span> <span class="kr">if</span> Z.eq_dec l l0 <span class="kr">then</span> Some v0 <span class="kr">else</span> None
  <span class="kr">else</span> <span class="kr">if</span> hj l0 <span class="kr">then</span> hj l0 <span class="kr">else</span> hf l0) =
(<span class="kr">if</span> hj l0 <span class="kr">then</span> hj l0 <span class="kr">else</span> hf l0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk332" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk332"><span class="nb">destruct</span> (Z.eq_dec l l0); <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hupdate l v0 hempty) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>hdisjoint (hupdate l v0 hempty) (hunion hj hf)</span></span></span><br><span><var>l0</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>l = l0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">None = (<span class="kr">if</span> hj l0 <span class="kr">then</span> hj l0 <span class="kr">else</span> hf l0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk333" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk333"><span class="nb">subst</span> l0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hupdate l v0 hempty) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>hdisjoint (hupdate l v0 hempty) (hunion hj hf)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">None = (<span class="kr">if</span> hj l <span class="kr">then</span> hj l <span class="kr">else</span> hf l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk334" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk334"><span class="nb">destruct</span> (D l); <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hupdate l v0 hempty) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>hdisjoint (hupdate l v0 hempty) (hunion hj hf)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hupdate l v0 hempty l = None</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">None = (<span class="kr">if</span> hj l <span class="kr">then</span> hj l <span class="kr">else</span> hf l)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">rewrite</span> hupdate_same <span class="kr">in</span> H0; <span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk335" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk335">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hupdate l v0 hempty) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n SKIP hempty (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk336" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk336"><span class="nb">apply</span> safe_pure.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>contains l v0 h</span></span></span><br><span><var>L</var><span class="hyp-type"><b>: </b><span>h l = Some v0</span></span></span><br><span><var>hf, hj</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>hdisj3 (hupdate l v0 hempty) hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>hunion h (hunion hj hf) l = None -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp hempty</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> 
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab14"></a><h3 class="section">Structural rules</h3>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk337" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk337"><span class="kn">Lemma</span> <span class="nf">triple_consequence_pre</span>: <span class="kr">forall</span> <span class="nv">P&#39;</span> <span class="nv">J</span> <span class="nv">P</span> <span class="nv">c</span> <span class="nv">Q</span>,
  J ‚ä¢ ‚¶É P&#39; ‚¶Ñ c ‚¶É Q ‚¶Ñ -&gt;
  aimp P P&#39; -&gt;
  J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">P&#39;</span> : precond) (<span class="nv">J</span> : invariant) (<span class="nv">P</span> : assertion)
  (<span class="nv">c</span> : com) (<span class="nv">Q</span> : postcond),
J ‚ä¢ ‚¶É P&#39; ‚¶Ñ c ‚¶É Q ‚¶Ñ -&gt; P --&gt;&gt; P&#39; -&gt; J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk338" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk338"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">P&#39;</span> : precond) (<span class="nv">J</span> : invariant) (<span class="nv">P</span> : assertion)
  (<span class="nv">c</span> : com) (<span class="nv">Q</span> : postcond),
J ‚ä¢ ‚¶É P&#39; ‚¶Ñ c ‚¶É Q ‚¶Ñ -&gt; P --&gt;&gt; P&#39; -&gt; J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk339" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk339"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P'</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P&#39; ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>P --&gt;&gt; P&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk33a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk33a"><span class="nb">intros</span> n h Ph.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P'</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P&#39; ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>P --&gt;&gt; P&#39;</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk33b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk33b"><span class="nb">apply</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P'</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P&#39; ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>P --&gt;&gt; P&#39;</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P&#39; h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk33c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk33c"><span class="kn">Lemma</span> <span class="nf">safe_consequence</span>:
  <span class="kr">forall</span> (<span class="nv">Q</span> <span class="nv">Q&#39;</span>: postcond) (<span class="nv">J</span>: invariant),
  (<span class="kr">forall</span> <span class="nv">v</span>, aimp (Q&#39; v) (Q v)) -&gt;
  <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">c</span> <span class="nv">h</span>,
  safe n c h Q&#39; J -&gt;
  safe n c h Q J.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Q</span> <span class="nv">Q&#39;</span> : postcond) (<span class="nv">J</span> : invariant),
(<span class="kr">forall</span> <span class="nv">v</span> : Z, Q&#39; v --&gt;&gt; Q v) -&gt;
<span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q&#39; J -&gt; safe n c h Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk33d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk33d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Q</span> <span class="nv">Q&#39;</span> : postcond) (<span class="nv">J</span> : invariant),
(<span class="kr">forall</span> <span class="nv">v</span> : Z, Q&#39; v --&gt;&gt; Q v) -&gt;
<span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q&#39; J -&gt; safe n c h Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk33e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk33e"><span class="nb">induction</span> n; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, Q&#39; v --&gt;&gt; Q v</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">0</span> c h Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe <span class="mi">0</span> c h Q J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk33f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, Q&#39; v --&gt;&gt; Q v</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q&#39; J -&gt; safe n c h Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q&#39; J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk33f"><hr></label><div class="goal-conclusion">safe (S n) c h Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk340" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk340">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, Q&#39; v --&gt;&gt; Q v</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">0</span> c h Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe <span class="mi">0</span> c h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk341" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk341">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, Q&#39; v --&gt;&gt; Q v</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q&#39; J -&gt; safe n c h Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>safe (S n) c h Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n) c h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk342" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk342">inv H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, Q&#39; v --&gt;&gt; Q v</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q&#39; J -&gt; safe n c h Q J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Q&#39; v h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n) (PURE v) h Q J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk343" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, Q&#39; v --&gt;&gt; Q v</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q&#39; J -&gt; safe n c h Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk343"><hr></label><div class="goal-conclusion">safe (S n) c h Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk344" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk344">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, Q&#39; v --&gt;&gt; Q v</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q&#39; J -&gt; safe n c h Q J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Q&#39; v h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n) (PURE v) h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk345" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk345"><span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, Q&#39; v --&gt;&gt; Q v</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q&#39; J -&gt; safe n c h Q J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Q&#39; v h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q v h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> H; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk346" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk346">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, Q&#39; v --&gt;&gt; Q v</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q&#39; J -&gt; safe n c h Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n) c h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk347" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk347"><span class="nb">constructor</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, Q&#39; v --&gt;&gt; Q v</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q&#39; J -&gt; safe n c h Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk348" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk348"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, Q&#39; v --&gt;&gt; Q v</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q&#39; J -&gt; safe n c h Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk349" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk349"><span class="nb">edestruct</span> STEP <span class="kr">as</span> (h1&#39; &amp; hj&#39; &amp; A &amp; B &amp; C &amp; D); <span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, Q&#39; v --&gt;&gt; Q v</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap), safe n c h Q&#39; J -&gt; safe n c h Q J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kr">exists</span> <span class="nv">h1&#39;</span>, hj&#39;; <span class="nb">intuition</span> <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk34a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk34a"><span class="kn">Lemma</span> <span class="nf">triple_consequence_post</span>:
  <span class="kr">forall</span> <span class="nv">Q&#39;</span> <span class="nv">J</span> <span class="nv">P</span> <span class="nv">c</span> <span class="nv">Q</span>,
  J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q&#39; ‚¶Ñ -&gt;
  (<span class="kr">forall</span> <span class="nv">v</span>, aimp (Q&#39; v) (Q v)) -&gt;
  J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Q&#39;</span> : postcond) (<span class="nv">J</span> : invariant) (<span class="nv">P</span> : precond)
  (<span class="nv">c</span> : com) (<span class="nv">Q</span> : Z -&gt; assertion),
J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q&#39; ‚¶Ñ -&gt;
(<span class="kr">forall</span> <span class="nv">v</span> : Z, Q&#39; v --&gt;&gt; Q v) -&gt; J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk34b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk34b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">Q&#39;</span> : postcond) (<span class="nv">J</span> : invariant) (<span class="nv">P</span> : precond)
  (<span class="nv">c</span> : com) (<span class="nv">Q</span> : Z -&gt; assertion),
J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q&#39; ‚¶Ñ -&gt;
(<span class="kr">forall</span> <span class="nv">v</span> : Z, Q&#39; v --&gt;&gt; Q v) -&gt; J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk34c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk34c"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q&#39; ‚¶Ñ</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, Q&#39; v --&gt;&gt; Q v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk34d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk34d"><span class="nb">intros</span> n h Ph.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q&#39; ‚¶Ñ</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, Q&#39; v --&gt;&gt; Q v</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> safe_consequence <span class="kr">with</span> Q&#39;; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk34e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk34e"><span class="kn">Lemma</span> <span class="nf">triple_exists_pre</span>: <span class="kr">forall</span> {<span class="nv">X</span>: <span class="kt">Type</span>} <span class="nv">J</span> (<span class="nv">P</span>: X -&gt; assertion) <span class="nv">c</span> <span class="nv">Q</span>,
  (<span class="kr">forall</span> <span class="nv">v</span>, J ‚ä¢ ‚¶É P v ‚¶Ñ c ‚¶É Q ‚¶Ñ) -&gt;
  J ‚ä¢ ‚¶É aexists P ‚¶Ñ c ‚¶É Q ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">J</span> : invariant) (<span class="nv">P</span> : X -&gt; assertion)
  (<span class="nv">c</span> : com) (<span class="nv">Q</span> : postcond),
(<span class="kr">forall</span> <span class="nv">v</span> : X, J ‚ä¢ ‚¶É P v ‚¶Ñ c ‚¶É Q ‚¶Ñ) -&gt;
J ‚ä¢ ‚¶É aexists P ‚¶Ñ c ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk34f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk34f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">J</span> : invariant) (<span class="nv">P</span> : X -&gt; assertion)
  (<span class="nv">c</span> : com) (<span class="nv">Q</span> : postcond),
(<span class="kr">forall</span> <span class="nv">v</span> : X, J ‚ä¢ ‚¶É P v ‚¶Ñ c ‚¶É Q ‚¶Ñ) -&gt;
J ‚ä¢ ‚¶É aexists P ‚¶Ñ c ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk350" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk350"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X -&gt; assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : X, J ‚ä¢ ‚¶É P v ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">J ‚ä¢ ‚¶É aexists P ‚¶Ñ c ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk351" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk351"><span class="nb">intros</span> n h Ph.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X -&gt; assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : X, J ‚ä¢ ‚¶É P v ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>aexists P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk352" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk352"><span class="nb">destruct</span> Ph <span class="kr">as</span> (v &amp; Ph).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X -&gt; assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : X, J ‚ä¢ ‚¶É P v ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P v h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk353" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk353"><span class="nb">apply</span> (H v).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>X -&gt; assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : X, J ‚ä¢ ‚¶É P v ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P v h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P v h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk354" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk354"><span class="kn">Lemma</span> <span class="nf">triple_simple_conj_pre</span>: <span class="kr">forall</span> <span class="nv">J</span> (<span class="nv">P1</span>: <span class="kt">Prop</span>) <span class="nv">P2</span> <span class="nv">c</span> <span class="nv">Q</span>,
  (P1 -&gt; J ‚ä¢ ‚¶É P2 ‚¶Ñ c ‚¶É Q ‚¶Ñ) -&gt;
  J ‚ä¢ ‚¶É P1 //\\ P2 ‚¶Ñ c ‚¶É Q ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : invariant) (<span class="nv">P1</span> : <span class="kt">Prop</span>) (<span class="nv">P2</span> : precond)
  (<span class="nv">c</span> : com) (<span class="nv">Q</span> : postcond),
(P1 -&gt; J ‚ä¢ ‚¶É P2 ‚¶Ñ c ‚¶É Q ‚¶Ñ) -&gt;
J ‚ä¢ ‚¶É P1 //\\ P2 ‚¶Ñ c ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk355" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk355"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : invariant) (<span class="nv">P1</span> : <span class="kt">Prop</span>) (<span class="nv">P2</span> : precond)
  (<span class="nv">c</span> : com) (<span class="nv">Q</span> : postcond),
(P1 -&gt; J ‚ä¢ ‚¶É P2 ‚¶Ñ c ‚¶É Q ‚¶Ñ) -&gt;
J ‚ä¢ ‚¶É P1 //\\ P2 ‚¶Ñ c ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk356" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk356"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P1</var><span class="hyp-type"><b>: </b><span><span class="kt">Prop</span></span></span></span><br><span><var>P2</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>P1 -&gt; J ‚ä¢ ‚¶É P2 ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">J ‚ä¢ ‚¶É P1 //\\ P2 ‚¶Ñ c ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk357" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk357"><span class="nb">intros</span> n h Ph.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P1</var><span class="hyp-type"><b>: </b><span><span class="kt">Prop</span></span></span></span><br><span><var>P2</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>P1 -&gt; J ‚ä¢ ‚¶É P2 ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>(P1 //\\ P2) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk358" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk358"><span class="nb">destruct</span> Ph.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P1</var><span class="hyp-type"><b>: </b><span><span class="kt">Prop</span></span></span></span><br><span><var>P2</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>P1 -&gt; J ‚ä¢ ‚¶É P2 ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>P1</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>P2 h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> H; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk359" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk359"><span class="kn">Lemma</span> <span class="nf">triple_or</span>: <span class="kr">forall</span> <span class="nv">J</span> <span class="nv">P</span> <span class="nv">c</span> <span class="nv">Q</span> <span class="nv">P&#39;</span> <span class="nv">Q&#39;</span>,
  J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ -&gt; J ‚ä¢ ‚¶É P&#39; ‚¶Ñ c ‚¶É Q&#39; ‚¶Ñ -&gt;
  J ‚ä¢ ‚¶É aor P P&#39; ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> =&gt; aor (Q v) (Q&#39; v) ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : invariant) (<span class="nv">P</span> : precond) (<span class="nv">c</span> : com)
  (<span class="nv">Q</span> : postcond) (<span class="nv">P&#39;</span> : precond) (<span class="nv">Q&#39;</span> : postcond),
J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ -&gt;
J ‚ä¢ ‚¶É P&#39; ‚¶Ñ c ‚¶É Q&#39; ‚¶Ñ -&gt;
J ‚ä¢ ‚¶É aor P P&#39; ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aor (Q v) (Q&#39; v) ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk35a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk35a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : invariant) (<span class="nv">P</span> : precond) (<span class="nv">c</span> : com)
  (<span class="nv">Q</span> : postcond) (<span class="nv">P&#39;</span> : precond) (<span class="nv">Q&#39;</span> : postcond),
J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ -&gt;
J ‚ä¢ ‚¶É P&#39; ‚¶Ñ c ‚¶É Q&#39; ‚¶Ñ -&gt;
J ‚ä¢ ‚¶É aor P P&#39; ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aor (Q v) (Q&#39; v) ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk35b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk35b"><span class="nb">intros until</span> Q&#39;; <span class="nb">intros</span> TR1 TR2 n h [Ph | P&#39;h].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR1</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>TR2</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P&#39; ‚¶Ñ c ‚¶É Q&#39; ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aor (Q v) (Q&#39; v)) J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk35c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR1</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>TR2</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P&#39; ‚¶Ñ c ‚¶É Q&#39; ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>P'h</var><span class="hyp-type"><b>: </b><span>P&#39; h</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk35c"><hr></label><div class="goal-conclusion">safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aor (Q v) (Q&#39; v)) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk35d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk35d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR1</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>TR2</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P&#39; ‚¶Ñ c ‚¶É Q&#39; ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aor (Q v) (Q&#39; v)) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk35e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk35e"><span class="nb">apply</span> safe_consequence <span class="kr">with</span> Q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR1</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>TR2</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P&#39; ‚¶Ñ c ‚¶É Q&#39; ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z, Q v --&gt;&gt; aor (Q v) (Q&#39; v)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk35f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR1</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>TR2</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P&#39; ‚¶Ñ c ‚¶É Q&#39; ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk35f"><hr></label><div class="goal-conclusion">safe n c h Q J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk360" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk360"><span class="nb">intros</span> v1 h1; <span class="nb">red</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR1</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>TR2</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P&#39; ‚¶Ñ c ‚¶É Q&#39; ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c h Q J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> TR1; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk361" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk361">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR1</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>TR2</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P&#39; ‚¶Ñ c ‚¶É Q&#39; ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>P'h</var><span class="hyp-type"><b>: </b><span>P&#39; h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aor (Q v) (Q&#39; v)) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk362" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk362"><span class="nb">apply</span> safe_consequence <span class="kr">with</span> Q&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR1</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>TR2</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P&#39; ‚¶Ñ c ‚¶É Q&#39; ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>P'h</var><span class="hyp-type"><b>: </b><span>P&#39; h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z, Q&#39; v --&gt;&gt; aor (Q v) (Q&#39; v)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk363" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR1</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>TR2</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P&#39; ‚¶Ñ c ‚¶É Q&#39; ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>P'h</var><span class="hyp-type"><b>: </b><span>P&#39; h</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk363"><hr></label><div class="goal-conclusion">safe n c h Q&#39; J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk364" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk364"><span class="nb">intros</span> v1 h1; <span class="nb">red</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>invariant</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>TR1</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>TR2</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P&#39; ‚¶Ñ c ‚¶É Q&#39; ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>P'h</var><span class="hyp-type"><b>: </b><span>P&#39; h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c h Q&#39; J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> TR2; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk365" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk365"><span class="kn">Lemma</span> <span class="nf">safe_and</span>: <span class="kr">forall</span> <span class="nv">J</span> <span class="nv">Q</span> <span class="nv">Q&#39;</span>,
  precise J -&gt;
  <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">c</span> <span class="nv">h</span>,
  safe n c h Q J -&gt; safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> =&gt; aand (Q v) (Q&#39; v)) J.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : assertion) (<span class="nv">Q</span> <span class="nv">Q&#39;</span> : postcond),
precise J -&gt;
<span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt;
safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk366" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk366"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : assertion) (<span class="nv">Q</span> <span class="nv">Q&#39;</span> : postcond),
precise J -&gt;
<span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt;
safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk367" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk367"><span class="nb">induction</span> n; <span class="nb">intros</span> c h S S&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">0</span> c h Q J</span></span></span><br><span><var>S'</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">0</span> c h Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe <span class="mi">0</span> c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk368" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>safe (Datatypes.S n) c h Q J</span></span></span><br><span><var>S'</var><span class="hyp-type"><b>: </b><span>safe (Datatypes.S n) c h Q&#39; J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk368"><hr></label><div class="goal-conclusion">safe (Datatypes.S n) c h
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</div></blockquote></div></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk369" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk369">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">0</span> c h Q J</span></span></span><br><span><var>S'</var><span class="hyp-type"><b>: </b><span>safe <span class="mi">0</span> c h Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe <span class="mi">0</span> c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk36a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk36a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>safe (Datatypes.S n) c h Q J</span></span></span><br><span><var>S'</var><span class="hyp-type"><b>: </b><span>safe (Datatypes.S n) c h Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (Datatypes.S n) c h
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk36b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk36b">inv S; inv S&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Q v h</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Q&#39; v h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n) (PURE v) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v))
  J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk36c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Q v h</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kt">False</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
immacc l (PURE v) -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (PURE v, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (PURE v, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk36c"><hr></label><div class="goal-conclusion">safe (S n) (PURE v) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v))
  J</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk36d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt;
safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (PURE v, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (PURE v, h0)</span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
immacc l (PURE v) -&gt; h l &lt;&gt; None</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kt">False</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Q&#39; v h</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk36d"><hr></label><div class="goal-conclusion">safe (S n) (PURE v) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v))
  J</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk36e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt;
safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk36e"><hr></label><div class="goal-conclusion">safe (S n) c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk36f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk36f">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Q v h</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>Q&#39; v h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n) (PURE v) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v))
  J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">constructor</span>; <span class="nb">split</span>; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk370" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk370">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Q v h</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kt">False</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
immacc l (PURE v) -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (PURE v, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (PURE v, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n) (PURE v) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v))
  J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">contradiction</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk371" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk371">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (PURE v, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (PURE v, h0)</span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr,
immacc l (PURE v) -&gt; h l &lt;&gt; None</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kt">False</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Q&#39; v h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n) (PURE v) h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v))
  J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">contradiction</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk372" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk372">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe (S n) c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk373" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk373"><span class="nb">constructor</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk374" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk374">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk375" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk375"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk376" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk376"><span class="nb">edestruct</span> STEP <span class="kr">as</span> (h1&#39; &amp; hj&#39; &amp; D&#39; &amp; E&#39; &amp; J&#39; &amp; SAFE&#39;); <span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk377" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk377"><span class="nb">edestruct</span> STEP0 <span class="kr">as</span> (h1&#39;&#39; &amp; hj&#39;&#39; &amp; D&#39;&#39; &amp; E&#39;&#39; &amp; J&#39;&#39; &amp; SAFE&#39;&#39;); <span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D''</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39;&#39; hj&#39;&#39; hf</span></span></span><br><span><var>E''</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39;&#39; (hunion hj&#39;&#39; hf)</span></span></span><br><span><var>J''</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>SAFE''</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39;&#39; Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk378" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk378"><span class="nb">assert</span> (hj&#39; = hj&#39;&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D''</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39;&#39; hj&#39;&#39; hf</span></span></span><br><span><var>E''</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39;&#39; (hunion hj&#39;&#39; hf)</span></span></span><br><span><var>J''</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>SAFE''</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39;&#39; Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hj&#39; = hj&#39;&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk379" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt;
safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D''</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39;&#39; hj&#39;&#39; hf</span></span></span><br><span><var>E''</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39;&#39; (hunion hj&#39;&#39; hf)</span></span></span><br><span><var>J''</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>SAFE''</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39;&#39; Q&#39; J</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>hj&#39; = hj&#39;&#39;</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk379"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk37a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk37a">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D''</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39;&#39; hj&#39;&#39; hf</span></span></span><br><span><var>E''</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39;&#39; (hunion hj&#39;&#39; hf)</span></span></span><br><span><var>J''</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>SAFE''</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39;&#39; Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hj&#39; = hj&#39;&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk37b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk37b"><span class="nb">apply</span> H <span class="kr">with</span> (hunion h1&#39; hf) (hunion h1&#39;&#39; hf); <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D''</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39;&#39; hj&#39;&#39; hf</span></span></span><br><span><var>E''</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39;&#39; (hunion hj&#39;&#39; hf)</span></span></span><br><span><var>J''</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>SAFE''</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39;&#39; Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisjoint hj&#39; (hunion h1&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk37c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt;
safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D''</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39;&#39; hj&#39;&#39; hf</span></span></span><br><span><var>E''</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39;&#39; (hunion hj&#39;&#39; hf)</span></span></span><br><span><var>J''</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>SAFE''</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39;&#39; Q&#39; J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk37c"><hr></label><div class="goal-conclusion">hdisjoint hj&#39;&#39; (hunion h1&#39;&#39; hf)</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk37d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt;
safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D''</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39;&#39; hj&#39;&#39; hf</span></span></span><br><span><var>E''</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39;&#39; (hunion hj&#39;&#39; hf)</span></span></span><br><span><var>J''</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>SAFE''</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39;&#39; Q&#39; J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk37d"><hr></label><div class="goal-conclusion">hunion hj&#39; (hunion h1&#39; hf) =
hunion hj&#39;&#39; (hunion h1&#39;&#39; hf)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk37e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk37e">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D''</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39;&#39; hj&#39;&#39; hf</span></span></span><br><span><var>E''</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39;&#39; (hunion hj&#39;&#39; hf)</span></span></span><br><span><var>J''</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>SAFE''</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39;&#39; Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisjoint hj&#39;&#39; (hunion h1&#39;&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk37f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt;
safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D''</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39;&#39; hj&#39;&#39; hf</span></span></span><br><span><var>E''</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39;&#39; (hunion hj&#39;&#39; hf)</span></span></span><br><span><var>J''</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>SAFE''</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39;&#39; Q&#39; J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk37f"><hr></label><div class="goal-conclusion">hunion hj&#39; (hunion h1&#39; hf) =
hunion hj&#39;&#39; (hunion h1&#39;&#39; hf)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk380" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk380">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D''</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39;&#39; hj&#39;&#39; hf</span></span></span><br><span><var>E''</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39;&#39; (hunion hj&#39;&#39; hf)</span></span></span><br><span><var>J''</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>SAFE''</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39;&#39; Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion hj&#39; (hunion h1&#39; hf) =
hunion hj&#39;&#39; (hunion h1&#39;&#39; hf)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk381" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk381"><span class="nb">rewrite</span> ! (hunion_comm hf) <span class="bp">by</span> HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D''</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39;&#39; hj&#39;&#39; hf</span></span></span><br><span><var>E''</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39;&#39; (hunion hj&#39;&#39; hf)</span></span></span><br><span><var>J''</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>SAFE''</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39;&#39; Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion hj&#39; (hunion hf h1&#39;) =
hunion hj&#39;&#39; (hunion hf h1&#39;&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk382" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk382"><span class="nb">rewrite</span> &lt;- ! hunion_assoc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D''</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39;&#39; hj&#39;&#39; hf</span></span></span><br><span><var>E''</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39;&#39; (hunion hj&#39;&#39; hf)</span></span></span><br><span><var>J''</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>SAFE''</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39;&#39; Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion (hunion hj&#39; hf) h1&#39; =
hunion (hunion hj&#39;&#39; hf) h1&#39;&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk383" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk383"><span class="nb">rewrite</span> (hunion_comm h1&#39;), (hunion_comm h1&#39;&#39;) <span class="bp">by</span> HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D''</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39;&#39; hj&#39;&#39; hf</span></span></span><br><span><var>E''</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39;&#39; (hunion hj&#39;&#39; hf)</span></span></span><br><span><var>J''</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>SAFE''</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39;&#39; Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h1&#39; (hunion hj&#39; hf) =
hunion h1&#39;&#39; (hunion hj&#39;&#39; hf)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk384" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk384">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>h1'', hj''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D''</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39;&#39; hj&#39;&#39; hf</span></span></span><br><span><var>E''</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39;&#39; (hunion hj&#39;&#39; hf)</span></span></span><br><span><var>J''</var><span class="hyp-type"><b>: </b><span>J hj&#39;&#39;</span></span></span><br><span><var>SAFE''</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39;&#39; Q&#39; J</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>hj&#39; = hj&#39;&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk385" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk385"><span class="nb">subst</span> hj&#39;&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>h1''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>J''</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>E''</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39;&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>D''</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39;&#39; hj&#39; hf</span></span></span><br><span><var>SAFE''</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39;&#39; Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk386" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk386"><span class="nb">assert</span> (h1&#39; = h1&#39;&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>h1''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>J''</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>E''</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39;&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>D''</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39;&#39; hj&#39; hf</span></span></span><br><span><var>SAFE''</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39;&#39; Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">h1&#39; = h1&#39;&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk387" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt;
safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>h1''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>J''</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>E''</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39;&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>D''</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39;&#39; hj&#39; hf</span></span></span><br><span><var>SAFE''</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39;&#39; Q&#39; J</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>h1&#39; = h1&#39;&#39;</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk387"><hr></label><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk388" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk388">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>h1''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>J''</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>E''</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39;&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>D''</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39;&#39; hj&#39; hf</span></span></span><br><span><var>SAFE''</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39;&#39; Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">h1&#39; = h1&#39;&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk389" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk389"><span class="nb">apply</span> hunion_invert_l <span class="kr">with</span> (hunion hj&#39; hf).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>h1''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>J''</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>E''</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39;&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>D''</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39;&#39; hj&#39; hf</span></span></span><br><span><var>SAFE''</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39;&#39; Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hunion h1&#39; (hunion hj&#39; hf) =
hunion h1&#39;&#39; (hunion hj&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk38a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt;
safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>h1''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>J''</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>E''</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39;&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>D''</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39;&#39; hj&#39; hf</span></span></span><br><span><var>SAFE''</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39;&#39; Q&#39; J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk38a"><hr></label><div class="goal-conclusion">hdisjoint h1&#39; (hunion hj&#39; hf)</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk38b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt;
safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>h1''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>J''</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>E''</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39;&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>D''</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39;&#39; hj&#39; hf</span></span></span><br><span><var>SAFE''</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39;&#39; Q&#39; J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk38b"><hr></label><div class="goal-conclusion">hdisjoint h1&#39;&#39; (hunion hj&#39; hf)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk38c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk38c"><span class="bp">congruence</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>h1''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>J''</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>E''</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39;&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>D''</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39;&#39; hj&#39; hf</span></span></span><br><span><var>SAFE''</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39;&#39; Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisjoint h1&#39; (hunion hj&#39; hf)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk38d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt;
safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>h1''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>J''</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>E''</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39;&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>D''</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39;&#39; hj&#39; hf</span></span></span><br><span><var>SAFE''</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39;&#39; Q&#39; J</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk38d"><hr></label><div class="goal-conclusion">hdisjoint h1&#39;&#39; (hunion hj&#39; hf)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk38e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk38e">HDISJ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>h1''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>J''</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>E''</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39;&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>D''</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39;&#39; hj&#39; hf</span></span></span><br><span><var>SAFE''</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39;&#39; Q&#39; J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hdisjoint h1&#39;&#39; (hunion hj&#39; hf)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">HDISJ.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk38f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk38f">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>h1''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>J''</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>E''</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39;&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>D''</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39;&#39; hj&#39; hf</span></span></span><br><span><var>SAFE''</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39;&#39; Q&#39; J</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>h1&#39; = h1&#39;&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk390" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk390"><span class="nb">subst</span> h1&#39;&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : com) (<span class="nv">h</span> : heap),
safe n c h Q J -&gt;
safe n c h Q&#39; J -&gt; safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>NOTDONE</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>NOTDONE0</var><span class="hyp-type"><b>: </b><span><span class="kr">match</span> c <span class="kr">with</span>
| PURE _ =&gt; <span class="kt">False</span>
| _ =&gt; <span class="kt">True</span>
<span class="kr">end</span></span></span></span><br><span><var>ACC0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">l</span> : addr, immacc l c -&gt; h l &lt;&gt; None</span></span></span><br><span><var>IMM0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap,
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt; ~ erroneous (c, h0)</span></span></span><br><span><var>STEP0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">hf</span> <span class="nv">hj</span> <span class="nv">h0</span> : heap) 
  (<span class="nv">c&#39;</span> : com) (<span class="nv">h&#39;</span> : heap),
hdisj3 h hj hf -&gt;
h0 = hunion h (hunion hj hf) -&gt;
J hj -&gt;
<span class="nb">red</span> (c, h0) (c&#39;, h&#39;) -&gt;
<span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\ safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>hf, hj, h0</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>hdisj3 h hj hf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>h0 = hunion h (hunion hj hf)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>J hj</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span><span class="nb">red</span> (c, h0) (c&#39;, h&#39;)</span></span></span><br><span><var>h1', hj'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D'</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E'</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br><span><var>J'</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE'</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q J</span></span></span><br><span><var>J''</var><span class="hyp-type"><b>: </b><span>J hj&#39;</span></span></span><br><span><var>SAFE''</var><span class="hyp-type"><b>: </b><span>safe n c&#39; h1&#39; Q&#39; J</span></span></span><br><span><var>D''</var><span class="hyp-type"><b>: </b><span>hdisj3 h1&#39; hj&#39; hf</span></span></span><br><span><var>E''</var><span class="hyp-type"><b>: </b><span>h&#39; = hunion h1&#39; (hunion hj&#39; hf)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">exists</span> <span class="nv">h1&#39;</span> <span class="nv">hj&#39;</span> : heap,
  hdisj3 h1&#39; hj&#39; hf /\
  h&#39; = hunion h1&#39; (hunion hj&#39; hf) /\
  J hj&#39; /\
  safe n c&#39; h1&#39; (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kr">exists</span> <span class="nv">h1&#39;</span>, hj&#39;; <span class="nb">auto</span>.</span><span class="alectryon-wsp"> 
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk391" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk391"><span class="kn">Lemma</span> <span class="nf">triple_and</span>: <span class="kr">forall</span> <span class="nv">J</span> <span class="nv">P</span> <span class="nv">c</span> <span class="nv">Q</span> <span class="nv">P&#39;</span> <span class="nv">Q&#39;</span>,
  precise J -&gt;
  J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ -&gt; J ‚ä¢ ‚¶É P&#39; ‚¶Ñ c ‚¶É Q&#39; ‚¶Ñ -&gt;
  J ‚ä¢ ‚¶É aand P P&#39; ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> =&gt; aand (Q v) (Q&#39; v) ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : assertion) (<span class="nv">P</span> : precond) (<span class="nv">c</span> : com)
  (<span class="nv">Q</span> : postcond) (<span class="nv">P&#39;</span> : precond) (<span class="nv">Q&#39;</span> : postcond),
precise J -&gt;
J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ -&gt;
J ‚ä¢ ‚¶É P&#39; ‚¶Ñ c ‚¶É Q&#39; ‚¶Ñ -&gt;
J ‚ä¢ ‚¶É aand P P&#39; ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v) ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk392" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk392"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">J</span> : assertion) (<span class="nv">P</span> : precond) (<span class="nv">c</span> : com)
  (<span class="nv">Q</span> : postcond) (<span class="nv">P&#39;</span> : precond) (<span class="nv">Q&#39;</span> : postcond),
precise J -&gt;
J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ -&gt;
J ‚ä¢ ‚¶É P&#39; ‚¶Ñ c ‚¶É Q&#39; ‚¶Ñ -&gt;
J ‚ä¢ ‚¶É aand P P&#39; ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v) ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk393" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk393"><span class="nb">intros until</span> Q&#39;; <span class="nb">intros</span> PR TR1 TR2 n h (Ph &amp; P&#39;h).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span>precond</span></span></span><br><span><var>Q'</var><span class="hyp-type"><b>: </b><span>postcond</span></span></span><br><span><var>PR</var><span class="hyp-type"><b>: </b><span>precise J</span></span></span><br><span><var>TR1</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P ‚¶Ñ c ‚¶É Q ‚¶Ñ</span></span></span><br><span><var>TR2</var><span class="hyp-type"><b>: </b><span>J ‚ä¢ ‚¶É P&#39; ‚¶Ñ c ‚¶É Q&#39; ‚¶Ñ</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Ph</var><span class="hyp-type"><b>: </b><span>P h</span></span></span><br><span><var>P'h</var><span class="hyp-type"><b>: </b><span>P&#39; h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">safe n c h (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; aand (Q v) (Q&#39; v)) J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> safe_and; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab15"></a><h1 class="section">3. Mutual exclusion</h1>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --></pre><div class="doc">
<a id="lab16"></a><h2 class="section">3.1.  Binary semaphores</h2>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --></pre><div class="doc">
A binary semaphore is a memory location that contains 0 if it is empty
    and 1 if it is busy. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">sem_invariant</span> (<span class="nv">lck</span>: addr) (<span class="nv">R</span>: assertion) : assertion :=
  aexists (<span class="kr">fun</span> <span class="nv">v</span> =&gt; contains lck v ** (<span class="kr">if</span> Z.eqb v <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)).</span></span></pre><div class="doc">
Acquiring a semaphore (the P operation) is achieved by atomically
    setting it to 0 until its previous value was not 0. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">SWAP</span> (<span class="nv">l</span>: addr) (<span class="nv">new_v</span>: Z) : com :=
  ATOMIC (LET (GET l) (<span class="kr">fun</span> <span class="nv">old_v</span> =&gt; SEQ (SET l new_v) (PURE old_v))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">ACQUIRE</span> (<span class="nv">lck</span>: addr) : com :=
  REPEAT (SWAP lck <span class="mi">0</span>).</span></span></pre><div class="doc">
Releasing a semaphore (the V operation) is achieved by atomically
    setting it to 1. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">RELEASE</span> (<span class="nv">lck</span>: addr) : com :=
  ATOMIC (SET lck <span class="mi">1</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk394" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk394"><span class="kn">Lemma</span> <span class="nf">triple_swap</span>:
  <span class="kr">forall</span> <span class="nv">lck</span> <span class="nv">R</span>,
  sem_invariant lck R ‚ä¢ ‚¶É emp ‚¶Ñ SWAP lck <span class="mi">0</span> ‚¶É <span class="kr">fun</span> <span class="nv">v</span> =&gt; <span class="kr">if</span> Z.eqb v <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">lck</span> : addr) (<span class="nv">R</span> : assertion),
sem_invariant lck R ‚ä¢ ‚¶É emp ‚¶Ñ SWAP lck <span class="mi">0</span>
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk395" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk395"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">lck</span> : addr) (<span class="nv">R</span> : assertion),
sem_invariant lck R ‚ä¢ ‚¶É emp ‚¶Ñ SWAP lck <span class="mi">0</span>
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk396" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk396"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É emp ‚¶Ñ SWAP lck <span class="mi">0</span>
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk397" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk397"><span class="nb">apply</span> triple_atomic.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É emp ** sem_invariant lck R
‚¶Ñ LET (GET lck)
    (<span class="kr">fun</span> <span class="nv">old_v</span> : Z =&gt; SEQ (SET lck <span class="mi">0</span>) (PURE old_v))
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
  (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** sem_invariant lck R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk398" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk398"><span class="nb">rewrite</span> sepconj_emp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É sem_invariant lck R
‚¶Ñ LET (GET lck)
    (<span class="kr">fun</span> <span class="nv">old_v</span> : Z =&gt; SEQ (SET lck <span class="mi">0</span>) (PURE old_v))
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
  (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** sem_invariant lck R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk399" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk399"><span class="nb">unfold</span> sem_invariant <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É aexists
      (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
       contains lck v ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R))
‚¶Ñ LET (GET lck)
    (<span class="kr">fun</span> <span class="nv">old_v</span> : Z =&gt; SEQ (SET lck <span class="mi">0</span>) (PURE old_v))
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
  (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** sem_invariant lck R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk39a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk39a"><span class="nb">apply</span> triple_exists_pre; <span class="nb">intros</span> v.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É contains lck v ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)
‚¶Ñ LET (GET lck)
    (<span class="kr">fun</span> <span class="nv">old_v</span> : Z =&gt; SEQ (SET lck <span class="mi">0</span>) (PURE old_v))
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
  (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** sem_invariant lck R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk39b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk39b"><span class="nb">eapply</span> triple_let <span class="kr">with</span>
  (Q := <span class="kr">fun</span> <span class="nv">v&#39;</span> =&gt; ((v&#39; = v) //\\ contains lck v) ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É contains lck v ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)
‚¶Ñ GET lck
‚¶É <span class="kr">fun</span> <span class="nv">v&#39;</span> : Z =&gt;
  ((v&#39; = v) //\\ contains lck v) **
  (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk39c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk39c"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v0</span> : Z,
emp
‚ä¢ ‚¶É ((v0 = v) //\\ contains lck v) **
    (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)
‚¶Ñ SEQ (SET lck <span class="mi">0</span>) (PURE v0)
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
  (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** sem_invariant lck R ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk39d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk39d"><span class="nb">apply</span> triple_frame.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É contains lck v ‚¶Ñ GET lck
‚¶É <span class="kr">fun</span> <span class="nv">v0</span> : Z =&gt; (v0 = v) //\\ contains lck v ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk39e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk39e"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v0</span> : Z,
emp
‚ä¢ ‚¶É ((v0 = v) //\\ contains lck v) **
    (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)
‚¶Ñ SEQ (SET lck <span class="mi">0</span>) (PURE v0)
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
  (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** sem_invariant lck R ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk39f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk39f"><span class="nb">apply</span> triple_get.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v0</span> : Z,
emp
‚ä¢ ‚¶É ((v0 = v) //\\ contains lck v) **
    (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)
‚¶Ñ SEQ (SET lck <span class="mi">0</span>) (PURE v0)
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
  (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** sem_invariant lck R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3a0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3a0"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v0</span> : Z,
emp
‚ä¢ ‚¶É ((v0 = v) //\\ contains lck v) **
    (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)
‚¶Ñ SEQ (SET lck <span class="mi">0</span>) (PURE v0)
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
  (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** sem_invariant lck R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3a1" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3a1"><span class="nb">intros</span> v&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v, v'</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É ((v&#39; = v) //\\ contains lck v) **
    (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)
‚¶Ñ SEQ (SET lck <span class="mi">0</span>) (PURE v&#39;)
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
  (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** sem_invariant lck R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3a2" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3a2"><span class="nb">rewrite</span> lift_pureconj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v, v'</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É (v&#39; = v) //\\
    contains lck v ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)
‚¶Ñ SEQ (SET lck <span class="mi">0</span>) (PURE v&#39;)
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
  (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** sem_invariant lck R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3a3" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3a3"><span class="nb">apply</span> triple_simple_conj_pre.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v, v'</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v&#39; = v -&gt;
emp ‚ä¢ ‚¶É contains lck v ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)
‚¶Ñ SEQ (SET lck <span class="mi">0</span>) (PURE v&#39;)
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
  (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** sem_invariant lck R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3a4" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3a4"><span class="nb">intros</span> EQ; <span class="nb">subst</span> v&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É contains lck v ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)
‚¶Ñ SEQ (SET lck <span class="mi">0</span>) (PURE v)
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
  (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** sem_invariant lck R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3a5" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3a5"><span class="nb">apply</span> triple_seq <span class="kr">with</span> (Q := contains lck <span class="mi">0</span> ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É contains lck v ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)
‚¶Ñ SET lck <span class="mi">0</span>
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt;
  contains lck <span class="mi">0</span> ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3a6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3a6"><hr></label><div class="goal-conclusion">emp ‚ä¢ ‚¶É contains lck <span class="mi">0</span> ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)
‚¶Ñ PURE v
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
  (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** sem_invariant lck R ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3a7" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3a7"><span class="nb">apply</span> triple_frame.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É contains lck v ‚¶Ñ SET lck <span class="mi">0</span>
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; contains lck <span class="mi">0</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3a8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3a8"><hr></label><div class="goal-conclusion">emp ‚ä¢ ‚¶É contains lck <span class="mi">0</span> ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)
‚¶Ñ PURE v
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
  (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** sem_invariant lck R ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3a9" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3a9"><span class="nb">apply</span> triple_consequence_pre <span class="kr">with</span> (valid lck).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É valid lck ‚¶Ñ SET lck <span class="mi">0</span>
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; contains lck <span class="mi">0</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3aa" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3aa"><hr></label><div class="goal-conclusion">contains lck v --&gt;&gt; valid lck</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3ab" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3ab"><hr></label><div class="goal-conclusion">emp ‚ä¢ ‚¶É contains lck <span class="mi">0</span> ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)
‚¶Ñ PURE v
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
  (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** sem_invariant lck R ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3ac" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3ac"><span class="nb">apply</span> triple_set.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains lck v --&gt;&gt; valid lck</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3ad" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3ad"><hr></label><div class="goal-conclusion">emp ‚ä¢ ‚¶É contains lck <span class="mi">0</span> ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)
‚¶Ñ PURE v
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
  (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** sem_invariant lck R ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3ae" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3ae"><span class="nb">red</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>contains lck v h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid lck h</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3af" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3af"><hr></label><div class="goal-conclusion">emp ‚ä¢ ‚¶É contains lck <span class="mi">0</span> ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)
‚¶Ñ PURE v
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
  (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** sem_invariant lck R ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3b0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3b0"><span class="kr">exists</span> <span class="nv">v</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É contains lck <span class="mi">0</span> ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)
‚¶Ñ PURE v
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
  (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** sem_invariant lck R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3b1" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3b1"><span class="nb">apply</span> triple_pure.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains lck <span class="mi">0</span> ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) --&gt;&gt;
(<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** sem_invariant lck R</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3b2" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3b2"><span class="nb">unfold</span> sem_invariant.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains lck <span class="mi">0</span> ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) --&gt;&gt;
(<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) **
aexists
  (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
   contains lck v ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3b3" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3b3"><span class="nb">red</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(contains lck <span class="mi">0</span> ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) **
 aexists
   (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
    contains lck v ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R))) h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3b4" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3b4"><span class="nb">rewrite</span> sepconj_comm, lift_aexists.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(contains lck <span class="mi">0</span> ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">aexists
  (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
   (contains lck x ** (<span class="kr">if</span> x =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)) **
   (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)) h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3b5" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3b5"><span class="kr">exists</span> <span class="mi">0</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(contains lck <span class="mi">0</span> ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((contains lck <span class="mi">0</span> ** (<span class="kr">if</span> <span class="mi">0</span> =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)) **
 (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)) h</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3b6" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3b6"><span class="nb">rewrite</span> Z.eqb_refl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(contains lck <span class="mi">0</span> ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((contains lck <span class="mi">0</span> ** emp) **
 (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)) h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3b7" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3b7"><span class="nb">rewrite</span> &lt;- (sepconj_comm emp), sepconj_emp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(contains lck <span class="mi">0</span> ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(contains lck <span class="mi">0</span> ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)) h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3b8" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3b8"><span class="kn">Lemma</span> <span class="nf">triple_acquire</span>:
  <span class="kr">forall</span> <span class="nv">lck</span> <span class="nv">R</span>,
  sem_invariant lck R ‚ä¢ ‚¶É emp ‚¶Ñ ACQUIRE lck ‚¶É <span class="kr">fun</span> <span class="nv">_</span> =&gt; R ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">lck</span> : addr) (<span class="nv">R</span> : assertion),
sem_invariant lck R ‚ä¢ ‚¶É emp ‚¶Ñ ACQUIRE lck
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3b9" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3b9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">lck</span> : addr) (<span class="nv">R</span> : assertion),
sem_invariant lck R ‚ä¢ ‚¶É emp ‚¶Ñ ACQUIRE lck
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3ba" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3ba"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É emp ‚¶Ñ ACQUIRE lck
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3bb" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3bb"><span class="nb">apply</span> triple_consequence_post <span class="kr">with</span> (Q&#39; := <span class="kr">fun</span> <span class="nv">v</span> =&gt; (v &lt;&gt; <span class="mi">0</span>) //\\ (<span class="kr">if</span> Z.eqb v <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É emp ‚¶Ñ ACQUIRE lck
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
  (v &lt;&gt; <span class="mi">0</span>) //\\ (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3bc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3bc"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
(v &lt;&gt; <span class="mi">0</span>) //\\ (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) --&gt;&gt; R</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3bd" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3bd"><span class="nb">apply</span> triple_repeat.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É emp ‚¶Ñ SWAP lck <span class="mi">0</span>
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3be" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3be"><hr></label><div class="goal-conclusion">(<span class="kr">if</span> <span class="mi">0</span> =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) --&gt;&gt; emp</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3bf" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3bf"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
(v &lt;&gt; <span class="mi">0</span>) //\\ (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) --&gt;&gt; R</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3c0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3c0"><span class="nb">apply</span> triple_swap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> <span class="mi">0</span> =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) --&gt;&gt; emp</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3c1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3c1"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
(v &lt;&gt; <span class="mi">0</span>) //\\ (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) --&gt;&gt; R</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3c2" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3c2"><span class="nb">rewrite</span> Z.eqb_refl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp --&gt;&gt; emp</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3c3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3c3"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
(v &lt;&gt; <span class="mi">0</span>) //\\ (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) --&gt;&gt; R</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3c4" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3c4"><span class="nb">red</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
(v &lt;&gt; <span class="mi">0</span>) //\\ (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) --&gt;&gt; R</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3c5" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3c5"><span class="nb">intros</span> v h [H1 H2].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>v &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">R h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3c6" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3c6"><span class="nb">apply</span> Z.eqb_neq <span class="kr">in</span> H1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(v =? <span class="mi">0</span>) = false</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>(<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">R h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3c7" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3c7"><span class="nb">rewrite</span> H1 <span class="kr">in</span> H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>(v =? <span class="mi">0</span>) = false</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>R h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">R h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3c8" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3c8"><span class="kn">Lemma</span> <span class="nf">triple_release</span>:
  <span class="kr">forall</span> <span class="nv">lck</span> <span class="nv">R</span>,
  precise R -&gt;
  sem_invariant lck R ‚ä¢ ‚¶É R ‚¶Ñ RELEASE lck ‚¶É <span class="kr">fun</span> <span class="nv">_</span> =&gt; emp ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">lck</span> : addr) (<span class="nv">R</span> : assertion),
precise R -&gt;
sem_invariant lck R ‚ä¢ ‚¶É R ‚¶Ñ RELEASE lck
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3c9" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3c9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">lck</span> : addr) (<span class="nv">R</span> : assertion),
precise R -&gt;
sem_invariant lck R ‚ä¢ ‚¶É R ‚¶Ñ RELEASE lck
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3ca" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3ca"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É R ‚¶Ñ RELEASE lck
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3cb" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3cb"><span class="nb">apply</span> triple_atomic.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É R ** sem_invariant lck R ‚¶Ñ SET lck <span class="mi">1</span>
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ** sem_invariant lck R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3cc" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3cc"><span class="nb">rewrite</span> sepconj_comm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É sem_invariant lck R ** R ‚¶Ñ SET lck <span class="mi">1</span>
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ** sem_invariant lck R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3cd" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3cd"><span class="nb">unfold</span> sem_invariant <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É aexists
      (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
       contains lck v ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)) **
    R ‚¶Ñ SET lck <span class="mi">1</span>
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ** sem_invariant lck R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3ce" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3ce"><span class="nb">rewrite</span> lift_aexists.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É aexists
      (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
       (contains lck x ** (<span class="kr">if</span> x =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)) **
       R) ‚¶Ñ SET lck <span class="mi">1</span>
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ** sem_invariant lck R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3cf" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3cf"><span class="nb">apply</span> triple_exists_pre.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
emp
‚ä¢ ‚¶É (contains lck v ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)) **
    R ‚¶Ñ SET lck <span class="mi">1</span>
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ** sem_invariant lck R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3d0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3d0"><span class="nb">intros</span> v.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É (contains lck v ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)) **
    R ‚¶Ñ SET lck <span class="mi">1</span>
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ** sem_invariant lck R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3d1" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3d1"><span class="nb">rewrite</span> sepconj_assoc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É contains lck v ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** R
‚¶Ñ SET lck <span class="mi">1</span> ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ** sem_invariant lck R
‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3d2" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3d2"><span class="nb">apply</span> triple_consequence_post <span class="kr">with</span> (Q&#39; := <span class="kr">fun</span> <span class="nv">_</span> =&gt; contains lck <span class="mi">1</span> ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** R).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É contains lck v ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** R
‚¶Ñ SET lck <span class="mi">1</span>
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt;
  contains lck <span class="mi">1</span> ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** R ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3d3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3d3"><hr></label><div class="goal-conclusion">Z -&gt;
contains lck <span class="mi">1</span> ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** R --&gt;&gt;
emp ** sem_invariant lck R</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3d4" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3d4"><span class="nb">apply</span> triple_frame.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É contains lck v ‚¶Ñ SET lck <span class="mi">1</span>
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; contains lck <span class="mi">1</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3d5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3d5"><hr></label><div class="goal-conclusion">Z -&gt;
contains lck <span class="mi">1</span> ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** R --&gt;&gt;
emp ** sem_invariant lck R</div></blockquote></div></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3d6" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3d6"><span class="nb">apply</span> triple_consequence_pre <span class="kr">with</span> (valid lck).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É valid lck ‚¶Ñ SET lck <span class="mi">1</span>
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; contains lck <span class="mi">1</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3d7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3d7"><hr></label><div class="goal-conclusion">contains lck v --&gt;&gt; valid lck</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3d8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3d8"><hr></label><div class="goal-conclusion">Z -&gt;
contains lck <span class="mi">1</span> ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** R --&gt;&gt;
emp ** sem_invariant lck R</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3d9" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3d9"><span class="nb">apply</span> triple_set.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains lck v --&gt;&gt; valid lck</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3da" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3da"><hr></label><div class="goal-conclusion">Z -&gt;
contains lck <span class="mi">1</span> ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** R --&gt;&gt;
emp ** sem_invariant lck R</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3db" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3db"><span class="nb">red</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>contains lck v h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid lck h</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3dc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3dc"><hr></label><div class="goal-conclusion">Z -&gt;
contains lck <span class="mi">1</span> ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** R --&gt;&gt;
emp ** sem_invariant lck R</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3dd" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3dd"><span class="kr">exists</span> <span class="nv">v</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Z -&gt;
contains lck <span class="mi">1</span> ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** R --&gt;&gt;
emp ** sem_invariant lck R</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3de" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3de"><span class="nb">intros</span> _.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains lck <span class="mi">1</span> ** (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** R --&gt;&gt;
emp ** sem_invariant lck R</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3df" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3df"><span class="nb">intros</span> h P.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>(contains lck <span class="mi">1</span> **
 (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** R) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(emp ** sem_invariant lck R) h</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3e0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3e0"><span class="nb">assert</span> ((contains lck <span class="mi">1</span> ** R) h).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>(contains lck <span class="mi">1</span> **
 (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** R) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(contains lck <span class="mi">1</span> ** R) h</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3e1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>(contains lck <span class="mi">1</span> **
 (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** R) h</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(contains lck <span class="mi">1</span> ** R) h</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3e1"><hr></label><div class="goal-conclusion">(emp ** sem_invariant lck R) h</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3e2" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3e2">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>(contains lck <span class="mi">1</span> **
 (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** R) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(contains lck <span class="mi">1</span> ** R) h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3e3" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3e3"><span class="nb">eapply</span> sepconj_imp_r; <span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>(contains lck <span class="mi">1</span> **
 (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** R) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** R --&gt;&gt; R</div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3e4" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3e4"><span class="nb">destruct</span> (v =? <span class="mi">0</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>(contains lck <span class="mi">1</span> ** emp ** R) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ** R --&gt;&gt; R</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3e5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>(contains lck <span class="mi">1</span> ** R ** R) h</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3e5"><hr></label><div class="goal-conclusion">R ** R --&gt;&gt; R</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3e6" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3e6"><span class="nb">rewrite</span> sepconj_emp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>(contains lck <span class="mi">1</span> ** emp ** R) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">R --&gt;&gt; R</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3e7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>(contains lck <span class="mi">1</span> ** R ** R) h</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3e7"><hr></label><div class="goal-conclusion">R ** R --&gt;&gt; R</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3e8" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3e8"><span class="nb">red</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>(contains lck <span class="mi">1</span> ** R ** R) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">R ** R --&gt;&gt; R</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> sepconj_self; <span class="nb">auto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3e9" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3e9">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>(contains lck <span class="mi">1</span> **
 (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** R) h</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(contains lck <span class="mi">1</span> ** R) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(emp ** sem_invariant lck R) h</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3ea" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3ea"><span class="nb">rewrite</span> sepconj_emp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>(contains lck <span class="mi">1</span> **
 (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** R) h</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(contains lck <span class="mi">1</span> ** R) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3eb" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3eb"><span class="kr">exists</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>(contains lck <span class="mi">1</span> **
 (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** R) h</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(contains lck <span class="mi">1</span> ** R) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(contains lck <span class="mi">1</span> ** (<span class="kr">if</span> <span class="mi">1</span> =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R)) h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3ec" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3ec"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>(contains lck <span class="mi">1</span> **
 (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> R) ** R) h</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(contains lck <span class="mi">1</span> ** R) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(contains lck <span class="mi">1</span> ** R) h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab17"></a><h2 class="section">3.2.  Critical regions</h2>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --></pre><div class="doc">
A critical region is a command that is run in mutual exclusion,
    while holding the associated lock. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">CRITREGION</span> (<span class="nv">lck</span>: addr) (<span class="nv">c</span>: com) :=
  SEQ (ACQUIRE lck) (LET c (<span class="kr">fun</span> <span class="nv">v</span> =&gt; SEQ (RELEASE lck) (PURE v))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3ed" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3ed"><span class="kn">Lemma</span> <span class="nf">triple_critregion</span>:
  <span class="kr">forall</span> <span class="nv">lck</span> <span class="nv">R</span> <span class="nv">c</span> <span class="nv">P</span> <span class="nv">Q</span>,
  precise R -&gt;
  emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> =&gt; Q v ** R ‚¶Ñ -&gt;
  sem_invariant lck R ‚ä¢ ‚¶É P ‚¶Ñ CRITREGION lck c ‚¶É Q ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">lck</span> : addr) (<span class="nv">R</span> : assertion) (<span class="nv">c</span> : com)
  (<span class="nv">P</span> : assertion) (<span class="nv">Q</span> : Z -&gt; assertion),
precise R -&gt;
emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ -&gt;
sem_invariant lck R ‚ä¢ ‚¶É P ‚¶Ñ CRITREGION lck c ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3ee" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3ee"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">lck</span> : addr) (<span class="nv">R</span> : assertion) (<span class="nv">c</span> : com)
  (<span class="nv">P</span> : assertion) (<span class="nv">Q</span> : Z -&gt; assertion),
precise R -&gt;
emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ -&gt;
sem_invariant lck R ‚ä¢ ‚¶É P ‚¶Ñ CRITREGION lck c ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3ef" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3ef"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É P ‚¶Ñ CRITREGION lck c ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3f0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3f0"><span class="nb">apply</span> triple_seq <span class="kr">with</span> (Q := R ** P).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É P ‚¶Ñ ACQUIRE lck
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; R ** P ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3f1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3f1"><hr></label><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É R ** P
‚¶Ñ LET c (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; SEQ (RELEASE lck) (PURE v)) ‚¶É Q
‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3f2" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3f2"><span class="nb">rewrite</span> &lt;- (sepconj_emp P) <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É emp ** P ‚¶Ñ ACQUIRE lck
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; R ** P ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3f3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3f3"><hr></label><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É R ** P
‚¶Ñ LET c (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; SEQ (RELEASE lck) (PURE v)) ‚¶É Q
‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3f4" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3f4"><span class="nb">apply</span> triple_frame.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É emp ‚¶Ñ ACQUIRE lck
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; R ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3f5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3f5"><hr></label><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É R ** P
‚¶Ñ LET c (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; SEQ (RELEASE lck) (PURE v)) ‚¶É Q
‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3f6" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3f6"><span class="nb">apply</span> triple_acquire.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É R ** P
‚¶Ñ LET c (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; SEQ (RELEASE lck) (PURE v)) ‚¶É Q
‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3f7" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3f7"><span class="nb">eapply</span> triple_let.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É R ** P ‚¶Ñ c ‚¶É <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3f8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3f8"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
sem_invariant lck R ‚ä¢ ‚¶É <span class="nl">?Q</span> v
‚¶Ñ SEQ (RELEASE lck) (PURE v) ‚¶É Q ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3f9" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3f9"><span class="nb">rewrite</span> sepconj_comm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3fa" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3fa"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
sem_invariant lck R ‚ä¢ ‚¶É <span class="nl">?Q</span> v
‚¶Ñ SEQ (RELEASE lck) (PURE v) ‚¶É Q ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3fb" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3fb"><span class="nb">rewrite</span> &lt;- sepconj_emp <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ** sem_invariant lck R ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3fc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3fc"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
sem_invariant lck R ‚ä¢ ‚¶É <span class="nl">?Q</span> v
‚¶Ñ SEQ (RELEASE lck) (PURE v) ‚¶É Q ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3fd" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3fd"><span class="nb">apply</span> triple_frame_invariant.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk3fe" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk3fe"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
sem_invariant lck R ‚ä¢ ‚¶É <span class="nl">?Q</span> v
‚¶Ñ SEQ (RELEASE lck) (PURE v) ‚¶É Q ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk3ff" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk3ff"><span class="nb">apply</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
sem_invariant lck R ‚ä¢ ‚¶É (<span class="kr">fun</span> <span class="nv">v0</span> : Z =&gt; Q v0 ** R) v
‚¶Ñ SEQ (RELEASE lck) (PURE v) ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk400" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk400"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R) v
‚¶Ñ SEQ (RELEASE lck) (PURE v) ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk401" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk401"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É Q v ** R
‚¶Ñ SEQ (RELEASE lck) (PURE v) ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk402" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk402"><span class="nb">apply</span> triple_seq <span class="kr">with</span> (Q := emp ** Q v).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É Q v ** R ‚¶Ñ RELEASE lck
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ** Q v ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk403" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk403"><hr></label><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É emp ** Q v ‚¶Ñ PURE v ‚¶É Q ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk404" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk404"><span class="nb">rewrite</span> sepconj_comm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É R ** Q v ‚¶Ñ RELEASE lck
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ** Q v ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk405" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk405"><hr></label><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É emp ** Q v ‚¶Ñ PURE v ‚¶É Q ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk406" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk406"><span class="nb">apply</span> triple_frame.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É R ‚¶Ñ RELEASE lck
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk407" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk407"><hr></label><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É emp ** Q v ‚¶Ñ PURE v ‚¶É Q ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk408" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk408"><span class="nb">apply</span> triple_release; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É emp ** Q v ‚¶Ñ PURE v ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk409" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk409"><span class="nb">rewrite</span> sepconj_emp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É Q v ‚¶Ñ PURE v ‚¶É Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk40a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk40a"><span class="nb">apply</span> triple_pure.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Q v ** R ‚¶Ñ</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q v --&gt;&gt; Q v</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">red</span>; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab18"></a><h2 class="section">3.3. Conditional critical regions</h2>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --></pre><div class="doc">
A conditional critical region (CCR), as introduced by
    Brinch-Hansen and Hoare, is a command <span class="inlinecode"><span class="id" title="var">c</span></span> that is run in mutual
    exclusion but only when a condition <span class="inlinecode"><span class="id" title="var">b</span></span> is true. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">CCR</span> (<span class="nv">lck</span>: addr) (<span class="nv">b</span>: com) (<span class="nv">c</span>: com) :=
  REPEAT (SEQ (ACQUIRE lck)
              (LET b (<span class="kr">fun</span> <span class="nv">v</span> =&gt; IFTHENELSE v (SEQ c (SEQ (RELEASE lck) (PURE <span class="mi">1</span>)))
                                            (SEQ (RELEASE lck) (PURE <span class="mi">0</span>))))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk40b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk40b"><span class="kn">Lemma</span> <span class="nf">triple_ccr</span>:
  <span class="kr">forall</span> <span class="nv">lck</span> <span class="nv">R</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">B</span> <span class="nv">P</span> <span class="nv">Q</span>,
  precise R -&gt;
  emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b ‚¶É <span class="kr">fun</span> <span class="nv">v</span> =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ -&gt;
  emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> =&gt; Q ** R ‚¶Ñ -&gt;
  sem_invariant lck R ‚ä¢ ‚¶É P ‚¶Ñ CCR lck b c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> =&gt; Q ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">lck</span> : addr) (<span class="nv">R</span> : assertion) (<span class="nv">b</span> <span class="nv">c</span> : com)
  (<span class="nv">B</span> <span class="nv">P</span> <span class="nv">Q</span> : assertion),
precise R -&gt;
emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ -&gt;
emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ -&gt;
sem_invariant lck R ‚ä¢ ‚¶É P ‚¶Ñ CCR lck b c
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk40c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk40c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">lck</span> : addr) (<span class="nv">R</span> : assertion) (<span class="nv">b</span> <span class="nv">c</span> : com)
  (<span class="nv">B</span> <span class="nv">P</span> <span class="nv">Q</span> : assertion),
precise R -&gt;
emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ -&gt;
emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ -&gt;
sem_invariant lck R ‚ä¢ ‚¶É P ‚¶Ñ CCR lck b c
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk40d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk40d"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É P ‚¶Ñ CCR lck b c
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk40e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk40e"><span class="nb">set</span> (Qloop := <span class="kr">fun</span> <span class="nv">v</span> =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É P ‚¶Ñ CCR lck b c
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk40f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk40f"><span class="nb">apply</span> triple_consequence_post <span class="kr">with</span> (<span class="kr">fun</span> <span class="nv">v</span> =&gt; (v &lt;&gt; <span class="mi">0</span>) //\\ Qloop v).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É P ‚¶Ñ CCR lck b c
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v &lt;&gt; <span class="mi">0</span>) //\\ Qloop v ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk410" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk410"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z, (v &lt;&gt; <span class="mi">0</span>) //\\ Qloop v --&gt;&gt; Q</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk411" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk411"><span class="mi">2</span>: {</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z, (v &lt;&gt; <span class="mi">0</span>) //\\ Qloop v --&gt;&gt; Q</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk412" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk412"><span class="nb">intros</span> v h (U &amp; V).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>v &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>Qloop v h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk413" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk413"><span class="nb">red</span> <span class="kr">in</span> V.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>v &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>(<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk414" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk414"><span class="nb">apply</span> Z.eqb_neq <span class="kr">in</span> U.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>(v =? <span class="mi">0</span>) = false</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>(<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk415" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk415"><span class="nb">rewrite</span> U <span class="kr">in</span> V.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>(v =? <span class="mi">0</span>) = false</span></span></span><br><span><var>V</var><span class="hyp-type"><b>: </b><span>Q h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk416" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk416">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É P ‚¶Ñ CCR lck b c
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; (v &lt;&gt; <span class="mi">0</span>) //\\ Qloop v ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk417" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk417"><span class="nb">apply</span> triple_repeat.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É P
‚¶Ñ SEQ (ACQUIRE lck)
    (LET b
       (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
        IFTHENELSE v
          (SEQ c (SEQ (RELEASE lck) (PURE <span class="mi">1</span>)))
          (SEQ (RELEASE lck) (PURE <span class="mi">0</span>)))) ‚¶É Qloop ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk418" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk418"><hr></label><div class="goal-conclusion">Qloop <span class="mi">0</span> --&gt;&gt; P</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk419" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk419"><span class="mi">2</span>: {</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Qloop <span class="mi">0</span> --&gt;&gt; P</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk41a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk41a"><span class="nb">unfold</span> Qloop.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> <span class="mi">0</span> =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q) --&gt;&gt; P</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk41b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk41b"><span class="nb">intros</span> v U.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>(<span class="kr">if</span> <span class="mi">0</span> =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q) v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P v</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk41c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk41c"><span class="nb">simpl</span> <span class="kr">in</span> U.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>U</var><span class="hyp-type"><b>: </b><span>P v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P v</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk41d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk41d">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É P
‚¶Ñ SEQ (ACQUIRE lck)
    (LET b
       (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
        IFTHENELSE v
          (SEQ c (SEQ (RELEASE lck) (PURE <span class="mi">1</span>)))
          (SEQ (RELEASE lck) (PURE <span class="mi">0</span>)))) ‚¶É Qloop ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk41e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk41e"><span class="nb">apply</span> triple_seq <span class="kr">with</span> (Q := R ** P).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É P ‚¶Ñ ACQUIRE lck
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; R ** P ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk41f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk41f"><hr></label><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É R ** P
‚¶Ñ LET b
    (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
     IFTHENELSE v (SEQ c (SEQ (RELEASE lck) (PURE <span class="mi">1</span>)))
       (SEQ (RELEASE lck) (PURE <span class="mi">0</span>))) ‚¶É Qloop ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk420" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk420">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É P ‚¶Ñ ACQUIRE lck
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; R ** P ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk421" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk421"><span class="nb">rewrite</span> &lt;- (sepconj_emp P) <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É emp ** P ‚¶Ñ ACQUIRE lck
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; R ** P ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk422" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk422"><span class="nb">apply</span> triple_frame.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É emp ‚¶Ñ ACQUIRE lck
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; R ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> triple_acquire.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk423" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk423">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É R ** P
‚¶Ñ LET b
    (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
     IFTHENELSE v (SEQ c (SEQ (RELEASE lck) (PURE <span class="mi">1</span>)))
       (SEQ (RELEASE lck) (PURE <span class="mi">0</span>))) ‚¶É Qloop ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk424" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk424"><span class="nb">rewrite</span> sepconj_comm <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É P ** R
‚¶Ñ LET b
    (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt;
     IFTHENELSE v (SEQ c (SEQ (RELEASE lck) (PURE <span class="mi">1</span>)))
       (SEQ (RELEASE lck) (PURE <span class="mi">0</span>))) ‚¶É Qloop ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk425" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk425"><span class="nb">eapply</span> triple_let.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É P ** R ‚¶Ñ b ‚¶É <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk426" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk426"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
sem_invariant lck R ‚ä¢ ‚¶É <span class="nl">?Q</span> v
‚¶Ñ IFTHENELSE v (SEQ c (SEQ (RELEASE lck) (PURE <span class="mi">1</span>)))
    (SEQ (RELEASE lck) (PURE <span class="mi">0</span>)) ‚¶É Qloop ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk427" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk427"><span class="nb">rewrite</span> &lt;- sepconj_emp <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ** sem_invariant lck R ‚ä¢ ‚¶É P ** R ‚¶Ñ b ‚¶É <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk428" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk428"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
sem_invariant lck R ‚ä¢ ‚¶É <span class="nl">?Q</span> v
‚¶Ñ IFTHENELSE v (SEQ c (SEQ (RELEASE lck) (PURE <span class="mi">1</span>)))
    (SEQ (RELEASE lck) (PURE <span class="mi">0</span>)) ‚¶É Qloop ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk429" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk429"><span class="nb">apply</span> triple_frame_invariant.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b ‚¶É <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk42a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk42a"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
sem_invariant lck R ‚ä¢ ‚¶É <span class="nl">?Q</span> v
‚¶Ñ IFTHENELSE v (SEQ c (SEQ (RELEASE lck) (PURE <span class="mi">1</span>)))
    (SEQ (RELEASE lck) (PURE <span class="mi">0</span>)) ‚¶É Qloop ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk42b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk42b"><span class="bp">eexact</span> H0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
sem_invariant lck R
‚ä¢ ‚¶É (<span class="kr">fun</span> <span class="nv">v0</span> : Z =&gt; <span class="kr">if</span> v0 =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B) v
‚¶Ñ IFTHENELSE v (SEQ c (SEQ (RELEASE lck) (PURE <span class="mi">1</span>)))
    (SEQ (RELEASE lck) (PURE <span class="mi">0</span>)) ‚¶É Qloop ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk42c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk42c"><span class="nb">intros</span> v.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R
‚ä¢ ‚¶É (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B) v
‚¶Ñ IFTHENELSE v (SEQ c (SEQ (RELEASE lck) (PURE <span class="mi">1</span>)))
    (SEQ (RELEASE lck) (PURE <span class="mi">0</span>)) ‚¶É Qloop ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk42d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk42d"><span class="nb">apply</span> triple_ifthenelse.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R
‚ä¢ ‚¶É (v &lt;&gt; <span class="mi">0</span>) //\\ (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B)
‚¶Ñ SEQ c (SEQ (RELEASE lck) (PURE <span class="mi">1</span>)) ‚¶É Qloop ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk42e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk42e"><hr></label><div class="goal-conclusion">sem_invariant lck R
‚ä¢ ‚¶É (v = <span class="mi">0</span>) //\\ (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B)
‚¶Ñ SEQ (RELEASE lck) (PURE <span class="mi">0</span>) ‚¶É Qloop ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk42f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk42f">- <span class="c">(* B succeeded *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R
‚ä¢ ‚¶É (v &lt;&gt; <span class="mi">0</span>) //\\ (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B)
‚¶Ñ SEQ c (SEQ (RELEASE lck) (PURE <span class="mi">1</span>)) ‚¶É Qloop ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk430" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk430"><span class="nb">eapply</span> triple_seq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R
‚ä¢ ‚¶É (v &lt;&gt; <span class="mi">0</span>) //\\ (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B) ‚¶Ñ c
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk431" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk431"><hr></label><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É <span class="nl">?Q</span>
‚¶Ñ SEQ (RELEASE lck) (PURE <span class="mi">1</span>) ‚¶É Qloop ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk432" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk432">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R
‚ä¢ ‚¶É (v &lt;&gt; <span class="mi">0</span>) //\\ (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B) ‚¶Ñ c
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; <span class="nl">?Q</span> ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk433" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk433"><span class="nb">eapply</span> triple_consequence_pre.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É <span class="nl">?P&#39;</span> ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk434" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk434"><hr></label><div class="goal-conclusion">(v &lt;&gt; <span class="mi">0</span>) //\\ (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B) --&gt;&gt; <span class="nl">?P&#39;</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk435" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk435"><span class="nb">rewrite</span> &lt;- sepconj_emp <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ** sem_invariant lck R ‚ä¢ ‚¶É <span class="nl">?P&#39;</span> ‚¶Ñ c
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk436" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk436"><hr></label><div class="goal-conclusion">(v &lt;&gt; <span class="mi">0</span>) //\\ (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B) --&gt;&gt; <span class="nl">?P&#39;</span></div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk437" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk437"><span class="nb">apply</span> triple_frame_invariant.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É <span class="nl">?P&#39;</span> ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk438" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk438"><hr></label><div class="goal-conclusion">(v &lt;&gt; <span class="mi">0</span>) //\\ (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B) --&gt;&gt; <span class="nl">?P&#39;</span></div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk439" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk439"><span class="bp">eexact</span> H1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(v &lt;&gt; <span class="mi">0</span>) //\\ (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B) --&gt;&gt; B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk43a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk43a"><span class="nb">intros</span> h (X &amp; Y).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>v &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>(<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk43b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk43b"><span class="nb">apply</span> Z.eqb_neq <span class="kr">in</span> X.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>(v =? <span class="mi">0</span>) = false</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>(<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk43c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk43c"><span class="nb">rewrite</span> X <span class="kr">in</span> Y.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>(v =? <span class="mi">0</span>) = false</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>B h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk43d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk43d">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É Q ** R
‚¶Ñ SEQ (RELEASE lck) (PURE <span class="mi">1</span>) ‚¶É Qloop ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk43e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk43e"><span class="nb">apply</span> triple_seq <span class="kr">with</span> (Q := emp ** Q).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É Q ** R ‚¶Ñ RELEASE lck
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ** Q ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk43f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk43f"><hr></label><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É emp ** Q ‚¶Ñ PURE <span class="mi">1</span> ‚¶É Qloop ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk440" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk440">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É Q ** R ‚¶Ñ RELEASE lck
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ** Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk441" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk441"><span class="nb">rewrite</span> sepconj_comm <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É R ** Q ‚¶Ñ RELEASE lck
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ** Q ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk442" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk442"><span class="nb">apply</span> triple_frame.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É R ‚¶Ñ RELEASE lck
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> triple_release; <span class="nb">auto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk443" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk443">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É emp ** Q ‚¶Ñ PURE <span class="mi">1</span> ‚¶É Qloop ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk444" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk444"><span class="nb">apply</span> triple_pure.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ** Q --&gt;&gt; Qloop <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk445" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk445"><span class="nb">rewrite</span> sepconj_emp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q --&gt;&gt; Qloop <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk446" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk446"><span class="nb">unfold</span> Qloop.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q --&gt;&gt; (<span class="kr">if</span> <span class="mi">1</span> =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk447" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk447"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q --&gt;&gt; Q</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">red</span>; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk448" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk448">- <span class="c">(* B failed *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R
‚ä¢ ‚¶É (v = <span class="mi">0</span>) //\\ (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B)
‚¶Ñ SEQ (RELEASE lck) (PURE <span class="mi">0</span>) ‚¶É Qloop ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk449" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk449"><span class="nb">apply</span> triple_consequence_pre <span class="kr">with</span> (P ** R).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É P ** R
‚¶Ñ SEQ (RELEASE lck) (PURE <span class="mi">0</span>) ‚¶É Qloop ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk44a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk44a"><hr></label><div class="goal-conclusion">(v = <span class="mi">0</span>) //\\ (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B) --&gt;&gt;
P ** R</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk44b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk44b"><span class="mi">2</span>: {</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(v = <span class="mi">0</span>) //\\ (<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B) --&gt;&gt;
P ** R</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk44c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk44c"><span class="nb">intros</span> h (X &amp; Y).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>v = <span class="mi">0</span></span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>(<span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(P ** R) h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk44d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk44d"><span class="nb">subst</span> v.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>Y</var><span class="hyp-type"><b>: </b><span>(<span class="kr">if</span> <span class="mi">0</span> =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(P ** R) h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk44e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk44e">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É P ** R
‚¶Ñ SEQ (RELEASE lck) (PURE <span class="mi">0</span>) ‚¶É Qloop ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk44f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk44f"><span class="nb">eapply</span> triple_seq <span class="kr">with</span> (Q := emp ** P).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É P ** R ‚¶Ñ RELEASE lck
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ** P ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk450" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk450"><hr></label><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É emp ** P ‚¶Ñ PURE <span class="mi">0</span> ‚¶É Qloop ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk451" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk451">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É P ** R ‚¶Ñ RELEASE lck
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ** P ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk452" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk452"><span class="nb">rewrite</span> sepconj_comm <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É R ** P ‚¶Ñ RELEASE lck
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ** P ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk453" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk453"><span class="nb">apply</span> triple_frame.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É R ‚¶Ñ RELEASE lck
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> triple_release; <span class="nb">auto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk454" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk454">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant lck R ‚ä¢ ‚¶É emp ** P ‚¶Ñ PURE <span class="mi">0</span> ‚¶É Qloop ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk455" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk455"><span class="nb">apply</span> triple_pure.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ** P --&gt;&gt; Qloop <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk456" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk456"><span class="nb">rewrite</span> sepconj_emp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P --&gt;&gt; Qloop <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk457" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk457"><span class="nb">unfold</span> Qloop.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P --&gt;&gt; (<span class="kr">if</span> <span class="mi">0</span> =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk458" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk458"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>lck</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>com</span></span></span><br><span><var>B, P, Q</var><span class="hyp-type"><b>: </b><span>assertion</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>precise R</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É P ** R ‚¶Ñ b
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P ** R <span class="kr">else</span> B ‚¶Ñ</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>emp ‚ä¢ ‚¶É B ‚¶Ñ c ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; Q ** R ‚¶Ñ</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; <span class="kr">if</span> v =? <span class="mi">0</span> <span class="kr">then</span> P <span class="kr">else</span> Q</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P --&gt;&gt; P</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">red</span>; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><div class="doc">
<a id="lab19"></a><h1 class="section">4. The producer/consumer problem</h1>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --></pre><div class="doc">
4.1.  With a one-place buffer and binary semaphores 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Module</span> <span class="nf">ProdCons1</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">PRODUCE</span> (<span class="nv">buff</span> <span class="nv">free</span> <span class="nv">busy</span>: addr) (<span class="nv">data</span>: Z) : com :=
  SEQ (ACQUIRE free)
      (SEQ (SET buff data)
           (RELEASE busy)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">CONSUME</span> (<span class="nv">buff</span> <span class="nv">free</span> <span class="nv">busy</span>: addr) : com :=
  SEQ (ACQUIRE busy)
      (LET (GET buff) (<span class="kr">fun</span> <span class="nv">data</span> =&gt;
           (SEQ (RELEASE free) (PURE data)))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">buffer_invariant</span> (<span class="nv">R</span>: Z -&gt; assertion) (<span class="nv">buff</span> <span class="nv">free</span> <span class="nv">busy</span>: addr) :=
    sem_invariant free (valid buff)
 ** sem_invariant busy (aexists (<span class="kr">fun</span> <span class="nv">v</span> =&gt; contains buff v ** R v)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk459" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk459"><span class="kn">Remark</span> <span class="nf">precise_buffer_invariant</span>: <span class="kr">forall</span> (<span class="nv">R</span>: Z -&gt; assertion) <span class="nv">buff</span>,
  (<span class="kr">forall</span> <span class="nv">v</span>, precise (R v)) -&gt;
  precise (aexists (<span class="kr">fun</span> <span class="nv">v</span> =&gt; contains buff v ** R v)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">R</span> : Z -&gt; assertion) (<span class="nv">buff</span> : addr),
(<span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)) -&gt;
precise
  (aexists (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; contains buff v ** R v))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk45a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk45a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">R</span> : Z -&gt; assertion) (<span class="nv">buff</span> : addr),
(<span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)) -&gt;
precise
  (aexists (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; contains buff v ** R v))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk45b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk45b"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">precise
  (aexists (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; contains buff v ** R v))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk45c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk45c"><span class="nb">apply</span> aexists_precise.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">param_precise (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; contains buff v ** R v)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk45d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk45d"><span class="nb">apply</span> sepconj_param_precise; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">param_precise (contains buff)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> contains_param_precise.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk45e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk45e"><span class="kn">Lemma</span> <span class="nf">triple_consume</span>: <span class="kr">forall</span> <span class="nv">R</span> <span class="nv">buff</span> <span class="nv">free</span> <span class="nv">busy</span>,
  buffer_invariant R buff free busy ‚ä¢
           ‚¶É emp ‚¶Ñ CONSUME buff free busy ‚¶É <span class="kr">fun</span> <span class="nv">v</span> =&gt; R v ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">R</span> : Z -&gt; assertion) (<span class="nv">buff</span> <span class="nv">free</span> <span class="nv">busy</span> : addr),
buffer_invariant R buff free busy ‚ä¢ ‚¶É emp
‚¶Ñ CONSUME buff free busy ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; R v ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk45f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk45f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">R</span> : Z -&gt; assertion) (<span class="nv">buff</span> <span class="nv">free</span> <span class="nv">busy</span> : addr),
buffer_invariant R buff free busy ‚ä¢ ‚¶É emp
‚¶Ñ CONSUME buff free busy ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; R v ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk460" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk460"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff free busy ‚ä¢ ‚¶É emp
‚¶Ñ CONSUME buff free busy ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; R v ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk461" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk461"><span class="nb">eapply</span> triple_seq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff free busy ‚ä¢ ‚¶É emp
‚¶Ñ ACQUIRE busy ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk462" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk462"><hr></label><div class="goal-conclusion">buffer_invariant R buff free busy ‚ä¢ ‚¶É 
<span class="nl">?Q</span>
‚¶Ñ LET (GET buff)
    (<span class="kr">fun</span> <span class="nv">data</span> : Z =&gt; SEQ (RELEASE free) (PURE data))
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; R v ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk463" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk463"><span class="nb">unfold</span> buffer_invariant.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant free (valid buff) **
sem_invariant busy
  (aexists (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; contains buff v ** R v))
‚ä¢ ‚¶É emp ‚¶Ñ ACQUIRE busy ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk464" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk464"><hr></label><div class="goal-conclusion">buffer_invariant R buff free busy ‚ä¢ ‚¶É 
<span class="nl">?Q</span>
‚¶Ñ LET (GET buff)
    (<span class="kr">fun</span> <span class="nv">data</span> : Z =&gt; SEQ (RELEASE free) (PURE data))
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; R v ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk465" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk465"><span class="nb">rewrite</span> sepconj_comm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant busy
  (aexists (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; contains buff v ** R v)) **
sem_invariant free (valid buff) ‚ä¢ ‚¶É emp ‚¶Ñ ACQUIRE busy
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk466" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk466"><hr></label><div class="goal-conclusion">buffer_invariant R buff free busy ‚ä¢ ‚¶É 
<span class="nl">?Q</span>
‚¶Ñ LET (GET buff)
    (<span class="kr">fun</span> <span class="nv">data</span> : Z =&gt; SEQ (RELEASE free) (PURE data))
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; R v ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk467" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk467"><span class="nb">apply</span> triple_frame_invariant.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant busy
  (aexists (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; contains buff v ** R v))
‚ä¢ ‚¶É emp ‚¶Ñ ACQUIRE busy ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk468" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk468"><hr></label><div class="goal-conclusion">buffer_invariant R buff free busy ‚ä¢ ‚¶É 
<span class="nl">?Q</span>
‚¶Ñ LET (GET buff)
    (<span class="kr">fun</span> <span class="nv">data</span> : Z =&gt; SEQ (RELEASE free) (PURE data))
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; R v ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk469" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk469"><span class="nb">apply</span> triple_acquire.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff free busy
‚ä¢ ‚¶É aexists (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; contains buff v ** R v)
‚¶Ñ LET (GET buff)
    (<span class="kr">fun</span> <span class="nv">data</span> : Z =&gt; SEQ (RELEASE free) (PURE data))
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; R v ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk46a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk46a"><span class="nb">apply</span> triple_exists_pre.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
buffer_invariant R buff free busy
‚ä¢ ‚¶É contains buff v ** R v
‚¶Ñ LET (GET buff)
    (<span class="kr">fun</span> <span class="nv">data</span> : Z =&gt; SEQ (RELEASE free) (PURE data))
‚¶É <span class="kr">fun</span> <span class="nv">v0</span> : Z =&gt; R v0 ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk46b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk46b"><span class="nb">intros</span> v.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff free busy
‚ä¢ ‚¶É contains buff v ** R v
‚¶Ñ LET (GET buff)
    (<span class="kr">fun</span> <span class="nv">data</span> : Z =&gt; SEQ (RELEASE free) (PURE data))
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; R v ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk46c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk46c"><span class="nb">eapply</span> triple_let.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff free busy
‚ä¢ ‚¶É contains buff v ** R v ‚¶Ñ GET buff ‚¶É <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk46d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk46d"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v0</span> : Z,
buffer_invariant R buff free busy ‚ä¢ ‚¶É 
<span class="nl">?Q</span> v0 ‚¶Ñ SEQ (RELEASE free) (PURE v0)
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; R v ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk46e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk46e"><span class="nb">apply</span> triple_frame.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff free busy ‚ä¢ ‚¶É contains buff v
‚¶Ñ GET buff ‚¶É <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk46f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk46f"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v0</span> : Z,
buffer_invariant R buff free busy
‚ä¢ ‚¶É (<span class="kr">fun</span> <span class="nv">v1</span> : Z =&gt; <span class="nl">?Q</span> v1 ** R v) v0
‚¶Ñ SEQ (RELEASE free) (PURE v0) ‚¶É 
<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; R v ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk470" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk470"><span class="nb">apply</span> triple_get.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v0</span> : Z,
buffer_invariant R buff free busy
‚ä¢ ‚¶É (<span class="kr">fun</span> <span class="nv">v1</span> : Z =&gt;
     (<span class="kr">fun</span> <span class="nv">v&#39;</span> : Z =&gt; (v&#39; = v) //\\ contains buff v) v1 **
     R v) v0 ‚¶Ñ SEQ (RELEASE free) (PURE v0)
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; R v ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk471" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk471"><span class="nb">intros</span> v&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v, v'</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff free busy
‚ä¢ ‚¶É (<span class="kr">fun</span> <span class="nv">v0</span> : Z =&gt;
     (<span class="kr">fun</span> <span class="nv">v&#39;</span> : Z =&gt; (v&#39; = v) //\\ contains buff v) v0 **
     R v) v&#39; ‚¶Ñ SEQ (RELEASE free) (PURE v&#39;)
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; R v ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk472" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk472"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v, v'</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff free busy
‚ä¢ ‚¶É ((v&#39; = v) //\\ contains buff v) ** R v
‚¶Ñ SEQ (RELEASE free) (PURE v&#39;) ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; R v ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk473" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk473"><span class="nb">rewrite</span> lift_pureconj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v, v'</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff free busy
‚ä¢ ‚¶É (v&#39; = v) //\\ contains buff v ** R v
‚¶Ñ SEQ (RELEASE free) (PURE v&#39;) ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; R v ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk474" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk474"><span class="nb">apply</span> triple_simple_conj_pre.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v, v'</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v&#39; = v -&gt;
buffer_invariant R buff free busy
‚ä¢ ‚¶É contains buff v ** R v
‚¶Ñ SEQ (RELEASE free) (PURE v&#39;) ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; R v ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk475" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk475"><span class="nb">intros</span> EQ; <span class="nb">subst</span> v&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff free busy
‚ä¢ ‚¶É contains buff v ** R v
‚¶Ñ SEQ (RELEASE free) (PURE v) ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; R v ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk476" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk476"><span class="nb">apply</span> triple_seq <span class="kr">with</span> (emp ** R v).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff free busy
‚ä¢ ‚¶É contains buff v ** R v ‚¶Ñ RELEASE free
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ** R v ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk477" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk477"><hr></label><div class="goal-conclusion">buffer_invariant R buff free busy ‚ä¢ ‚¶É 
emp ** R v ‚¶Ñ PURE v ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; R v ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk478" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk478"><span class="nb">unfold</span> buffer_invariant.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant free (valid buff) **
sem_invariant busy
  (aexists (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; contains buff v ** R v))
‚ä¢ ‚¶É contains buff v ** R v ‚¶Ñ RELEASE free
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ** R v ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk479" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk479"><hr></label><div class="goal-conclusion">buffer_invariant R buff free busy ‚ä¢ ‚¶É 
emp ** R v ‚¶Ñ PURE v ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; R v ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk47a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk47a"><span class="nb">apply</span> triple_frame_invariant.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant free (valid buff)
‚ä¢ ‚¶É contains buff v ** R v ‚¶Ñ RELEASE free
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ** R v ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk47b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk47b"><hr></label><div class="goal-conclusion">buffer_invariant R buff free busy ‚ä¢ ‚¶É 
emp ** R v ‚¶Ñ PURE v ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; R v ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk47c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk47c"><span class="nb">apply</span> triple_frame.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant free (valid buff) ‚ä¢ ‚¶É contains buff v
‚¶Ñ RELEASE free ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk47d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk47d"><hr></label><div class="goal-conclusion">buffer_invariant R buff free busy ‚ä¢ ‚¶É 
emp ** R v ‚¶Ñ PURE v ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; R v ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk47e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk47e"><span class="nb">eapply</span> triple_consequence_pre.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant free (valid buff) ‚ä¢ ‚¶É <span class="nl">?P&#39;</span> ‚¶Ñ RELEASE free
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk47f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk47f"><hr></label><div class="goal-conclusion">contains buff v --&gt;&gt; <span class="nl">?P&#39;</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk480" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk480"><hr></label><div class="goal-conclusion">buffer_invariant R buff free busy ‚ä¢ ‚¶É 
emp ** R v ‚¶Ñ PURE v ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; R v ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk481" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk481"><span class="nb">apply</span> triple_release.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">precise (valid buff)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk482" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk482"><hr></label><div class="goal-conclusion">contains buff v --&gt;&gt; valid buff</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk483" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk483"><hr></label><div class="goal-conclusion">buffer_invariant R buff free busy ‚ä¢ ‚¶É 
emp ** R v ‚¶Ñ PURE v ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; R v ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk484" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk484"><span class="nb">apply</span> valid_precise.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains buff v --&gt;&gt; valid buff</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk485" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk485"><hr></label><div class="goal-conclusion">buffer_invariant R buff free busy ‚ä¢ ‚¶É 
emp ** R v ‚¶Ñ PURE v ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; R v ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk486" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk486"><span class="nb">red</span>; <span class="nb">intros</span>; <span class="kr">exists</span> <span class="nv">v</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff free busy ‚ä¢ ‚¶É emp ** R v
‚¶Ñ PURE v ‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; R v ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk487" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk487"><span class="nb">apply</span> triple_pure.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ** R v --&gt;&gt; R v</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk488" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk488"><span class="nb">rewrite</span> sepconj_emp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">R v --&gt;&gt; R v</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">red</span>; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk489" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk489"><span class="kn">Lemma</span> <span class="nf">triple_produce</span>: <span class="kr">forall</span> (<span class="nv">R</span>: Z -&gt; assertion) <span class="nv">buff</span> <span class="nv">free</span> <span class="nv">busy</span> <span class="nv">data</span>,
  (<span class="kr">forall</span> <span class="nv">v</span>, precise (R v)) -&gt;
  buffer_invariant R buff free busy ‚ä¢
           ‚¶É R data ‚¶Ñ PRODUCE buff free busy data ‚¶É <span class="kr">fun</span> <span class="nv">_</span> =&gt; emp ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">R</span> : Z -&gt; assertion) (<span class="nv">buff</span> <span class="nv">free</span> <span class="nv">busy</span> : addr)
  (<span class="nv">data</span> : Z),
(<span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)) -&gt;
buffer_invariant R buff free busy ‚ä¢ ‚¶É R data
‚¶Ñ PRODUCE buff free busy data ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk48a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk48a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">R</span> : Z -&gt; assertion) (<span class="nv">buff</span> <span class="nv">free</span> <span class="nv">busy</span> : addr)
  (<span class="nv">data</span> : Z),
(<span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)) -&gt;
buffer_invariant R buff free busy ‚ä¢ ‚¶É R data
‚¶Ñ PRODUCE buff free busy data ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk48b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk48b"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff free busy ‚ä¢ ‚¶É R data
‚¶Ñ PRODUCE buff free busy data ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk48c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk48c"><span class="nb">apply</span> triple_seq <span class="kr">with</span> (valid buff ** R data).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff free busy ‚ä¢ ‚¶É R data
‚¶Ñ ACQUIRE free ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; valid buff ** R data ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk48d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk48d"><hr></label><div class="goal-conclusion">buffer_invariant R buff free busy
‚ä¢ ‚¶É valid buff ** R data
‚¶Ñ SEQ (SET buff data) (RELEASE busy)
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk48e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk48e"><span class="nb">unfold</span> buffer_invariant.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant free (valid buff) **
sem_invariant busy
  (aexists (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; contains buff v ** R v))
‚ä¢ ‚¶É R data ‚¶Ñ ACQUIRE free
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; valid buff ** R data ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk48f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk48f"><hr></label><div class="goal-conclusion">buffer_invariant R buff free busy
‚ä¢ ‚¶É valid buff ** R data
‚¶Ñ SEQ (SET buff data) (RELEASE busy)
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk490" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk490"><span class="nb">apply</span> triple_frame_invariant.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant free (valid buff) ‚ä¢ ‚¶É R data
‚¶Ñ ACQUIRE free ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; valid buff ** R data ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk491" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk491"><hr></label><div class="goal-conclusion">buffer_invariant R buff free busy
‚ä¢ ‚¶É valid buff ** R data
‚¶Ñ SEQ (SET buff data) (RELEASE busy)
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk492" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk492"><span class="nb">rewrite</span> &lt;- (sepconj_emp (R data)) <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant free (valid buff) ‚ä¢ ‚¶É emp ** R data
‚¶Ñ ACQUIRE free ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; valid buff ** R data ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk493" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk493"><hr></label><div class="goal-conclusion">buffer_invariant R buff free busy
‚ä¢ ‚¶É valid buff ** R data
‚¶Ñ SEQ (SET buff data) (RELEASE busy)
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk494" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk494"><span class="nb">apply</span> triple_frame.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant free (valid buff) ‚ä¢ ‚¶É emp ‚¶Ñ ACQUIRE free
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; valid buff ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk495" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk495"><hr></label><div class="goal-conclusion">buffer_invariant R buff free busy
‚ä¢ ‚¶É valid buff ** R data
‚¶Ñ SEQ (SET buff data) (RELEASE busy)
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk496" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk496"><span class="nb">apply</span> triple_acquire.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff free busy
‚ä¢ ‚¶É valid buff ** R data
‚¶Ñ SEQ (SET buff data) (RELEASE busy)
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk497" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk497"><span class="nb">apply</span> triple_seq <span class="kr">with</span> (contains buff data ** R data).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff free busy
‚ä¢ ‚¶É valid buff ** R data ‚¶Ñ SET buff data
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; contains buff data ** R data ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk498" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk498"><hr></label><div class="goal-conclusion">buffer_invariant R buff free busy
‚ä¢ ‚¶É contains buff data ** R data ‚¶Ñ 
RELEASE busy ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk499" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk499"><span class="nb">apply</span> triple_frame.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff free busy ‚ä¢ ‚¶É valid buff
‚¶Ñ SET buff data ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; contains buff data ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk49a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk49a"><hr></label><div class="goal-conclusion">buffer_invariant R buff free busy
‚ä¢ ‚¶É contains buff data ** R data ‚¶Ñ 
RELEASE busy ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk49b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk49b"><span class="nb">apply</span> triple_set.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff free busy
‚ä¢ ‚¶É contains buff data ** R data ‚¶Ñ RELEASE busy
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk49c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk49c"><span class="nb">unfold</span> buffer_invariant.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant free (valid buff) **
sem_invariant busy
  (aexists (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; contains buff v ** R v))
‚ä¢ ‚¶É contains buff data ** R data ‚¶Ñ RELEASE busy
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk49d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk49d"><span class="nb">rewrite</span> sepconj_comm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant busy
  (aexists (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; contains buff v ** R v)) **
sem_invariant free (valid buff)
‚ä¢ ‚¶É contains buff data ** R data ‚¶Ñ RELEASE busy
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk49e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk49e"><span class="nb">apply</span> triple_frame_invariant.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant busy
  (aexists (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; contains buff v ** R v))
‚ä¢ ‚¶É contains buff data ** R data ‚¶Ñ RELEASE busy
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk49f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk49f"><span class="nb">eapply</span> triple_consequence_pre.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sem_invariant busy
  (aexists (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; contains buff v ** R v))
‚ä¢ ‚¶É <span class="nl">?P&#39;</span> ‚¶Ñ RELEASE busy ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk4a0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk4a0"><hr></label><div class="goal-conclusion">contains buff data ** R data --&gt;&gt; <span class="nl">?P&#39;</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4a1" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4a1"><span class="nb">apply</span> triple_release.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">precise
  (aexists (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; contains buff v ** R v))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk4a2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk4a2"><hr></label><div class="goal-conclusion">contains buff data ** R data --&gt;&gt;
aexists (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; contains buff v ** R v)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4a3" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4a3"><span class="nb">apply</span> precise_buffer_invariant.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk4a4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk4a4"><hr></label><div class="goal-conclusion">contains buff data ** R data --&gt;&gt;
aexists (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; contains buff v ** R v)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4a5" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4a5"><span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains buff data ** R data --&gt;&gt;
aexists (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; contains buff v ** R v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4a6" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4a6"><span class="nb">red</span>; <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff, free, busy</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v</span> : Z, precise (R v)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>(contains buff data ** R data) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">aexists (<span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; contains buff v ** R v) h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kr">exists</span> <span class="nv">data</span>; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">ProdCons1</span>.</span></span></pre><div class="doc">
<a id="lab20"></a><h2 class="section">4.2. With an unbounded buffer implemented as a list</h2>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Module</span> <span class="nf">ProdCons2</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">PRODUCE</span> (<span class="nv">buff</span>: addr) (<span class="nv">data</span>: Z) : com :=
  LET (ALLOC <span class="mi">2</span>) (<span class="kr">fun</span> <span class="nv">a</span> =&gt;
    SEQ (SET a data)
        (ATOMIC (LET (GET buff) (<span class="kr">fun</span> <span class="nv">prev</span> =&gt;
                   SEQ (SET (a + <span class="mi">1</span>) prev) (SET buff a))))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">POP</span> (<span class="nv">buff</span>: addr) : com :=
  REPEAT (ATOMIC (
    LET (GET buff) (<span class="kr">fun</span> <span class="nv">b</span> =&gt;
        IFTHENELSE b
          (LET (GET (b + <span class="mi">1</span>)) (<span class="kr">fun</span> <span class="nv">next</span> =&gt; SEQ (SET buff next) (PURE b)))
          (PURE <span class="mi">0</span>)))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">CONSUME</span> (<span class="nv">buff</span>: addr) : com :=
  LET (POP buff) (<span class="kr">fun</span> <span class="nv">b</span> =&gt;
  LET (GET b) (<span class="kr">fun</span> <span class="nv">data</span> =&gt;
    SEQ (FREE b) (SEQ (FREE (b + <span class="mi">1</span>)) (PURE data)))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Fixpoint</span> <span class="nf">list_invariant</span> (<span class="nv">R</span>: Z -&gt; assertion) (<span class="nv">l</span>: list Z) (<span class="nv">p</span>: addr) : assertion :=
  <span class="kr">match</span> l <span class="kr">with</span>
  | nil =&gt; (p = <span class="mi">0</span>) //\\ emp
  | x :: l =&gt; (p &lt;&gt; <span class="mi">0</span>) //\\ aexists (<span class="kr">fun</span> <span class="nv">q</span> =&gt; contains p x ** contains (p + <span class="mi">1</span>) q ** R x ** list_invariant R l q)
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">buffer_invariant</span> (<span class="nv">R</span>: Z -&gt; assertion) (<span class="nv">buff</span>: addr) : assertion :=
  aexists (<span class="kr">fun</span> <span class="nv">l</span> =&gt; aexists (<span class="kr">fun</span> <span class="nv">p</span> =&gt; contains buff p ** list_invariant R l p)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4a7" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4a7"><span class="kn">Lemma</span> <span class="nf">triple_produce</span>: <span class="kr">forall</span> <span class="nv">R</span> <span class="nv">buff</span> <span class="nv">data</span>,
  buffer_invariant R buff ‚ä¢
           ‚¶É R data ‚¶Ñ PRODUCE buff data ‚¶É <span class="kr">fun</span> <span class="nv">_</span> =&gt; emp ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">R</span> : Z -&gt; assertion) (<span class="nv">buff</span> : addr) (<span class="nv">data</span> : Z),
buffer_invariant R buff ‚ä¢ ‚¶É R data ‚¶Ñ PRODUCE buff data
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4a8" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4a8"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">R</span> : Z -&gt; assertion) (<span class="nv">buff</span> : addr) (<span class="nv">data</span> : Z),
buffer_invariant R buff ‚ä¢ ‚¶É R data ‚¶Ñ PRODUCE buff data
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4a9" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4a9"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff ‚ä¢ ‚¶É R data ‚¶Ñ PRODUCE buff data
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4aa" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4aa"><span class="nb">eapply</span> triple_let.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff ‚ä¢ ‚¶É R data ‚¶Ñ ALLOC <span class="mi">2</span> ‚¶É <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk4ab" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk4ab"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
buffer_invariant R buff ‚ä¢ ‚¶É 
<span class="nl">?Q</span> v
‚¶Ñ SEQ (SET v data)
    (ATOMIC
       (LET (GET buff)
          (<span class="kr">fun</span> <span class="nv">prev</span> : Z =&gt;
           SEQ (SET (v + <span class="mi">1</span>) prev) (SET buff v))))
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4ac" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4ac">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff ‚ä¢ ‚¶É R data ‚¶Ñ ALLOC <span class="mi">2</span> ‚¶É <span class="nl">?Q</span> ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4ad" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4ad"><span class="nb">rewrite</span> &lt;- (sepconj_emp (R data)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff ‚ä¢ ‚¶É emp ** R data ‚¶Ñ ALLOC <span class="mi">2</span>
‚¶É <span class="nl">?Q</span> ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4ae" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4ae"><span class="nb">apply</span> triple_frame.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff ‚ä¢ ‚¶É emp ‚¶Ñ ALLOC <span class="mi">2</span> ‚¶É <span class="nl">?Q</span> ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> triple_alloc.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4af" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4af">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
buffer_invariant R buff
‚ä¢ ‚¶É (<span class="kr">fun</span> <span class="nv">v0</span> : Z =&gt;
     (<span class="kr">fun</span> <span class="nv">l</span> : Z =&gt; (l &lt;&gt; <span class="mi">0</span>) //\\ valid_N l <span class="mi">2</span>) v0 **
     R data) v
‚¶Ñ SEQ (SET v data)
    (ATOMIC
       (LET (GET buff)
          (<span class="kr">fun</span> <span class="nv">prev</span> : Z =&gt;
           SEQ (SET (v + <span class="mi">1</span>) prev) (SET buff v))))
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4b0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4b0"><span class="nb">intros</span> a; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff
‚ä¢ ‚¶É ((a &lt;&gt; <span class="mi">0</span>) //\\ valid a ** valid (a + <span class="mi">1</span>) ** emp) **
    R data
‚¶Ñ SEQ (SET a data)
    (ATOMIC
       (LET (GET buff)
          (<span class="kr">fun</span> <span class="nv">prev</span> : Z =&gt;
           SEQ (SET (a + <span class="mi">1</span>) prev) (SET buff a))))
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4b1" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4b1"><span class="nb">rewrite</span> lift_pureconj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff
‚ä¢ ‚¶É (a &lt;&gt; <span class="mi">0</span>) //\\
    (valid a ** valid (a + <span class="mi">1</span>) ** emp) ** R data
‚¶Ñ SEQ (SET a data)
    (ATOMIC
       (LET (GET buff)
          (<span class="kr">fun</span> <span class="nv">prev</span> : Z =&gt;
           SEQ (SET (a + <span class="mi">1</span>) prev) (SET buff a))))
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4b2" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4b2"><span class="nb">apply</span> triple_simple_conj_pre; <span class="nb">intros</span> NOT0.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff
‚ä¢ ‚¶É (valid a ** valid (a + <span class="mi">1</span>) ** emp) ** R data
‚¶Ñ SEQ (SET a data)
    (ATOMIC
       (LET (GET buff)
          (<span class="kr">fun</span> <span class="nv">prev</span> : Z =&gt;
           SEQ (SET (a + <span class="mi">1</span>) prev) (SET buff a))))
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4b3" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4b3"><span class="nb">rewrite</span> ! sepconj_assoc, sepconj_emp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff
‚ä¢ ‚¶É valid a ** valid (a + <span class="mi">1</span>) ** R data
‚¶Ñ SEQ (SET a data)
    (ATOMIC
       (LET (GET buff)
          (<span class="kr">fun</span> <span class="nv">prev</span> : Z =&gt;
           SEQ (SET (a + <span class="mi">1</span>) prev) (SET buff a))))
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4b4" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4b4"><span class="nb">apply</span> triple_seq <span class="kr">with</span> (contains a data ** valid (a + <span class="mi">1</span>) ** R data).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff
‚ä¢ ‚¶É valid a ** valid (a + <span class="mi">1</span>) ** R data ‚¶Ñ SET a data
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt;
  contains a data ** valid (a + <span class="mi">1</span>) ** R data ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk4b5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk4b5"><hr></label><div class="goal-conclusion">buffer_invariant R buff
‚ä¢ ‚¶É contains a data ** valid (a + <span class="mi">1</span>) ** R data
‚¶Ñ ATOMIC
    (LET (GET buff)
       (<span class="kr">fun</span> <span class="nv">prev</span> : Z =&gt;
        SEQ (SET (a + <span class="mi">1</span>) prev) (SET buff a)))
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4b6" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4b6">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff
‚ä¢ ‚¶É valid a ** valid (a + <span class="mi">1</span>) ** R data ‚¶Ñ SET a data
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt;
  contains a data ** valid (a + <span class="mi">1</span>) ** R data ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4b7" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4b7"><span class="nb">apply</span> triple_frame.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff ‚ä¢ ‚¶É valid a ‚¶Ñ SET a data
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; contains a data ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> triple_set.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4b8" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4b8">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff
‚ä¢ ‚¶É contains a data ** valid (a + <span class="mi">1</span>) ** R data
‚¶Ñ ATOMIC
    (LET (GET buff)
       (<span class="kr">fun</span> <span class="nv">prev</span> : Z =&gt;
        SEQ (SET (a + <span class="mi">1</span>) prev) (SET buff a)))
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4b9" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4b9"><span class="nb">apply</span> triple_atomic.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É (contains a data ** valid (a + <span class="mi">1</span>) ** R data) **
    buffer_invariant R buff
‚¶Ñ LET (GET buff)
    (<span class="kr">fun</span> <span class="nv">prev</span> : Z =&gt;
     SEQ (SET (a + <span class="mi">1</span>) prev) (SET buff a))
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ** buffer_invariant R buff ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4ba" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4ba"><span class="nb">rewrite</span> sepconj_comm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É buffer_invariant R buff **
    contains a data ** valid (a + <span class="mi">1</span>) ** R data
‚¶Ñ LET (GET buff)
    (<span class="kr">fun</span> <span class="nv">prev</span> : Z =&gt;
     SEQ (SET (a + <span class="mi">1</span>) prev) (SET buff a))
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ** buffer_invariant R buff ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4bb" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4bb"><span class="nb">unfold</span> buffer_invariant.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É aexists
      (<span class="kr">fun</span> <span class="nv">l</span> : list Z =&gt;
       aexists
         (<span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
          contains buff p ** list_invariant R l p)) **
    contains a data ** valid (a + <span class="mi">1</span>) ** R data
‚¶Ñ LET (GET buff)
    (<span class="kr">fun</span> <span class="nv">prev</span> : Z =&gt;
     SEQ (SET (a + <span class="mi">1</span>) prev) (SET buff a))
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt;
  emp **
  aexists
    (<span class="kr">fun</span> <span class="nv">l</span> : list Z =&gt;
     aexists
       (<span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
        contains buff p ** list_invariant R l p)) ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4bc" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4bc"><span class="nb">rewrite</span> lift_aexists; <span class="nb">apply</span> triple_exists_pre; <span class="nb">intros</span> l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É aexists
      (<span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
       contains buff p ** list_invariant R l p) **
    contains a data ** valid (a + <span class="mi">1</span>) ** R data
‚¶Ñ LET (GET buff)
    (<span class="kr">fun</span> <span class="nv">prev</span> : Z =&gt;
     SEQ (SET (a + <span class="mi">1</span>) prev) (SET buff a))
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt;
  emp **
  aexists
    (<span class="kr">fun</span> <span class="nv">l</span> : list Z =&gt;
     aexists
       (<span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
        contains buff p ** list_invariant R l p)) ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4bd" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4bd"><span class="nb">rewrite</span> lift_aexists; <span class="nb">apply</span> triple_exists_pre; <span class="nb">intros</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É (contains buff p ** list_invariant R l p) **
    contains a data ** valid (a + <span class="mi">1</span>) ** R data
‚¶Ñ LET (GET buff)
    (<span class="kr">fun</span> <span class="nv">prev</span> : Z =&gt;
     SEQ (SET (a + <span class="mi">1</span>) prev) (SET buff a))
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt;
  emp **
  aexists
    (<span class="kr">fun</span> <span class="nv">l</span> : list Z =&gt;
     aexists
       (<span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
        contains buff p ** list_invariant R l p)) ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4be" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4be"><span class="nb">rewrite</span> sepconj_assoc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É contains buff p **
    list_invariant R l p **
    contains a data ** valid (a + <span class="mi">1</span>) ** R data
‚¶Ñ LET (GET buff)
    (<span class="kr">fun</span> <span class="nv">prev</span> : Z =&gt;
     SEQ (SET (a + <span class="mi">1</span>) prev) (SET buff a))
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt;
  emp **
  aexists
    (<span class="kr">fun</span> <span class="nv">l</span> : list Z =&gt;
     aexists
       (<span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
        contains buff p ** list_invariant R l p)) ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4bf" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4bf"><span class="nb">eapply</span> triple_let.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É contains buff p **
    list_invariant R l p **
    contains a data ** valid (a + <span class="mi">1</span>) ** R data
‚¶Ñ GET buff ‚¶É <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk4c0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk4c0"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
emp ‚ä¢ ‚¶É <span class="nl">?Q</span> v ‚¶Ñ SEQ (SET (a + <span class="mi">1</span>) v) (SET buff a)
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt;
  emp **
  aexists
    (<span class="kr">fun</span> <span class="nv">l</span> : list Z =&gt;
     aexists
       (<span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
        contains buff p ** list_invariant R l p)) ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4c1" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4c1">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É contains buff p **
    list_invariant R l p **
    contains a data ** valid (a + <span class="mi">1</span>) ** R data
‚¶Ñ GET buff ‚¶É <span class="nl">?Q</span> ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4c2" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4c2"><span class="nb">apply</span> triple_frame.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É contains buff p ‚¶Ñ GET buff ‚¶É <span class="nl">?Q</span> ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> triple_get.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4c3" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4c3">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
emp
‚ä¢ ‚¶É (<span class="kr">fun</span> <span class="nv">v0</span> : Z =&gt;
     (<span class="kr">fun</span> <span class="nv">v&#39;</span> : Z =&gt; (v&#39; = p) //\\ contains buff p) v0 **
     list_invariant R l p **
     contains a data ** valid (a + <span class="mi">1</span>) ** R data) v
‚¶Ñ SEQ (SET (a + <span class="mi">1</span>) v) (SET buff a)
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt;
  emp **
  aexists
    (<span class="kr">fun</span> <span class="nv">l</span> : list Z =&gt;
     aexists
       (<span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
        contains buff p ** list_invariant R l p)) ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4c4" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4c4"><span class="nb">intros</span> p&#39;; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p, p'</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É ((p&#39; = p) //\\ contains buff p) **
    list_invariant R l p **
    contains a data ** valid (a + <span class="mi">1</span>) ** R data
‚¶Ñ SEQ (SET (a + <span class="mi">1</span>) p&#39;) (SET buff a)
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt;
  emp **
  aexists
    (<span class="kr">fun</span> <span class="nv">l</span> : list Z =&gt;
     aexists
       (<span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
        contains buff p ** list_invariant R l p)) ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4c5" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4c5"><span class="nb">rewrite</span> lift_pureconj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p, p'</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É (p&#39; = p) //\\
    contains buff p **
    list_invariant R l p **
    contains a data ** valid (a + <span class="mi">1</span>) ** R data
‚¶Ñ SEQ (SET (a + <span class="mi">1</span>) p&#39;) (SET buff a)
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt;
  emp **
  aexists
    (<span class="kr">fun</span> <span class="nv">l</span> : list Z =&gt;
     aexists
       (<span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
        contains buff p ** list_invariant R l p)) ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4c6" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4c6"><span class="nb">apply</span> triple_simple_conj_pre; <span class="nb">intros</span> EQ; <span class="nb">subst</span> p&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É contains buff p **
    list_invariant R l p **
    contains a data ** valid (a + <span class="mi">1</span>) ** R data
‚¶Ñ SEQ (SET (a + <span class="mi">1</span>) p) (SET buff a)
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt;
  emp **
  aexists
    (<span class="kr">fun</span> <span class="nv">l</span> : list Z =&gt;
     aexists
       (<span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
        contains buff p ** list_invariant R l p)) ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4c7" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4c7"><span class="nb">eapply</span> triple_seq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É contains buff p **
    list_invariant R l p **
    contains a data ** valid (a + <span class="mi">1</span>) ** R data
‚¶Ñ SET (a + <span class="mi">1</span>) p ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk4c8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk4c8"><hr></label><div class="goal-conclusion">emp ‚ä¢ ‚¶É <span class="nl">?Q</span> ‚¶Ñ SET buff a
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt;
  emp **
  aexists
    (<span class="kr">fun</span> <span class="nv">l</span> : list Z =&gt;
     aexists
       (<span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
        contains buff p ** list_invariant R l p)) ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4c9" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4c9">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É contains buff p **
    list_invariant R l p **
    contains a data ** valid (a + <span class="mi">1</span>) ** R data
‚¶Ñ SET (a + <span class="mi">1</span>) p ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; <span class="nl">?Q</span> ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4ca" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4ca"><span class="nb">rewrite</span> (sepconj_pick3 (valid (a + <span class="mi">1</span>))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É contains buff p **
    valid (a + <span class="mi">1</span>) **
    list_invariant R l p ** contains a data ** R data
‚¶Ñ SET (a + <span class="mi">1</span>) p ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; <span class="nl">?Q</span> ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4cb" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4cb"><span class="nb">rewrite</span> sepconj_pick2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É valid (a + <span class="mi">1</span>) **
    contains buff p **
    list_invariant R l p ** contains a data ** R data
‚¶Ñ SET (a + <span class="mi">1</span>) p ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; <span class="nl">?Q</span> ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4cc" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4cc"><span class="nb">apply</span> triple_frame <span class="kr">with</span> (Q := <span class="kr">fun</span> <span class="nv">_</span> =&gt; contains  (a + <span class="mi">1</span>) p).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É valid (a + <span class="mi">1</span>) ‚¶Ñ SET (a + <span class="mi">1</span>) p
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; contains (a + <span class="mi">1</span>) p ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> triple_set.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4cd" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4cd">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É contains (a + <span class="mi">1</span>) p **
    contains buff p **
    list_invariant R l p ** contains a data ** R data
‚¶Ñ SET buff a
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt;
  emp **
  aexists
    (<span class="kr">fun</span> <span class="nv">l</span> : list Z =&gt;
     aexists
       (<span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
        contains buff p ** list_invariant R l p)) ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4ce" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4ce"><span class="nb">rewrite</span> sepconj_pick2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É contains buff p **
    contains (a + <span class="mi">1</span>) p **
    list_invariant R l p ** contains a data ** R data
‚¶Ñ SET buff a
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt;
  emp **
  aexists
    (<span class="kr">fun</span> <span class="nv">l</span> : list Z =&gt;
     aexists
       (<span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
        contains buff p ** list_invariant R l p)) ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4cf" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4cf"><span class="nb">eapply</span> triple_consequence_post.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É contains buff p **
    contains (a + <span class="mi">1</span>) p **
    list_invariant R l p ** contains a data ** R data
‚¶Ñ SET buff a ‚¶É <span class="nl">?Q&#39;</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk4d0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk4d0"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
<span class="nl">?Q&#39;</span> v --&gt;&gt;
emp **
aexists
  (<span class="kr">fun</span> <span class="nv">l</span> : list Z =&gt;
   aexists
     (<span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
      contains buff p ** list_invariant R l p))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4d1" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4d1">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É contains buff p **
    contains (a + <span class="mi">1</span>) p **
    list_invariant R l p ** contains a data ** R data
‚¶Ñ SET buff a ‚¶É <span class="nl">?Q&#39;</span> ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4d2" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4d2"><span class="nb">apply</span> triple_frame.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É contains buff p ‚¶Ñ SET buff a ‚¶É <span class="nl">?Q</span> ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4d3" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4d3"><span class="nb">eapply</span> triple_consequence_pre.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É <span class="nl">?P&#39;</span> ‚¶Ñ SET buff a ‚¶É <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk4d4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk4d4"><hr></label><div class="goal-conclusion">contains buff p --&gt;&gt; <span class="nl">?P&#39;</span></div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4d5" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4d5"><span class="nb">apply</span> triple_set.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains buff p --&gt;&gt; valid buff</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> h A; <span class="kr">exists</span> <span class="nv">p</span>; <span class="nb">auto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4d6" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4d6">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
(<span class="kr">fun</span> <span class="nv">v0</span> : Z =&gt;
 (<span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; contains buff a) v0 **
 contains (a + <span class="mi">1</span>) p **
 list_invariant R l p ** contains a data ** R data) v --&gt;&gt;
emp **
aexists
  (<span class="kr">fun</span> <span class="nv">l</span> : list Z =&gt;
   aexists
     (<span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
      contains buff p ** list_invariant R l p))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4d7" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4d7"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Z -&gt;
contains buff a **
contains (a + <span class="mi">1</span>) p **
list_invariant R l p ** contains a data ** R data --&gt;&gt;
emp **
aexists
  (<span class="kr">fun</span> <span class="nv">l</span> : list Z =&gt;
   aexists
     (<span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
      contains buff p ** list_invariant R l p))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4d8" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4d8"><span class="nb">intros</span> _.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains buff a **
contains (a + <span class="mi">1</span>) p **
list_invariant R l p ** contains a data ** R data --&gt;&gt;
emp **
aexists
  (<span class="kr">fun</span> <span class="nv">l</span> : list Z =&gt;
   aexists
     (<span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
      contains buff p ** list_invariant R l p))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4d9" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4d9"><span class="nb">rewrite</span> sepconj_emp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains buff a **
contains (a + <span class="mi">1</span>) p **
list_invariant R l p ** contains a data ** R data --&gt;&gt;
aexists
  (<span class="kr">fun</span> <span class="nv">l</span> : list Z =&gt;
   aexists
     (<span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
      contains buff p ** list_invariant R l p))</div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4da" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4da"><span class="nb">rewrite</span> &lt;- (sepconj_swap3 (list_invariant R l p)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains buff a **
contains (a + <span class="mi">1</span>) p **
contains a data ** R data ** list_invariant R l p --&gt;&gt;
aexists
  (<span class="kr">fun</span> <span class="nv">l</span> : list Z =&gt;
   aexists
     (<span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
      contains buff p ** list_invariant R l p))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4db" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4db"><span class="nb">rewrite</span> (sepconj_pick2 (contains a data)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains buff a **
contains a data **
contains (a + <span class="mi">1</span>) p ** R data ** list_invariant R l p --&gt;&gt;
aexists
  (<span class="kr">fun</span> <span class="nv">l</span> : list Z =&gt;
   aexists
     (<span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
      contains buff p ** list_invariant R l p))</div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4dc" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4dc"><span class="nb">intros</span> h A.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>(contains buff a **
 contains a data **
 contains (a + <span class="mi">1</span>) p **
 R data ** list_invariant R l p) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">aexists
  (<span class="kr">fun</span> <span class="nv">l</span> : list Z =&gt;
   aexists
     (<span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
      contains buff p ** list_invariant R l p)) h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4dd" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4dd"><span class="kr">exists</span> (<span class="nv">data</span> :: l), a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>(contains buff a **
 contains a data **
 contains (a + <span class="mi">1</span>) p **
 R data ** list_invariant R l p) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(contains buff a ** list_invariant R (data :: l) a) h</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4de" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4de"><span class="nb">revert</span> h A.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">h</span> : heap,
(contains buff a **
 contains a data **
 contains (a + <span class="mi">1</span>) p ** R data ** list_invariant R l p)
  h -&gt;
(contains buff a ** list_invariant R (data :: l) a) h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4df" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4df"><span class="nb">apply</span> sepconj_imp_r.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains a data **
contains (a + <span class="mi">1</span>) p ** R data ** list_invariant R l p --&gt;&gt;
list_invariant R (data :: l) a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4e0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4e0"><span class="nb">intros</span> h A.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>(contains a data **
 contains (a + <span class="mi">1</span>) p **
 R data ** list_invariant R l p) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">list_invariant R (data :: l) a h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4e1" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4e1"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>(contains a data **
 contains (a + <span class="mi">1</span>) p **
 R data ** list_invariant R l p) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((a &lt;&gt; <span class="mi">0</span>) //\\
 aexists
   (<span class="kr">fun</span> <span class="nv">q</span> : Z =&gt;
    contains a data **
    contains (a + <span class="mi">1</span>) q **
    R data ** list_invariant R l q)) h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4e2" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4e2"><span class="nb">split</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>data, a</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOT0</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>(contains a data **
 contains (a + <span class="mi">1</span>) p **
 R data ** list_invariant R l p) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">aexists
  (<span class="kr">fun</span> <span class="nv">q</span> : Z =&gt;
   contains a data **
   contains (a + <span class="mi">1</span>) q **
   R data ** list_invariant R l q) h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kr">exists</span> <span class="nv">p</span>; <span class="bp">exact</span> A.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4e3" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4e3"><span class="kn">Lemma</span> <span class="nf">triple_pop</span>: <span class="kr">forall</span> <span class="nv">R</span> <span class="nv">buff</span>,
  buffer_invariant R buff ‚ä¢
           ‚¶É emp ‚¶Ñ POP buff ‚¶É <span class="kr">fun</span> <span class="nv">p</span> =&gt; aexists (<span class="kr">fun</span> <span class="nv">x</span> =&gt; contains p x ** valid (p + <span class="mi">1</span>) ** R x) ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">R</span> : Z -&gt; assertion) (<span class="nv">buff</span> : addr),
buffer_invariant R buff ‚ä¢ ‚¶É emp ‚¶Ñ POP buff
‚¶É <span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
  aexists
    (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt; contains p x ** valid (p + <span class="mi">1</span>) ** R x)
‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4e4" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4e4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">R</span> : Z -&gt; assertion) (<span class="nv">buff</span> : addr),
buffer_invariant R buff ‚ä¢ ‚¶É emp ‚¶Ñ POP buff
‚¶É <span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
  aexists
    (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt; contains p x ** valid (p + <span class="mi">1</span>) ** R x)
‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4e5" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4e5"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff ‚ä¢ ‚¶É emp ‚¶Ñ POP buff
‚¶É <span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
  aexists
    (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt; contains p x ** valid (p + <span class="mi">1</span>) ** R x)
‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4e6" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4e6"><span class="nb">set</span> (Qloop := <span class="kr">fun</span> <span class="nv">p</span> =&gt; <span class="kr">if</span> p =? <span class="mi">0</span> <span class="kr">then</span> emp <span class="kr">else</span> aexists (<span class="kr">fun</span> <span class="nv">x</span> =&gt; contains p x ** valid (p + <span class="mi">1</span>) ** R x)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff ‚ä¢ ‚¶É emp ‚¶Ñ POP buff
‚¶É <span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
  aexists
    (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt; contains p x ** valid (p + <span class="mi">1</span>) ** R x)
‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4e7" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4e7"><span class="nb">apply</span> triple_consequence_post <span class="kr">with</span> (<span class="kr">fun</span> <span class="nv">p</span> =&gt; (p &lt;&gt; <span class="mi">0</span>) //\\ Qloop p).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff ‚ä¢ ‚¶É emp ‚¶Ñ POP buff
‚¶É <span class="kr">fun</span> <span class="nv">p</span> : Z =&gt; (p &lt;&gt; <span class="mi">0</span>) //\\ Qloop p ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk4e8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk4e8"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
(v &lt;&gt; <span class="mi">0</span>) //\\ Qloop v --&gt;&gt;
aexists
  (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt; contains v x ** valid (v + <span class="mi">1</span>) ** R x)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4e9" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4e9"><span class="nb">apply</span> triple_repeat.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff ‚ä¢ ‚¶É emp
‚¶Ñ ATOMIC
    (LET (GET buff)
       (<span class="kr">fun</span> <span class="nv">b</span> : Z =&gt;
        IFTHENELSE b
          (LET (GET (b + <span class="mi">1</span>))
             (<span class="kr">fun</span> <span class="nv">next</span> : Z =&gt;
              SEQ (SET buff next) (PURE b))) (PURE <span class="mi">0</span>)))
‚¶É Qloop ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk4ea" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk4ea"><hr></label><div class="goal-conclusion">Qloop <span class="mi">0</span> --&gt;&gt; emp</div></blockquote><input class="alectryon-extra-goal-toggle" id="CSL-v-chk4eb" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><label class="goal-separator" for="CSL-v-chk4eb"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
(v &lt;&gt; <span class="mi">0</span>) //\\ Qloop v --&gt;&gt;
aexists
  (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt; contains v x ** valid (v + <span class="mi">1</span>) ** R x)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4ec" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4ec">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff ‚ä¢ ‚¶É emp
‚¶Ñ ATOMIC
    (LET (GET buff)
       (<span class="kr">fun</span> <span class="nv">b</span> : Z =&gt;
        IFTHENELSE b
          (LET (GET (b + <span class="mi">1</span>))
             (<span class="kr">fun</span> <span class="nv">next</span> : Z =&gt;
              SEQ (SET buff next) (PURE b))) (PURE <span class="mi">0</span>)))
‚¶É Qloop ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4ed" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4ed"><span class="nb">apply</span> triple_atomic.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É emp ** buffer_invariant R buff
‚¶Ñ LET (GET buff)
    (<span class="kr">fun</span> <span class="nv">b</span> : Z =&gt;
     IFTHENELSE b
       (LET (GET (b + <span class="mi">1</span>))
          (<span class="kr">fun</span> <span class="nv">next</span> : Z =&gt;
           SEQ (SET buff next) (PURE b))) (PURE <span class="mi">0</span>))
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Qloop v ** buffer_invariant R buff ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4ee" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4ee"><span class="nb">rewrite</span> sepconj_emp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É buffer_invariant R buff
‚¶Ñ LET (GET buff)
    (<span class="kr">fun</span> <span class="nv">b</span> : Z =&gt;
     IFTHENELSE b
       (LET (GET (b + <span class="mi">1</span>))
          (<span class="kr">fun</span> <span class="nv">next</span> : Z =&gt;
           SEQ (SET buff next) (PURE b))) (PURE <span class="mi">0</span>))
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Qloop v ** buffer_invariant R buff ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4ef" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4ef"><span class="nb">apply</span> triple_exists_pre; <span class="nb">intros</span> l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É aexists
      (<span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
       contains buff p ** list_invariant R l p)
‚¶Ñ LET (GET buff)
    (<span class="kr">fun</span> <span class="nv">b</span> : Z =&gt;
     IFTHENELSE b
       (LET (GET (b + <span class="mi">1</span>))
          (<span class="kr">fun</span> <span class="nv">next</span> : Z =&gt;
           SEQ (SET buff next) (PURE b))) (PURE <span class="mi">0</span>))
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Qloop v ** buffer_invariant R buff ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4f0" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4f0"><span class="nb">apply</span> triple_exists_pre; <span class="nb">intros</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É contains buff p ** list_invariant R l p
‚¶Ñ LET (GET buff)
    (<span class="kr">fun</span> <span class="nv">b</span> : Z =&gt;
     IFTHENELSE b
       (LET (GET (b + <span class="mi">1</span>))
          (<span class="kr">fun</span> <span class="nv">next</span> : Z =&gt;
           SEQ (SET buff next) (PURE b))) (PURE <span class="mi">0</span>))
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Qloop v ** buffer_invariant R buff ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4f1" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4f1"><span class="nb">eapply</span> triple_let.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É contains buff p ** list_invariant R l p
‚¶Ñ GET buff ‚¶É <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk4f2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk4f2"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
emp ‚ä¢ ‚¶É <span class="nl">?Q</span> v
‚¶Ñ IFTHENELSE v
    (LET (GET (v + <span class="mi">1</span>))
       (<span class="kr">fun</span> <span class="nv">next</span> : Z =&gt; SEQ (SET buff next) (PURE v)))
    (PURE <span class="mi">0</span>)
‚¶É <span class="kr">fun</span> <span class="nv">v0</span> : Z =&gt; Qloop v0 ** buffer_invariant R buff ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4f3" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4f3">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É contains buff p ** list_invariant R l p
‚¶Ñ GET buff ‚¶É <span class="nl">?Q</span> ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4f4" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4f4"><span class="nb">apply</span> triple_frame.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É contains buff p ‚¶Ñ GET buff ‚¶É <span class="nl">?Q</span> ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> triple_get.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4f5" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4f5">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
emp
‚ä¢ ‚¶É (<span class="kr">fun</span> <span class="nv">v0</span> : Z =&gt;
     (<span class="kr">fun</span> <span class="nv">v&#39;</span> : Z =&gt; (v&#39; = p) //\\ contains buff p) v0 **
     list_invariant R l p) v
‚¶Ñ IFTHENELSE v
    (LET (GET (v + <span class="mi">1</span>))
       (<span class="kr">fun</span> <span class="nv">next</span> : Z =&gt; SEQ (SET buff next) (PURE v)))
    (PURE <span class="mi">0</span>)
‚¶É <span class="kr">fun</span> <span class="nv">v0</span> : Z =&gt; Qloop v0 ** buffer_invariant R buff ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4f6" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4f6"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
emp
‚ä¢ ‚¶É ((v = p) //\\ contains buff p) **
    list_invariant R l p
‚¶Ñ IFTHENELSE v
    (LET (GET (v + <span class="mi">1</span>))
       (<span class="kr">fun</span> <span class="nv">next</span> : Z =&gt; SEQ (SET buff next) (PURE v)))
    (PURE <span class="mi">0</span>)
‚¶É <span class="kr">fun</span> <span class="nv">v0</span> : Z =&gt; Qloop v0 ** buffer_invariant R buff ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4f7" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4f7"><span class="nb">intros</span> p&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p, p'</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É ((p&#39; = p) //\\ contains buff p) **
    list_invariant R l p
‚¶Ñ IFTHENELSE p&#39;
    (LET (GET (p&#39; + <span class="mi">1</span>))
       (<span class="kr">fun</span> <span class="nv">next</span> : Z =&gt; SEQ (SET buff next) (PURE p&#39;)))
    (PURE <span class="mi">0</span>)
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Qloop v ** buffer_invariant R buff ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4f8" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4f8"><span class="nb">rewrite</span> lift_pureconj; <span class="nb">apply</span> triple_simple_conj_pre; <span class="nb">intros</span> E; <span class="nb">subst</span> p&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É contains buff p ** list_invariant R l p
‚¶Ñ IFTHENELSE p
    (LET (GET (p + <span class="mi">1</span>))
       (<span class="kr">fun</span> <span class="nv">next</span> : Z =&gt; SEQ (SET buff next) (PURE p)))
    (PURE <span class="mi">0</span>)
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Qloop v ** buffer_invariant R buff ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4f9" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4f9"><span class="nb">apply</span> triple_ifthenelse.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É (p &lt;&gt; <span class="mi">0</span>) //\\
    contains buff p ** list_invariant R l p
‚¶Ñ LET (GET (p + <span class="mi">1</span>))
    (<span class="kr">fun</span> <span class="nv">next</span> : Z =&gt; SEQ (SET buff next) (PURE p))
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Qloop v ** buffer_invariant R buff ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk4fa" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk4fa"><hr></label><div class="goal-conclusion">emp
‚ä¢ ‚¶É (p = <span class="mi">0</span>) //\\
    contains buff p ** list_invariant R l p ‚¶Ñ 
PURE <span class="mi">0</span>
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Qloop v ** buffer_invariant R buff ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4fb" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4fb">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É (p &lt;&gt; <span class="mi">0</span>) //\\
    contains buff p ** list_invariant R l p
‚¶Ñ LET (GET (p + <span class="mi">1</span>))
    (<span class="kr">fun</span> <span class="nv">next</span> : Z =&gt; SEQ (SET buff next) (PURE p))
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Qloop v ** buffer_invariant R buff ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4fc" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4fc"><span class="nb">apply</span> triple_simple_conj_pre; <span class="nb">intros</span> NOTZERO.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É contains buff p ** list_invariant R l p
‚¶Ñ LET (GET (p + <span class="mi">1</span>))
    (<span class="kr">fun</span> <span class="nv">next</span> : Z =&gt; SEQ (SET buff next) (PURE p))
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Qloop v ** buffer_invariant R buff ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4fd" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4fd"><span class="nb">rewrite</span> sepconj_comm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É list_invariant R l p ** contains buff p
‚¶Ñ LET (GET (p + <span class="mi">1</span>))
    (<span class="kr">fun</span> <span class="nv">next</span> : Z =&gt; SEQ (SET buff next) (PURE p))
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Qloop v ** buffer_invariant R buff ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4fe" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4fe"><span class="nb">destruct</span> l <span class="kr">as</span> [ | x l]; <span class="nb">cbn</span>; <span class="nb">rewrite</span> lift_pureconj; <span class="nb">apply</span> triple_simple_conj_pre; <span class="nb">intro</span>; <span class="kp">try</span> <span class="bp">lia</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO, H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É aexists
      (<span class="kr">fun</span> <span class="nv">q</span> : Z =&gt;
       contains p x **
       contains (p + <span class="mi">1</span>) q **
       R x ** list_invariant R l q) ** contains buff p
‚¶Ñ LET (GET (p + <span class="mi">1</span>))
    (<span class="kr">fun</span> <span class="nv">next</span> : Z =&gt; SEQ (SET buff next) (PURE p))
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Qloop v ** buffer_invariant R buff ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk4ff" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk4ff"><span class="nb">rewrite</span> lift_aexists; <span class="nb">apply</span> triple_exists_pre; <span class="nb">intros</span> t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO, H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É (contains p x **
     contains (p + <span class="mi">1</span>) t ** R x ** list_invariant R l t) **
    contains buff p
‚¶Ñ LET (GET (p + <span class="mi">1</span>))
    (<span class="kr">fun</span> <span class="nv">next</span> : Z =&gt; SEQ (SET buff next) (PURE p))
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Qloop v ** buffer_invariant R buff ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk500" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk500"><span class="nb">eapply</span> triple_let.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO, H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É (contains p x **
     contains (p + <span class="mi">1</span>) t ** R x ** list_invariant R l t) **
    contains buff p ‚¶Ñ GET (p + <span class="mi">1</span>) ‚¶É <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk501" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO, H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk501"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
emp ‚ä¢ ‚¶É <span class="nl">?Q</span> v ‚¶Ñ SEQ (SET buff v) (PURE p)
‚¶É <span class="kr">fun</span> <span class="nv">v0</span> : Z =&gt; Qloop v0 ** buffer_invariant R buff ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk502" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk502">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO, H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É (contains p x **
     contains (p + <span class="mi">1</span>) t ** R x ** list_invariant R l t) **
    contains buff p ‚¶Ñ GET (p + <span class="mi">1</span>) ‚¶É <span class="nl">?Q</span> ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk503" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk503"><span class="nb">rewrite</span> ! sepconj_assoc, sepconj_pick2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO, H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É contains (p + <span class="mi">1</span>) t **
    contains p x **
    R x ** list_invariant R l t ** contains buff p
‚¶Ñ GET (p + <span class="mi">1</span>) ‚¶É <span class="nl">?Q</span> ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk504" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk504"><span class="nb">apply</span> triple_frame.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO, H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É contains (p + <span class="mi">1</span>) t ‚¶Ñ GET (p + <span class="mi">1</span>) ‚¶É <span class="nl">?Q</span> ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> triple_get.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk505" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk505">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO, H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
emp
‚ä¢ ‚¶É (<span class="kr">fun</span> <span class="nv">v0</span> : Z =&gt;
     (<span class="kr">fun</span> <span class="nv">v&#39;</span> : Z =&gt; (v&#39; = t) //\\ contains (p + <span class="mi">1</span>) t)
       v0 **
     contains p x **
     R x ** list_invariant R l t ** contains buff p) v
‚¶Ñ SEQ (SET buff v) (PURE p)
‚¶É <span class="kr">fun</span> <span class="nv">v0</span> : Z =&gt; Qloop v0 ** buffer_invariant R buff ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk506" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk506"><span class="nb">intros</span> t&#39;; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO, H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t, t'</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É ((t&#39; = t) //\\ contains (p + <span class="mi">1</span>) t) **
    contains p x **
    R x ** list_invariant R l t ** contains buff p
‚¶Ñ SEQ (SET buff t&#39;) (PURE p)
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Qloop v ** buffer_invariant R buff ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk507" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk507"><span class="nb">rewrite</span> lift_pureconj; <span class="nb">apply</span> triple_simple_conj_pre; <span class="nb">intros</span> E; <span class="nb">subst</span> t&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO, H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É contains (p + <span class="mi">1</span>) t **
    contains p x **
    R x ** list_invariant R l t ** contains buff p
‚¶Ñ SEQ (SET buff t) (PURE p)
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Qloop v ** buffer_invariant R buff ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk508" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk508"><span class="nb">rewrite</span> &lt;- ! sepconj_assoc, sepconj_comm, ! sepconj_assoc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO, H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É contains buff p **
    contains (p + <span class="mi">1</span>) t **
    contains p x ** R x ** list_invariant R l t
‚¶Ñ SEQ (SET buff t) (PURE p)
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Qloop v ** buffer_invariant R buff ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">  
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk509" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk509"><span class="nb">eapply</span> triple_seq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO, H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É contains buff p **
    contains (p + <span class="mi">1</span>) t **
    contains p x ** R x ** list_invariant R l t
‚¶Ñ SET buff t ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk50a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO, H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk50a"><hr></label><div class="goal-conclusion">emp ‚ä¢ ‚¶É <span class="nl">?Q</span> ‚¶Ñ PURE p
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Qloop v ** buffer_invariant R buff ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk50b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk50b">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO, H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É contains buff p **
    contains (p + <span class="mi">1</span>) t **
    contains p x ** R x ** list_invariant R l t
‚¶Ñ SET buff t ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; <span class="nl">?Q</span> ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk50c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk50c"><span class="nb">apply</span> triple_frame <span class="kr">with</span> (Q := <span class="kr">fun</span> <span class="nv">_</span> =&gt; contains buff t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO, H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É contains buff p ‚¶Ñ SET buff t
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; contains buff t ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk50d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk50d"><span class="nb">eapply</span> triple_consequence_pre.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO, H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É <span class="nl">?P&#39;</span> ‚¶Ñ SET buff t
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; contains buff t ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk50e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO, H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk50e"><hr></label><div class="goal-conclusion">contains buff p --&gt;&gt; <span class="nl">?P&#39;</span></div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk50f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk50f"><span class="nb">apply</span> triple_set.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO, H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains buff p --&gt;&gt; valid buff</div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> h A; <span class="kr">exists</span> <span class="nv">p</span>; <span class="nb">auto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk510" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk510">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO, H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É contains buff t **
    contains (p + <span class="mi">1</span>) t **
    contains p x ** R x ** list_invariant R l t
‚¶Ñ PURE p
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Qloop v ** buffer_invariant R buff ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">     </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk511" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk511"><span class="nb">apply</span> triple_pure.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO, H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains buff t **
contains (p + <span class="mi">1</span>) t **
contains p x ** R x ** list_invariant R l t --&gt;&gt;
Qloop p ** buffer_invariant R buff</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">     </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk512" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk512"><span class="nb">unfold</span> Qloop.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO, H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains buff t **
contains (p + <span class="mi">1</span>) t **
contains p x ** R x ** list_invariant R l t --&gt;&gt;
(<span class="kr">if</span> p =? <span class="mi">0</span>
 <span class="kr">then</span> emp
 <span class="kr">else</span>
  aexists
    (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt; contains p x ** valid (p + <span class="mi">1</span>) ** R x)) **
buffer_invariant R buff</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk513" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk513"><span class="nb">apply</span> Z.eqb_neq <span class="kr">in</span> NOTZERO; <span class="nb">rewrite</span> NOTZERO.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO</var><span class="hyp-type"><b>: </b><span>(p =? <span class="mi">0</span>) = false</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains buff t **
contains (p + <span class="mi">1</span>) t **
contains p x ** R x ** list_invariant R l t --&gt;&gt;
aexists
  (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt; contains p x ** valid (p + <span class="mi">1</span>) ** R x) **
buffer_invariant R buff</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">     </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk514" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk514"><span class="nb">rewrite</span> (sepconj_pick2 (contains p x)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO</var><span class="hyp-type"><b>: </b><span>(p =? <span class="mi">0</span>) = false</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains buff t **
contains p x **
contains (p + <span class="mi">1</span>) t ** R x ** list_invariant R l t --&gt;&gt;
aexists
  (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt; contains p x ** valid (p + <span class="mi">1</span>) ** R x) **
buffer_invariant R buff</div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">     </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk515" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk515"><span class="nb">rewrite</span> &lt;- (sepconj_pick3 (contains buff t)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO</var><span class="hyp-type"><b>: </b><span>(p =? <span class="mi">0</span>) = false</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains p x **
contains (p + <span class="mi">1</span>) t **
contains buff t ** R x ** list_invariant R l t --&gt;&gt;
aexists
  (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt; contains p x ** valid (p + <span class="mi">1</span>) ** R x) **
buffer_invariant R buff</div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">     </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk516" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk516"><span class="nb">rewrite</span> &lt;- (sepconj_pick2 (contains buff t)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO</var><span class="hyp-type"><b>: </b><span>(p =? <span class="mi">0</span>) = false</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains p x **
contains (p + <span class="mi">1</span>) t **
R x ** contains buff t ** list_invariant R l t --&gt;&gt;
aexists
  (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt; contains p x ** valid (p + <span class="mi">1</span>) ** R x) **
buffer_invariant R buff</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">     </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk517" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk517"><span class="nb">intros</span> h A.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO</var><span class="hyp-type"><b>: </b><span>(p =? <span class="mi">0</span>) = false</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>(contains p x **
 contains (p + <span class="mi">1</span>) t **
 R x ** contains buff t ** list_invariant R l t) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt; contains p x ** valid (p + <span class="mi">1</span>) ** R x) **
 buffer_invariant R buff) h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk518" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk518"><span class="nb">rewrite</span> lift_aexists.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO</var><span class="hyp-type"><b>: </b><span>(p =? <span class="mi">0</span>) = false</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>(contains p x **
 contains (p + <span class="mi">1</span>) t **
 R x ** contains buff t ** list_invariant R l t) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">aexists
  (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
   (contains p x ** valid (p + <span class="mi">1</span>) ** R x) **
   buffer_invariant R buff) h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk519" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk519"><span class="kr">exists</span> <span class="nv">x</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO</var><span class="hyp-type"><b>: </b><span>(p =? <span class="mi">0</span>) = false</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>(contains p x **
 contains (p + <span class="mi">1</span>) t **
 R x ** contains buff t ** list_invariant R l t) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((contains p x ** valid (p + <span class="mi">1</span>) ** R x) **
 buffer_invariant R buff) h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk51a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk51a"><span class="nb">rewrite</span> ! sepconj_assoc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO</var><span class="hyp-type"><b>: </b><span>(p =? <span class="mi">0</span>) = false</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>(contains p x **
 contains (p + <span class="mi">1</span>) t **
 R x ** contains buff t ** list_invariant R l t) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(contains p x **
 valid (p + <span class="mi">1</span>) ** R x ** buffer_invariant R buff) h</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">     </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk51b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk51b"><span class="nb">eapply</span> sepconj_imp_r; <span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO</var><span class="hyp-type"><b>: </b><span>(p =? <span class="mi">0</span>) = false</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>(contains p x **
 contains (p + <span class="mi">1</span>) t **
 R x ** contains buff t ** list_invariant R l t) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains (p + <span class="mi">1</span>) t **
R x ** contains buff t ** list_invariant R l t --&gt;&gt;
valid (p + <span class="mi">1</span>) ** R x ** buffer_invariant R buff</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">     </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk51c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk51c"><span class="nb">intros</span> h&#39; B.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO</var><span class="hyp-type"><b>: </b><span>(p =? <span class="mi">0</span>) = false</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>(contains p x **
 contains (p + <span class="mi">1</span>) t **
 R x ** contains buff t ** list_invariant R l t) h</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>(contains (p + <span class="mi">1</span>) t **
 R x ** contains buff t ** list_invariant R l t)
  h&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(valid (p + <span class="mi">1</span>) ** R x ** buffer_invariant R buff) h&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk51d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk51d"><span class="nb">apply</span> sepconj_imp_l <span class="kr">with</span> (P := contains (p + <span class="mi">1</span>) t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO</var><span class="hyp-type"><b>: </b><span>(p =? <span class="mi">0</span>) = false</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>(contains p x **
 contains (p + <span class="mi">1</span>) t **
 R x ** contains buff t ** list_invariant R l t) h</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>(contains (p + <span class="mi">1</span>) t **
 R x ** contains buff t ** list_invariant R l t)
  h&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains (p + <span class="mi">1</span>) t --&gt;&gt; valid (p + <span class="mi">1</span>)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk51e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO</var><span class="hyp-type"><b>: </b><span>(p =? <span class="mi">0</span>) = false</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>(contains p x **
 contains (p + <span class="mi">1</span>) t **
 R x ** contains buff t ** list_invariant R l t) h</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>(contains (p + <span class="mi">1</span>) t **
 R x ** contains buff t ** list_invariant R l t)
  h&#39;</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk51e"><hr></label><div class="goal-conclusion">(contains (p + <span class="mi">1</span>) t ** R x ** buffer_invariant R buff)
  h&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">     </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk51f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk51f"><span class="nb">intros</span> h&#39;&#39; C.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO</var><span class="hyp-type"><b>: </b><span>(p =? <span class="mi">0</span>) = false</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>(contains p x **
 contains (p + <span class="mi">1</span>) t **
 R x ** contains buff t ** list_invariant R l t) h</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>(contains (p + <span class="mi">1</span>) t **
 R x ** contains buff t ** list_invariant R l t)
  h&#39;</span></span></span><br><span><var>h''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>contains (p + <span class="mi">1</span>) t h&#39;&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">valid (p + <span class="mi">1</span>) h&#39;&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk520" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO</var><span class="hyp-type"><b>: </b><span>(p =? <span class="mi">0</span>) = false</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>(contains p x **
 contains (p + <span class="mi">1</span>) t **
 R x ** contains buff t ** list_invariant R l t) h</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>(contains (p + <span class="mi">1</span>) t **
 R x ** contains buff t ** list_invariant R l t)
  h&#39;</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk520"><hr></label><div class="goal-conclusion">(contains (p + <span class="mi">1</span>) t ** R x ** buffer_invariant R buff)
  h&#39;</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk521" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk521"><span class="kr">exists</span> <span class="nv">t</span>; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO</var><span class="hyp-type"><b>: </b><span>(p =? <span class="mi">0</span>) = false</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>(contains p x **
 contains (p + <span class="mi">1</span>) t **
 R x ** contains buff t ** list_invariant R l t) h</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>(contains (p + <span class="mi">1</span>) t **
 R x ** contains buff t ** list_invariant R l t)
  h&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(contains (p + <span class="mi">1</span>) t ** R x ** buffer_invariant R buff)
  h&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">     </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk522" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk522"><span class="nb">revert</span> h&#39; B.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO</var><span class="hyp-type"><b>: </b><span>(p =? <span class="mi">0</span>) = false</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>(contains p x **
 contains (p + <span class="mi">1</span>) t **
 R x ** contains buff t ** list_invariant R l t) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">h&#39;</span> : heap,
(contains (p + <span class="mi">1</span>) t **
 R x ** contains buff t ** list_invariant R l t) h&#39; -&gt;
(contains (p + <span class="mi">1</span>) t ** R x ** buffer_invariant R buff)
  h&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk523" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk523"><span class="nb">apply</span> sepconj_imp_r.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO</var><span class="hyp-type"><b>: </b><span>(p =? <span class="mi">0</span>) = false</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>(contains p x **
 contains (p + <span class="mi">1</span>) t **
 R x ** contains buff t ** list_invariant R l t) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">R x ** contains buff t ** list_invariant R l t --&gt;&gt;
R x ** buffer_invariant R buff</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk524" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk524"><span class="nb">apply</span> sepconj_imp_r.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO</var><span class="hyp-type"><b>: </b><span>(p =? <span class="mi">0</span>) = false</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>(contains p x **
 contains (p + <span class="mi">1</span>) t **
 R x ** contains buff t ** list_invariant R l t) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains buff t ** list_invariant R l t --&gt;&gt;
buffer_invariant R buff</div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">     </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk525" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk525"><span class="nb">intros</span> h&#39;&#39;&#39; D.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO</var><span class="hyp-type"><b>: </b><span>(p =? <span class="mi">0</span>) = false</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>(contains p x **
 contains (p + <span class="mi">1</span>) t **
 R x ** contains buff t ** list_invariant R l t) h</span></span></span><br><span><var>h'''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>(contains buff t ** list_invariant R l t) h&#39;&#39;&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff h&#39;&#39;&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk526" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk526"><span class="nb">red</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>NOTZERO</var><span class="hyp-type"><b>: </b><span>(p =? <span class="mi">0</span>) = false</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>p &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>(contains p x **
 contains (p + <span class="mi">1</span>) t **
 R x ** contains buff t ** list_invariant R l t) h</span></span></span><br><span><var>h'''</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>(contains buff t ** list_invariant R l t) h&#39;&#39;&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">aexists
  (<span class="kr">fun</span> <span class="nv">l</span> : list Z =&gt;
   aexists
     (<span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
      contains buff p ** list_invariant R l p)) h&#39;&#39;&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kr">exists</span> <span class="nv">l</span>; <span class="kr">exists</span> <span class="nv">t</span>; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk527" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk527">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp
‚ä¢ ‚¶É (p = <span class="mi">0</span>) //\\
    contains buff p ** list_invariant R l p ‚¶Ñ PURE <span class="mi">0</span>
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Qloop v ** buffer_invariant R buff ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk528" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk528"><span class="nb">apply</span> triple_simple_conj_pre; <span class="nb">intros</span> ZERO.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>ZERO</var><span class="hyp-type"><b>: </b><span>p = <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ‚ä¢ ‚¶É contains buff p ** list_invariant R l p
‚¶Ñ PURE <span class="mi">0</span>
‚¶É <span class="kr">fun</span> <span class="nv">v</span> : Z =&gt; Qloop v ** buffer_invariant R buff ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk529" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk529"><span class="nb">apply</span> triple_pure.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>ZERO</var><span class="hyp-type"><b>: </b><span>p = <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains buff p ** list_invariant R l p --&gt;&gt;
Qloop <span class="mi">0</span> ** buffer_invariant R buff</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk52a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk52a"><span class="nb">unfold</span> Qloop; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>ZERO</var><span class="hyp-type"><b>: </b><span>p = <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains buff p ** list_invariant R l p --&gt;&gt;
emp ** buffer_invariant R buff</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk52b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk52b"><span class="nb">rewrite</span> sepconj_emp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>list Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>ZERO</var><span class="hyp-type"><b>: </b><span>p = <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains buff p ** list_invariant R l p --&gt;&gt;
buffer_invariant R buff</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> h A; <span class="kr">exists</span> <span class="nv">l</span>, p; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk52c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk52c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Qloop <span class="mi">0</span> --&gt;&gt; emp</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk52d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk52d"><span class="nb">unfold</span> Qloop; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp --&gt;&gt; emp</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">red</span>; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk52e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk52e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
(v &lt;&gt; <span class="mi">0</span>) //\\ Qloop v --&gt;&gt;
aexists
  (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt; contains v x ** valid (v + <span class="mi">1</span>) ** R x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk52f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk52f"><span class="nb">unfold</span> Qloop.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
(v &lt;&gt; <span class="mi">0</span>) //\\
(<span class="kr">if</span> v =? <span class="mi">0</span>
 <span class="kr">then</span> emp
 <span class="kr">else</span>
  aexists
    (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt; contains v x ** valid (v + <span class="mi">1</span>) ** R x)) --&gt;&gt;
aexists
  (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt; contains v x ** valid (v + <span class="mi">1</span>) ** R x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk530" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk530"><span class="nb">intros</span> v h [A B].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>v &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>(<span class="kr">if</span> v =? <span class="mi">0</span>
 <span class="kr">then</span> emp
 <span class="kr">else</span>
  aexists
    (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
     contains v x ** valid (v + <span class="mi">1</span>) ** R x)) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">aexists
  (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt; contains v x ** valid (v + <span class="mi">1</span>) ** R x)
  h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk531" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk531"><span class="nb">apply</span> Z.eqb_neq <span class="kr">in</span> A.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>(v =? <span class="mi">0</span>) = false</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>(<span class="kr">if</span> v =? <span class="mi">0</span>
 <span class="kr">then</span> emp
 <span class="kr">else</span>
  aexists
    (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
     contains v x ** valid (v + <span class="mi">1</span>) ** R x)) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">aexists
  (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt; contains v x ** valid (v + <span class="mi">1</span>) ** R x)
  h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk532" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk532"><span class="nb">rewrite</span> A <span class="kr">in</span> B.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>Qloop</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
<span class="kr">if</span> p =? <span class="mi">0</span>
<span class="kr">then</span> emp
<span class="kr">else</span>
 aexists
   (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
    contains p x ** valid (p + <span class="mi">1</span>) ** R x)</span></span><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>heap</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span>(v =? <span class="mi">0</span>) = false</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>aexists
  (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
   contains v x ** valid (v + <span class="mi">1</span>) ** R x) h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">aexists
  (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt; contains v x ** valid (v + <span class="mi">1</span>) ** R x)
  h</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">  
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk533" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk533"><span class="kn">Lemma</span> <span class="nf">triple_consume</span>: <span class="kr">forall</span> <span class="nv">R</span> <span class="nv">buff</span>,
  buffer_invariant R buff ‚ä¢
           ‚¶É emp ‚¶Ñ CONSUME buff ‚¶É <span class="kr">fun</span> <span class="nv">data</span> =&gt; R data ‚¶Ñ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">R</span> : Z -&gt; assertion) (<span class="nv">buff</span> : addr),
buffer_invariant R buff ‚ä¢ ‚¶É emp ‚¶Ñ CONSUME buff
‚¶É <span class="kr">fun</span> <span class="nv">data</span> : Z =&gt; R data ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk534" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk534"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">R</span> : Z -&gt; assertion) (<span class="nv">buff</span> : addr),
buffer_invariant R buff ‚ä¢ ‚¶É emp ‚¶Ñ CONSUME buff
‚¶É <span class="kr">fun</span> <span class="nv">data</span> : Z =&gt; R data ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk535" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk535"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff ‚ä¢ ‚¶É emp ‚¶Ñ CONSUME buff
‚¶É <span class="kr">fun</span> <span class="nv">data</span> : Z =&gt; R data ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk536" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk536"><span class="nb">eapply</span> triple_let.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff ‚ä¢ ‚¶É emp ‚¶Ñ POP buff ‚¶É <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk537" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk537"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
buffer_invariant R buff ‚ä¢ ‚¶É 
<span class="nl">?Q</span> v
‚¶Ñ LET (GET v)
    (<span class="kr">fun</span> <span class="nv">data</span> : Z =&gt;
     SEQ (FREE v) (SEQ (FREE (v + <span class="mi">1</span>)) (PURE data)))
‚¶É <span class="kr">fun</span> <span class="nv">data</span> : Z =&gt; R data ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk538" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk538"><span class="nb">apply</span> triple_pop.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
buffer_invariant R buff
‚ä¢ ‚¶É (<span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
     aexists
       (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
        contains p x ** valid (p + <span class="mi">1</span>) ** R x)) v
‚¶Ñ LET (GET v)
    (<span class="kr">fun</span> <span class="nv">data</span> : Z =&gt;
     SEQ (FREE v) (SEQ (FREE (v + <span class="mi">1</span>)) (PURE data)))
‚¶É <span class="kr">fun</span> <span class="nv">data</span> : Z =&gt; R data ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk539" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk539"><span class="nb">intros</span> b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff
‚ä¢ ‚¶É (<span class="kr">fun</span> <span class="nv">p</span> : Z =&gt;
     aexists
       (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
        contains p x ** valid (p + <span class="mi">1</span>) ** R x)) b
‚¶Ñ LET (GET b)
    (<span class="kr">fun</span> <span class="nv">data</span> : Z =&gt;
     SEQ (FREE b) (SEQ (FREE (b + <span class="mi">1</span>)) (PURE data)))
‚¶É <span class="kr">fun</span> <span class="nv">data</span> : Z =&gt; R data ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk53a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk53a"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff
‚ä¢ ‚¶É aexists
      (<span class="kr">fun</span> <span class="nv">x</span> : Z =&gt;
       contains b x ** valid (b + <span class="mi">1</span>) ** R x)
‚¶Ñ LET (GET b)
    (<span class="kr">fun</span> <span class="nv">data</span> : Z =&gt;
     SEQ (FREE b) (SEQ (FREE (b + <span class="mi">1</span>)) (PURE data)))
‚¶É <span class="kr">fun</span> <span class="nv">data</span> : Z =&gt; R data ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk53b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk53b"><span class="nb">apply</span> triple_exists_pre; <span class="nb">intros</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>b, p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff
‚ä¢ ‚¶É contains b p ** valid (b + <span class="mi">1</span>) ** R p
‚¶Ñ LET (GET b)
    (<span class="kr">fun</span> <span class="nv">data</span> : Z =&gt;
     SEQ (FREE b) (SEQ (FREE (b + <span class="mi">1</span>)) (PURE data)))
‚¶É <span class="kr">fun</span> <span class="nv">data</span> : Z =&gt; R data ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk53c" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk53c"><span class="nb">eapply</span> triple_let.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>b, p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff
‚ä¢ ‚¶É contains b p ** valid (b + <span class="mi">1</span>) ** R p ‚¶Ñ GET b ‚¶É 
<span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk53d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>b, p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk53d"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
buffer_invariant R buff ‚ä¢ ‚¶É 
<span class="nl">?Q</span> v ‚¶Ñ SEQ (FREE b) (SEQ (FREE (b + <span class="mi">1</span>)) (PURE v))
‚¶É <span class="kr">fun</span> <span class="nv">data</span> : Z =&gt; R data ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk53e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk53e">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>b, p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff
‚ä¢ ‚¶É contains b p ** valid (b + <span class="mi">1</span>) ** R p ‚¶Ñ GET b ‚¶É 
<span class="nl">?Q</span> ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk53f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk53f"><span class="nb">apply</span> triple_frame.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>b, p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff ‚ä¢ ‚¶É contains b p ‚¶Ñ GET b ‚¶É 
<span class="nl">?Q</span> ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> triple_get.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk540" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk540">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>b, p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Z,
buffer_invariant R buff
‚ä¢ ‚¶É (<span class="kr">fun</span> <span class="nv">v0</span> : Z =&gt;
     (<span class="kr">fun</span> <span class="nv">v&#39;</span> : Z =&gt; (v&#39; = p) //\\ contains b p) v0 **
     valid (b + <span class="mi">1</span>) ** R p) v
‚¶Ñ SEQ (FREE b) (SEQ (FREE (b + <span class="mi">1</span>)) (PURE v))
‚¶É <span class="kr">fun</span> <span class="nv">data</span> : Z =&gt; R data ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk541" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk541"><span class="nb">intros</span> p&#39;; <span class="nb">cbn</span>; <span class="nb">rewrite</span> lift_pureconj; <span class="nb">apply</span> triple_simple_conj_pre; <span class="nb">intros</span> E; <span class="nb">subst</span> p&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>b, p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff
‚ä¢ ‚¶É contains b p ** valid (b + <span class="mi">1</span>) ** R p
‚¶Ñ SEQ (FREE b) (SEQ (FREE (b + <span class="mi">1</span>)) (PURE p))
‚¶É <span class="kr">fun</span> <span class="nv">data</span> : Z =&gt; R data ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk542" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk542"><span class="nb">eapply</span> triple_seq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>b, p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff
‚ä¢ ‚¶É contains b p ** valid (b + <span class="mi">1</span>) ** R p ‚¶Ñ FREE b
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk543" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>b, p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk543"><hr></label><div class="goal-conclusion">buffer_invariant R buff ‚ä¢ ‚¶É 
<span class="nl">?Q</span> ‚¶Ñ SEQ (FREE (b + <span class="mi">1</span>)) (PURE p)
‚¶É <span class="kr">fun</span> <span class="nv">data</span> : Z =&gt; R data ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk544" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk544">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>b, p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff
‚ä¢ ‚¶É contains b p ** valid (b + <span class="mi">1</span>) ** R p ‚¶Ñ FREE b
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; <span class="nl">?Q</span> ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk545" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk545"><span class="nb">apply</span> triple_frame <span class="kr">with</span> (Q := <span class="kr">fun</span> <span class="nv">_</span> =&gt; emp).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>b, p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff ‚ä¢ ‚¶É contains b p ‚¶Ñ FREE b
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk546" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk546"><span class="nb">eapply</span> triple_consequence_pre.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>b, p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff ‚ä¢ ‚¶É <span class="nl">?P&#39;</span> ‚¶Ñ FREE b
‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk547" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>b, p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk547"><hr></label><div class="goal-conclusion">contains b p --&gt;&gt; <span class="nl">?P&#39;</span></div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk548" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk548"><span class="nb">apply</span> triple_free.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>b, p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">contains b p --&gt;&gt; valid b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> h A; <span class="kr">exists</span> <span class="nv">p</span>; <span class="nb">auto</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk549" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk549">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>b, p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff
‚ä¢ ‚¶É emp ** valid (b + <span class="mi">1</span>) ** R p
‚¶Ñ SEQ (FREE (b + <span class="mi">1</span>)) (PURE p) ‚¶É <span class="kr">fun</span> <span class="nv">data</span> : Z =&gt; R data
‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk54a" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk54a"><span class="nb">rewrite</span> sepconj_emp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>b, p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff ‚ä¢ ‚¶É valid (b + <span class="mi">1</span>) ** R p
‚¶Ñ SEQ (FREE (b + <span class="mi">1</span>)) (PURE p) ‚¶É <span class="kr">fun</span> <span class="nv">data</span> : Z =&gt; R data
‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk54b" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk54b"><span class="nb">eapply</span> triple_seq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>b, p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff ‚ä¢ ‚¶É valid (b + <span class="mi">1</span>) ** R p
‚¶Ñ FREE (b + <span class="mi">1</span>) ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; <span class="nl">?Q</span> ‚¶Ñ</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CSL-v-chk54c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>b, p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><label class="goal-separator" for="CSL-v-chk54c"><hr></label><div class="goal-conclusion">buffer_invariant R buff ‚ä¢ ‚¶É 
<span class="nl">?Q</span> ‚¶Ñ PURE p ‚¶É <span class="kr">fun</span> <span class="nv">data</span> : Z =&gt; R data ‚¶Ñ</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk54d" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk54d">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>b, p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff ‚ä¢ ‚¶É valid (b + <span class="mi">1</span>) ** R p
‚¶Ñ FREE (b + <span class="mi">1</span>) ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; <span class="nl">?Q</span> ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk54e" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk54e"><span class="nb">apply</span> triple_frame <span class="kr">with</span> (Q := <span class="kr">fun</span> <span class="nv">_</span> =&gt; emp).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>b, p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff ‚ä¢ ‚¶É valid (b + <span class="mi">1</span>)
‚¶Ñ FREE (b + <span class="mi">1</span>) ‚¶É <span class="kr">fun</span> <span class="nv">_</span> : Z =&gt; emp ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> triple_free.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk54f" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk54f">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>b, p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">buffer_invariant R buff ‚ä¢ ‚¶É emp ** R p ‚¶Ñ PURE p
‚¶É <span class="kr">fun</span> <span class="nv">data</span> : Z =&gt; R data ‚¶Ñ</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk550" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk550"><span class="nb">apply</span> triple_pure.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>b, p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">emp ** R p --&gt;&gt; R p</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CSL-v-chk551" style="display: none" type="checkbox"><label class="alectryon-input" for="CSL-v-chk551"><span class="nb">rewrite</span> sepconj_emp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>R</var><span class="hyp-type"><b>: </b><span>Z -&gt; assertion</span></span></span><br><span><var>buff</var><span class="hyp-type"><b>: </b><span>addr</span></span></span><br><span><var>b, p</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">R p --&gt;&gt; R p</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">red</span>; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">ProdCons2</span>.</span></span></pre></article></body></html>